YUI.add("gallery-nmmenus",function(e,t){e.NMMenus=e.Base.create("nmmenus",e.Widget,[],{initializer:function(t){e.all("#"+this.get("menudivid")+" ul li ul").each(function(e){e.get("parentNode").one(".topLink").addClass("hasSubMenu")}),this.get("ajaxLoadFunc")&&this.get("ajaxLoadFunc").call(null,this,this),this.set("pulsesleft",this.get("pulses")),this.set("pulseduration",this.get("pulseduration")/this.get("pulses")),!this.get("nopulsate")&&!this.get("ajaxLoadFunc")&&this.initNavMenuPulsate.call(this),e.all("#"+this.get("menudivid")+" .topLink").each(function(t){t.hasClass("hasSubMenu")||e.on("mouseleave",function(e){t.get("parentNode").removeClass("active")},t)}),e.all("#"+this.get("menudivid")+" .hasSubMenu").each(function(t,n){var r=t.get("parentNode"),i=r.one("ul");e.on("mouseenter",function(n){e.all("#"+this.get("menudivid")+" .hasSubMenu").get("parentNode").removeClass("active"),r.addClass("active");var s=this.calcMenuDimensions(i);switch(this.get("anim")){case"fade":i.setStyles({opacity:0,display:"block",height:""}),i.transition({opacity:1,easing:"ease-out",duration:this.get("inDuration")});break;case"blind":i.setStyles({height:"0px",display:"block",position:"absolute",top:t.getComputedStyle("height"),width:s[0]}),i.transition({height:s[1],duration:this.get("inDuration"),easing:"ease-out",on:{end:function(){i.setStyle("height","")}}});break;default:}},r,this),e.on("mouseleave",function(e){this.hideNavMenu.call(this,{topLi:r})},r,this)},this)},calcMenuDimensions:function(e){e.setStyles({display:"block",height:""});var t=e.getComputedStyle("height"),n=e.getComputedStyle("width");return e.setStyle("display","none"),[n,t]},hideNavMenu:function(e){e.subMenu=e.topLi.one("ul");switch(this.get("anim")){case"fade":e.subMenu.transition({opacity:0,duration:this.get("outDuration"),easing:"ease-out",on:{end:function(){e.subMenu.setStyles({height:"0px",display:"none"}),e.topLi.removeClass("active")}}});break;case"blind":e.subMenu.transition({height:"0px",duration:this.get("outDuration"),easing:"ease-out",on:{end:function(){e.subMenu.setStyle("display","none"),e.topLi.removeClass("active")}}});break;default:}},initNavMenuPulsate:function(t,n){e.all("#"+this.get("menudivid")+" li a.topLink").each(function(t){t=t.get("parentNode"),e.delegate("click",e.bind(function(t){if(t.target.get("href").match(/#$/)&&t.target.hasClass("topLink")){t.preventDefault();return}if(e.one("#"+t.target.get("id")).hasClass("noajax"))return;t.preventDefault(),t.target.hasClass("topLink")?window.location.href=t.target.get("href"):this.menuItemPulsate(t.target.get("id"),function(){window.location.href=t.target.get("href")})},this),t,"a")},this)},menuItemPulsate:function(t,n,r){e.one("#"+t).transition({opacity:0,duration:this.get("pulseduration")/2,on:{end:e.bind(function(){e.one("#"+t).transition({opacity:1,duration:this.get("pulseduration")/2,on:{end:e.bind(function(){this.get("pulsesleft")>1?(this.set("pulsesleft",this.get("pulsesleft")-1),this.menuItemPulsate.call(this,t,n,r)):(this.set("pulsesleft",this.get("pulses")),this.hideNavMenu.call(this,{topLi:e.one("#"+this.get("menudivid")+" li.active")}),n?n(r):window.location.href=e.one("#"+t).get("href"))},this)}})},this)}})}},{ATTRS:{anim:{value:"fade"},inDuration:{value:.35},outDuration:{value:.25},menudivid:{value:"menublock"},pulses:{value:2},pulseduration:{value:.3},ajaxLoadFunc:{}}})},"gallery-2013.05.02-22-59",{supersedes:[""],requires:["base-build","widget","event-mouseenter","node","transition"],optional:[""]});
