if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-editor-ui/gallery-editor-ui.js']) {
   __coverage__['build/gallery-editor-ui/gallery-editor-ui.js'] = {"path":"build/gallery-editor-ui/gallery-editor-ui.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"377":0,"378":0,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":0,"394":0,"395":0,"396":0,"397":0,"398":0,"399":0,"400":0,"401":0,"402":0,"403":0,"404":0,"405":0,"406":0,"407":0,"408":0,"409":0,"410":0,"411":0,"412":0,"413":0,"414":0,"415":0,"416":0,"417":0,"418":0,"419":0,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":0,"430":0,"431":0,"432":0,"433":0,"434":0,"435":0,"436":0,"437":0,"438":0,"439":0,"440":0,"441":0,"442":0,"443":0,"444":0,"445":0,"446":0,"447":0,"448":0,"449":0,"450":0,"451":0,"452":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":0,"460":0,"461":0,"462":0,"463":0,"464":0,"465":0,"466":0,"467":0,"468":0,"469":0,"470":0,"471":0,"472":0,"473":0,"474":0,"475":0,"476":0,"477":0,"478":0,"479":0,"480":0,"481":0,"482":0,"483":0,"484":0,"485":0,"486":0,"487":0,"488":0,"489":0,"490":0,"491":0,"492":0,"493":0,"494":0,"495":0,"496":0,"497":0,"498":0,"499":0,"500":0,"501":0,"502":0,"503":0,"504":0,"505":0,"506":0,"507":0,"508":0,"509":0,"510":0,"511":0,"512":0,"513":0,"514":0,"515":0,"516":0,"517":0,"518":0,"519":0,"520":0,"521":0,"522":0,"523":0,"524":0,"525":0,"526":0,"527":0,"528":0,"529":0,"530":0,"531":0,"532":0,"533":0,"534":0,"535":0,"536":0,"537":0,"538":0,"539":0,"540":0,"541":0,"542":0,"543":0,"544":0,"545":0,"546":0,"547":0,"548":0,"549":0,"550":0,"551":0,"552":0,"553":0,"554":0,"555":0,"556":0,"557":0,"558":0,"559":0,"560":0,"561":0,"562":0,"563":0,"564":0,"565":0,"566":0,"567":0,"568":0,"569":0,"570":0,"571":0,"572":0,"573":0,"574":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0],"71":[0,0],"72":[0,0,0],"73":[0,0],"74":[0,0],"75":[0,0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0,0,0,0,0],"94":[0,0],"95":[0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0],"102":[0,0],"103":[0,0,0,0,0],"104":[0,0],"105":[0,0],"106":[0,0],"107":[0,0],"108":[0,0],"109":[0,0],"110":[0,0],"111":[0,0],"112":[0,0],"113":[0,0],"114":[0,0],"115":[0,0],"116":[0,0],"117":[0,0],"118":[0,0],"119":[0,0],"120":[0,0],"121":[0,0],"122":[0,0],"123":[0,0],"124":[0,0],"125":[0,0,0,0],"126":[0,0],"127":[0,0],"128":[0,0],"129":[0,0],"130":[0,0],"131":[0,0],"132":[0,0],"133":[0,0,0],"134":[0,0],"135":[0,0],"136":[0,0],"137":[0,0],"138":[0,0],"139":[0,0],"140":[0,0],"141":[0,0],"142":[0,0],"143":[0,0],"144":[0,0],"145":[0,0],"146":[0,0,0],"147":[0,0],"148":[0,0],"149":[0,0],"150":[0,0],"151":[0,0],"152":[0,0],"153":[0,0],"154":[0,0],"155":[0,0],"156":[0,0],"157":[0,0],"158":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":29},"end":{"line":1,"column":48}}},"2":{"name":"EditorUI","line":18,"loc":{"start":{"line":18,"column":1},"end":{"line":18,"column":27}}},"3":{"name":"(anonymous_3)","line":136,"loc":{"start":{"line":136,"column":13},"end":{"line":136,"column":24}}},"4":{"name":"(anonymous_4)","line":137,"loc":{"start":{"line":137,"column":15},"end":{"line":137,"column":26}}},"5":{"name":"(anonymous_5)","line":143,"loc":{"start":{"line":143,"column":15},"end":{"line":143,"column":26}}},"6":{"name":"(anonymous_6)","line":202,"loc":{"start":{"line":202,"column":33},"end":{"line":202,"column":43}}},"7":{"name":"(anonymous_7)","line":206,"loc":{"start":{"line":206,"column":55},"end":{"line":206,"column":65}}},"8":{"name":"(anonymous_8)","line":245,"loc":{"start":{"line":245,"column":48},"end":{"line":245,"column":58}}},"9":{"name":"(anonymous_9)","line":246,"loc":{"start":{"line":246,"column":47},"end":{"line":246,"column":57}}},"10":{"name":"(anonymous_10)","line":260,"loc":{"start":{"line":260,"column":21},"end":{"line":260,"column":31}}},"11":{"name":"(anonymous_11)","line":266,"loc":{"start":{"line":266,"column":10},"end":{"line":266,"column":24}}},"12":{"name":"(anonymous_12)","line":298,"loc":{"start":{"line":298,"column":12},"end":{"line":298,"column":26}}},"13":{"name":"(anonymous_13)","line":332,"loc":{"start":{"line":332,"column":10},"end":{"line":332,"column":29}}},"14":{"name":"(anonymous_14)","line":350,"loc":{"start":{"line":350,"column":11},"end":{"line":350,"column":30}}},"15":{"name":"(anonymous_15)","line":391,"loc":{"start":{"line":391,"column":32},"end":{"line":391,"column":47}}},"16":{"name":"(anonymous_16)","line":394,"loc":{"start":{"line":394,"column":32},"end":{"line":394,"column":47}}},"17":{"name":"(anonymous_17)","line":397,"loc":{"start":{"line":397,"column":35},"end":{"line":397,"column":50}}},"18":{"name":"(anonymous_18)","line":414,"loc":{"start":{"line":414,"column":51},"end":{"line":414,"column":62}}},"19":{"name":"(anonymous_19)","line":431,"loc":{"start":{"line":431,"column":10},"end":{"line":431,"column":29}}},"20":{"name":"(anonymous_20)","line":466,"loc":{"start":{"line":466,"column":46},"end":{"line":466,"column":57}}},"21":{"name":"(anonymous_21)","line":472,"loc":{"start":{"line":472,"column":50},"end":{"line":472,"column":61}}},"22":{"name":"(anonymous_22)","line":494,"loc":{"start":{"line":494,"column":16},"end":{"line":494,"column":30}}},"23":{"name":"(anonymous_23)","line":521,"loc":{"start":{"line":521,"column":11},"end":{"line":521,"column":25}}},"24":{"name":"(anonymous_24)","line":541,"loc":{"start":{"line":541,"column":17},"end":{"line":541,"column":27}}},"25":{"name":"(anonymous_25)","line":563,"loc":{"start":{"line":563,"column":34},"end":{"line":563,"column":50}}},"26":{"name":"(anonymous_26)","line":585,"loc":{"start":{"line":585,"column":24},"end":{"line":585,"column":37}}},"27":{"name":"(anonymous_27)","line":594,"loc":{"start":{"line":594,"column":16},"end":{"line":594,"column":26}}},"28":{"name":"(anonymous_28)","line":598,"loc":{"start":{"line":598,"column":53},"end":{"line":598,"column":68}}},"29":{"name":"(anonymous_29)","line":599,"loc":{"start":{"line":599,"column":25},"end":{"line":599,"column":36}}},"30":{"name":"(anonymous_30)","line":611,"loc":{"start":{"line":611,"column":63},"end":{"line":611,"column":78}}},"31":{"name":"(anonymous_31)","line":612,"loc":{"start":{"line":612,"column":31},"end":{"line":612,"column":42}}},"32":{"name":"(anonymous_32)","line":637,"loc":{"start":{"line":637,"column":47},"end":{"line":637,"column":59}}},"33":{"name":"(anonymous_33)","line":649,"loc":{"start":{"line":649,"column":46},"end":{"line":649,"column":58}}},"34":{"name":"(anonymous_34)","line":677,"loc":{"start":{"line":677,"column":47},"end":{"line":677,"column":59}}},"35":{"name":"(anonymous_35)","line":694,"loc":{"start":{"line":694,"column":46},"end":{"line":694,"column":58}}},"36":{"name":"(anonymous_36)","line":725,"loc":{"start":{"line":725,"column":16},"end":{"line":725,"column":27}}},"37":{"name":"(anonymous_37)","line":742,"loc":{"start":{"line":742,"column":19},"end":{"line":742,"column":31}}},"38":{"name":"(anonymous_38)","line":751,"loc":{"start":{"line":751,"column":20},"end":{"line":751,"column":34}}},"39":{"name":"(anonymous_39)","line":755,"loc":{"start":{"line":755,"column":56},"end":{"line":755,"column":70}}},"40":{"name":"(anonymous_40)","line":770,"loc":{"start":{"line":770,"column":19},"end":{"line":770,"column":35}}},"41":{"name":"(anonymous_41)","line":810,"loc":{"start":{"line":810,"column":15},"end":{"line":810,"column":25}}},"42":{"name":"(anonymous_42)","line":824,"loc":{"start":{"line":824,"column":16},"end":{"line":824,"column":26}}},"43":{"name":"(anonymous_43)","line":828,"loc":{"start":{"line":828,"column":13},"end":{"line":828,"column":27}}},"44":{"name":"(anonymous_44)","line":850,"loc":{"start":{"line":850,"column":25},"end":{"line":850,"column":46}}},"45":{"name":"(anonymous_45)","line":907,"loc":{"start":{"line":907,"column":14},"end":{"line":907,"column":24}}},"46":{"name":"(anonymous_46)","line":942,"loc":{"start":{"line":942,"column":17},"end":{"line":942,"column":47}}},"47":{"name":"(anonymous_47)","line":959,"loc":{"start":{"line":959,"column":14},"end":{"line":959,"column":25}}},"48":{"name":"(anonymous_48)","line":975,"loc":{"start":{"line":975,"column":14},"end":{"line":975,"column":24}}},"49":{"name":"(anonymous_49)","line":987,"loc":{"start":{"line":987,"column":9},"end":{"line":987,"column":19}}},"50":{"name":"EditorImageManage","line":1003,"loc":{"start":{"line":1003,"column":1},"end":{"line":1003,"column":36}}},"51":{"name":"(anonymous_51)","line":1059,"loc":{"start":{"line":1059,"column":11},"end":{"line":1059,"column":37}}},"52":{"name":"(anonymous_52)","line":1073,"loc":{"start":{"line":1073,"column":11},"end":{"line":1073,"column":39}}},"53":{"name":"(anonymous_53)","line":1099,"loc":{"start":{"line":1099,"column":13},"end":{"line":1099,"column":24}}},"54":{"name":"(anonymous_54)","line":1100,"loc":{"start":{"line":1100,"column":15},"end":{"line":1100,"column":26}}},"55":{"name":"(anonymous_55)","line":1106,"loc":{"start":{"line":1106,"column":15},"end":{"line":1106,"column":26}}},"56":{"name":"(anonymous_56)","line":1160,"loc":{"start":{"line":1160,"column":47},"end":{"line":1160,"column":58}}},"57":{"name":"(anonymous_57)","line":1166,"loc":{"start":{"line":1166,"column":48},"end":{"line":1166,"column":59}}},"58":{"name":"(anonymous_58)","line":1181,"loc":{"start":{"line":1181,"column":35},"end":{"line":1181,"column":46}}},"59":{"name":"(anonymous_59)","line":1188,"loc":{"start":{"line":1188,"column":36},"end":{"line":1188,"column":47}}},"60":{"name":"(anonymous_60)","line":1196,"loc":{"start":{"line":1196,"column":44},"end":{"line":1196,"column":57}}},"61":{"name":"(anonymous_61)","line":1218,"loc":{"start":{"line":1218,"column":38},"end":{"line":1218,"column":54}}},"62":{"name":"(anonymous_62)","line":1258,"loc":{"start":{"line":1258,"column":11},"end":{"line":1258,"column":21}}},"63":{"name":"(anonymous_63)","line":1269,"loc":{"start":{"line":1269,"column":18},"end":{"line":1269,"column":31}}},"64":{"name":"(anonymous_64)","line":1286,"loc":{"start":{"line":1286,"column":28},"end":{"line":1286,"column":43}}},"65":{"name":"(anonymous_65)","line":1301,"loc":{"start":{"line":1301,"column":14},"end":{"line":1301,"column":27}}},"66":{"name":"(anonymous_66)","line":1316,"loc":{"start":{"line":1316,"column":12},"end":{"line":1316,"column":25}}},"67":{"name":"(anonymous_67)","line":1322,"loc":{"start":{"line":1322,"column":14},"end":{"line":1322,"column":24}}},"68":{"name":"(anonymous_68)","line":1361,"loc":{"start":{"line":1361,"column":20},"end":{"line":1361,"column":48}}},"69":{"name":"(anonymous_69)","line":1390,"loc":{"start":{"line":1390,"column":16},"end":{"line":1390,"column":26}}},"70":{"name":"(anonymous_70)","line":1427,"loc":{"start":{"line":1427,"column":34},"end":{"line":1427,"column":45}}},"71":{"name":"(anonymous_71)","line":1439,"loc":{"start":{"line":1439,"column":15},"end":{"line":1439,"column":25}}},"72":{"name":"(anonymous_72)","line":1454,"loc":{"start":{"line":1454,"column":17},"end":{"line":1454,"column":34}}},"73":{"name":"(anonymous_73)","line":1469,"loc":{"start":{"line":1469,"column":11},"end":{"line":1469,"column":21}}},"74":{"name":"(anonymous_74)","line":1473,"loc":{"start":{"line":1473,"column":41},"end":{"line":1473,"column":51}}},"75":{"name":"(anonymous_75)","line":1485,"loc":{"start":{"line":1485,"column":18},"end":{"line":1485,"column":28}}},"76":{"name":"(anonymous_76)","line":1494,"loc":{"start":{"line":1494,"column":12},"end":{"line":1494,"column":22}}},"77":{"name":"(anonymous_77)","line":1501,"loc":{"start":{"line":1501,"column":13},"end":{"line":1501,"column":29}}},"78":{"name":"(anonymous_78)","line":1513,"loc":{"start":{"line":1513,"column":13},"end":{"line":1513,"column":23}}},"79":{"name":"(anonymous_79)","line":1518,"loc":{"start":{"line":1518,"column":37},"end":{"line":1518,"column":53}}},"80":{"name":"(anonymous_80)","line":1521,"loc":{"start":{"line":1521,"column":37},"end":{"line":1521,"column":53}}},"81":{"name":"(anonymous_81)","line":1524,"loc":{"start":{"line":1524,"column":40},"end":{"line":1524,"column":56}}},"82":{"name":"(anonymous_82)","line":1560,"loc":{"start":{"line":1560,"column":8},"end":{"line":1560,"column":21}}},"83":{"name":"(anonymous_83)","line":1576,"loc":{"start":{"line":1576,"column":9},"end":{"line":1576,"column":28}}},"84":{"name":"(anonymous_84)","line":1661,"loc":{"start":{"line":1661,"column":13},"end":{"line":1661,"column":28}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1685,"column":3}},"2":{"start":{"line":18,"column":1},"end":{"line":20,"column":2}},"3":{"start":{"line":19,"column":2},"end":{"line":19,"column":57}},"4":{"start":{"line":22,"column":1},"end":{"line":22,"column":29}},"5":{"start":{"line":23,"column":1},"end":{"line":87,"column":3}},"6":{"start":{"line":90,"column":1},"end":{"line":990,"column":4}},"7":{"start":{"line":144,"column":3},"end":{"line":144,"column":43}},"8":{"start":{"line":146,"column":3},"end":{"line":251,"column":4}},"9":{"start":{"line":147,"column":4},"end":{"line":147,"column":45}},"10":{"start":{"line":148,"column":4},"end":{"line":164,"column":5}},"11":{"start":{"line":150,"column":5},"end":{"line":150,"column":29}},"12":{"start":{"line":151,"column":5},"end":{"line":151,"column":98}},"13":{"start":{"line":152,"column":5},"end":{"line":152,"column":82}},"14":{"start":{"line":153,"column":5},"end":{"line":153,"column":60}},"15":{"start":{"line":155,"column":5},"end":{"line":155,"column":30}},"16":{"start":{"line":156,"column":5},"end":{"line":156,"column":28}},"17":{"start":{"line":157,"column":5},"end":{"line":157,"column":35}},"18":{"start":{"line":160,"column":5},"end":{"line":160,"column":35}},"19":{"start":{"line":161,"column":5},"end":{"line":161,"column":31}},"20":{"start":{"line":163,"column":5},"end":{"line":163,"column":18}},"21":{"start":{"line":168,"column":4},"end":{"line":170,"column":5}},"22":{"start":{"line":169,"column":5},"end":{"line":169,"column":45}},"23":{"start":{"line":176,"column":4},"end":{"line":183,"column":5}},"24":{"start":{"line":185,"column":4},"end":{"line":194,"column":7}},"25":{"start":{"line":195,"column":4},"end":{"line":195,"column":38}},"26":{"start":{"line":198,"column":4},"end":{"line":200,"column":7}},"27":{"start":{"line":202,"column":4},"end":{"line":211,"column":12}},"28":{"start":{"line":203,"column":5},"end":{"line":203,"column":56}},"29":{"start":{"line":205,"column":5},"end":{"line":205,"column":97}},"30":{"start":{"line":206,"column":5},"end":{"line":206,"column":90}},"31":{"start":{"line":206,"column":67},"end":{"line":206,"column":80}},"32":{"start":{"line":207,"column":5},"end":{"line":207,"column":26}},"33":{"start":{"line":208,"column":5},"end":{"line":208,"column":30}},"34":{"start":{"line":209,"column":5},"end":{"line":209,"column":25}},"35":{"start":{"line":210,"column":5},"end":{"line":210,"column":32}},"36":{"start":{"line":213,"column":4},"end":{"line":222,"column":8}},"37":{"start":{"line":223,"column":4},"end":{"line":232,"column":8}},"38":{"start":{"line":233,"column":4},"end":{"line":243,"column":8}},"39":{"start":{"line":245,"column":4},"end":{"line":245,"column":101}},"40":{"start":{"line":245,"column":60},"end":{"line":245,"column":91}},"41":{"start":{"line":246,"column":4},"end":{"line":246,"column":99}},"42":{"start":{"line":246,"column":59},"end":{"line":246,"column":89}},"43":{"start":{"line":248,"column":4},"end":{"line":248,"column":33}},"44":{"start":{"line":264,"column":3},"end":{"line":534,"column":6}},"45":{"start":{"line":267,"column":5},"end":{"line":267,"column":127}},"46":{"start":{"line":269,"column":5},"end":{"line":294,"column":6}},"47":{"start":{"line":270,"column":6},"end":{"line":275,"column":7}},"48":{"start":{"line":271,"column":7},"end":{"line":271,"column":29}},"49":{"start":{"line":274,"column":7},"end":{"line":274,"column":29}},"50":{"start":{"line":276,"column":11},"end":{"line":294,"column":6}},"51":{"start":{"line":278,"column":6},"end":{"line":278,"column":13}},"52":{"start":{"line":279,"column":11},"end":{"line":294,"column":6}},"53":{"start":{"line":280,"column":6},"end":{"line":291,"column":7}},"54":{"start":{"line":281,"column":7},"end":{"line":281,"column":46}},"55":{"start":{"line":282,"column":7},"end":{"line":282,"column":41}},"56":{"start":{"line":284,"column":7},"end":{"line":284,"column":57}},"57":{"start":{"line":285,"column":7},"end":{"line":289,"column":8}},"58":{"start":{"line":286,"column":8},"end":{"line":286,"column":66}},"59":{"start":{"line":288,"column":8},"end":{"line":288,"column":70}},"60":{"start":{"line":290,"column":7},"end":{"line":290,"column":41}},"61":{"start":{"line":296,"column":5},"end":{"line":296,"column":17}},"62":{"start":{"line":300,"column":5},"end":{"line":300,"column":127}},"63":{"start":{"line":302,"column":5},"end":{"line":327,"column":6}},"64":{"start":{"line":303,"column":6},"end":{"line":308,"column":7}},"65":{"start":{"line":304,"column":7},"end":{"line":304,"column":31}},"66":{"start":{"line":307,"column":7},"end":{"line":307,"column":31}},"67":{"start":{"line":309,"column":11},"end":{"line":327,"column":6}},"68":{"start":{"line":311,"column":6},"end":{"line":311,"column":13}},"69":{"start":{"line":312,"column":11},"end":{"line":327,"column":6}},"70":{"start":{"line":313,"column":6},"end":{"line":324,"column":7}},"71":{"start":{"line":314,"column":7},"end":{"line":314,"column":42}},"72":{"start":{"line":315,"column":7},"end":{"line":315,"column":41}},"73":{"start":{"line":317,"column":7},"end":{"line":317,"column":57}},"74":{"start":{"line":318,"column":7},"end":{"line":322,"column":8}},"75":{"start":{"line":319,"column":8},"end":{"line":319,"column":58}},"76":{"start":{"line":321,"column":8},"end":{"line":321,"column":62}},"77":{"start":{"line":323,"column":7},"end":{"line":323,"column":41}},"78":{"start":{"line":329,"column":5},"end":{"line":329,"column":17}},"79":{"start":{"line":333,"column":5},"end":{"line":333,"column":127}},"80":{"start":{"line":335,"column":5},"end":{"line":341,"column":6}},"81":{"start":{"line":337,"column":11},"end":{"line":341,"column":6}},"82":{"start":{"line":339,"column":11},"end":{"line":341,"column":6}},"83":{"start":{"line":342,"column":5},"end":{"line":342,"column":39}},"84":{"start":{"line":344,"column":5},"end":{"line":348,"column":6}},"85":{"start":{"line":345,"column":6},"end":{"line":345,"column":58}},"86":{"start":{"line":347,"column":6},"end":{"line":347,"column":57}},"87":{"start":{"line":352,"column":5},"end":{"line":352,"column":150}},"88":{"start":{"line":354,"column":5},"end":{"line":358,"column":6}},"89":{"start":{"line":355,"column":6},"end":{"line":357,"column":7}},"90":{"start":{"line":356,"column":7},"end":{"line":356,"column":20}},"91":{"start":{"line":360,"column":5},"end":{"line":373,"column":6}},"92":{"start":{"line":361,"column":6},"end":{"line":361,"column":34}},"93":{"start":{"line":362,"column":6},"end":{"line":362,"column":31}},"94":{"start":{"line":363,"column":6},"end":{"line":363,"column":28}},"95":{"start":{"line":364,"column":11},"end":{"line":373,"column":6}},"96":{"start":{"line":365,"column":6},"end":{"line":365,"column":31}},"97":{"start":{"line":366,"column":6},"end":{"line":366,"column":28}},"98":{"start":{"line":367,"column":11},"end":{"line":373,"column":6}},"99":{"start":{"line":368,"column":6},"end":{"line":370,"column":7}},"100":{"start":{"line":369,"column":7},"end":{"line":369,"column":29}},"101":{"start":{"line":372,"column":6},"end":{"line":372,"column":19}},"102":{"start":{"line":375,"column":5},"end":{"line":375,"column":88}},"103":{"start":{"line":376,"column":5},"end":{"line":376,"column":64}},"104":{"start":{"line":377,"column":5},"end":{"line":377,"column":146}},"105":{"start":{"line":382,"column":5},"end":{"line":384,"column":6}},"106":{"start":{"line":383,"column":6},"end":{"line":383,"column":122}},"107":{"start":{"line":386,"column":5},"end":{"line":386,"column":42}},"108":{"start":{"line":391,"column":5},"end":{"line":393,"column":14}},"109":{"start":{"line":394,"column":5},"end":{"line":396,"column":14}},"110":{"start":{"line":397,"column":5},"end":{"line":407,"column":14}},"111":{"start":{"line":400,"column":6},"end":{"line":400,"column":42}},"112":{"start":{"line":401,"column":6},"end":{"line":405,"column":7}},"113":{"start":{"line":402,"column":7},"end":{"line":402,"column":59}},"114":{"start":{"line":410,"column":5},"end":{"line":410,"column":51}},"115":{"start":{"line":411,"column":5},"end":{"line":411,"column":50}},"116":{"start":{"line":413,"column":5},"end":{"line":413,"column":43}},"117":{"start":{"line":414,"column":5},"end":{"line":426,"column":14}},"118":{"start":{"line":415,"column":6},"end":{"line":415,"column":25}},"119":{"start":{"line":417,"column":6},"end":{"line":424,"column":7}},"120":{"start":{"line":419,"column":7},"end":{"line":419,"column":65}},"121":{"start":{"line":420,"column":7},"end":{"line":420,"column":65}},"122":{"start":{"line":423,"column":7},"end":{"line":423,"column":177}},"123":{"start":{"line":425,"column":6},"end":{"line":425,"column":39}},"124":{"start":{"line":428,"column":5},"end":{"line":430,"column":4}},"125":{"start":{"line":434,"column":5},"end":{"line":434,"column":143}},"126":{"start":{"line":436,"column":5},"end":{"line":440,"column":6}},"127":{"start":{"line":437,"column":6},"end":{"line":439,"column":7}},"128":{"start":{"line":438,"column":7},"end":{"line":438,"column":20}},"129":{"start":{"line":442,"column":5},"end":{"line":459,"column":6}},"130":{"start":{"line":444,"column":6},"end":{"line":444,"column":34}},"131":{"start":{"line":445,"column":6},"end":{"line":445,"column":30}},"132":{"start":{"line":446,"column":6},"end":{"line":446,"column":30}},"133":{"start":{"line":447,"column":11},"end":{"line":459,"column":6}},"134":{"start":{"line":449,"column":6},"end":{"line":449,"column":30}},"135":{"start":{"line":450,"column":6},"end":{"line":450,"column":30}},"136":{"start":{"line":451,"column":11},"end":{"line":459,"column":6}},"137":{"start":{"line":453,"column":6},"end":{"line":455,"column":7}},"138":{"start":{"line":454,"column":7},"end":{"line":454,"column":29}},"139":{"start":{"line":458,"column":6},"end":{"line":458,"column":19}},"140":{"start":{"line":461,"column":5},"end":{"line":461,"column":49}},"141":{"start":{"line":462,"column":5},"end":{"line":462,"column":50}},"142":{"start":{"line":465,"column":5},"end":{"line":465,"column":34}},"143":{"start":{"line":466,"column":5},"end":{"line":469,"column":14}},"144":{"start":{"line":467,"column":6},"end":{"line":468,"column":6}},"145":{"start":{"line":468,"column":6},"end":{"line":468,"column":74}},"146":{"start":{"line":471,"column":5},"end":{"line":471,"column":42}},"147":{"start":{"line":472,"column":5},"end":{"line":489,"column":14}},"148":{"start":{"line":473,"column":6},"end":{"line":473,"column":25}},"149":{"start":{"line":474,"column":6},"end":{"line":474,"column":21}},"150":{"start":{"line":475,"column":6},"end":{"line":475,"column":52}},"151":{"start":{"line":476,"column":6},"end":{"line":476,"column":53}},"152":{"start":{"line":477,"column":6},"end":{"line":487,"column":7}},"153":{"start":{"line":478,"column":7},"end":{"line":483,"column":8}},"154":{"start":{"line":479,"column":8},"end":{"line":479,"column":30}},"155":{"start":{"line":480,"column":8},"end":{"line":480,"column":30}},"156":{"start":{"line":482,"column":8},"end":{"line":482,"column":75}},"157":{"start":{"line":486,"column":7},"end":{"line":486,"column":30}},"158":{"start":{"line":488,"column":6},"end":{"line":488,"column":38}},"159":{"start":{"line":491,"column":5},"end":{"line":493,"column":4}},"160":{"start":{"line":496,"column":8},"end":{"line":496,"column":129}},"161":{"start":{"line":498,"column":5},"end":{"line":519,"column":6}},"162":{"start":{"line":499,"column":6},"end":{"line":504,"column":7}},"163":{"start":{"line":500,"column":7},"end":{"line":500,"column":32}},"164":{"start":{"line":503,"column":7},"end":{"line":503,"column":32}},"165":{"start":{"line":506,"column":11},"end":{"line":519,"column":6}},"166":{"start":{"line":507,"column":6},"end":{"line":507,"column":12}},"167":{"start":{"line":508,"column":11},"end":{"line":519,"column":6}},"168":{"start":{"line":509,"column":6},"end":{"line":516,"column":7}},"169":{"start":{"line":510,"column":7},"end":{"line":510,"column":50}},"170":{"start":{"line":511,"column":7},"end":{"line":511,"column":41}},"171":{"start":{"line":514,"column":7},"end":{"line":514,"column":73}},"172":{"start":{"line":515,"column":7},"end":{"line":515,"column":41}},"173":{"start":{"line":518,"column":6},"end":{"line":518,"column":34}},"174":{"start":{"line":522,"column":5},"end":{"line":522,"column":87}},"175":{"start":{"line":524,"column":5},"end":{"line":524,"column":78}},"176":{"start":{"line":525,"column":5},"end":{"line":532,"column":6}},"177":{"start":{"line":526,"column":6},"end":{"line":531,"column":7}},"178":{"start":{"line":527,"column":7},"end":{"line":527,"column":95}},"179":{"start":{"line":529,"column":7},"end":{"line":529,"column":78}},"180":{"start":{"line":530,"column":7},"end":{"line":530,"column":41}},"181":{"start":{"line":542,"column":3},"end":{"line":542,"column":249}},"182":{"start":{"line":544,"column":3},"end":{"line":561,"column":5}},"183":{"start":{"line":563,"column":3},"end":{"line":565,"column":11}},"184":{"start":{"line":564,"column":4},"end":{"line":564,"column":64}},"185":{"start":{"line":567,"column":3},"end":{"line":567,"column":92}},"186":{"start":{"line":569,"column":3},"end":{"line":569,"column":38}},"187":{"start":{"line":571,"column":3},"end":{"line":571,"column":99}},"188":{"start":{"line":572,"column":3},"end":{"line":572,"column":104}},"189":{"start":{"line":574,"column":3},"end":{"line":574,"column":39}},"190":{"start":{"line":576,"column":3},"end":{"line":576,"column":43}},"191":{"start":{"line":587,"column":3},"end":{"line":587,"column":168}},"192":{"start":{"line":595,"column":3},"end":{"line":595,"column":72}},"193":{"start":{"line":598,"column":3},"end":{"line":608,"column":12}},"194":{"start":{"line":599,"column":4},"end":{"line":607,"column":12}},"195":{"start":{"line":600,"column":5},"end":{"line":600,"column":24}},"196":{"start":{"line":602,"column":5},"end":{"line":602,"column":59}},"197":{"start":{"line":603,"column":5},"end":{"line":605,"column":6}},"198":{"start":{"line":604,"column":6},"end":{"line":604,"column":61}},"199":{"start":{"line":606,"column":5},"end":{"line":606,"column":18}},"200":{"start":{"line":611,"column":3},"end":{"line":634,"column":11}},"201":{"start":{"line":612,"column":4},"end":{"line":633,"column":13}},"202":{"start":{"line":613,"column":5},"end":{"line":613,"column":24}},"203":{"start":{"line":614,"column":5},"end":{"line":614,"column":113}},"204":{"start":{"line":616,"column":5},"end":{"line":629,"column":6}},"205":{"start":{"line":617,"column":6},"end":{"line":622,"column":7}},"206":{"start":{"line":618,"column":7},"end":{"line":618,"column":37}},"207":{"start":{"line":619,"column":7},"end":{"line":619,"column":56}},"208":{"start":{"line":620,"column":12},"end":{"line":622,"column":7}},"209":{"start":{"line":621,"column":7},"end":{"line":621,"column":88}},"210":{"start":{"line":623,"column":6},"end":{"line":623,"column":40}},"211":{"start":{"line":626,"column":6},"end":{"line":628,"column":7}},"212":{"start":{"line":627,"column":7},"end":{"line":627,"column":146}},"213":{"start":{"line":631,"column":5},"end":{"line":631,"column":35}},"214":{"start":{"line":632,"column":5},"end":{"line":632,"column":18}},"215":{"start":{"line":637,"column":3},"end":{"line":647,"column":11}},"216":{"start":{"line":638,"column":4},"end":{"line":646,"column":5}},"217":{"start":{"line":640,"column":5},"end":{"line":644,"column":6}},"218":{"start":{"line":641,"column":6},"end":{"line":641,"column":25}},"219":{"start":{"line":642,"column":6},"end":{"line":642,"column":26}},"220":{"start":{"line":643,"column":6},"end":{"line":643,"column":19}},"221":{"start":{"line":645,"column":5},"end":{"line":645,"column":11}},"222":{"start":{"line":649,"column":3},"end":{"line":673,"column":11}},"223":{"start":{"line":650,"column":4},"end":{"line":666,"column":5}},"224":{"start":{"line":653,"column":6},"end":{"line":658,"column":7}},"225":{"start":{"line":655,"column":7},"end":{"line":655,"column":26}},"226":{"start":{"line":657,"column":7},"end":{"line":657,"column":87}},"227":{"start":{"line":661,"column":6},"end":{"line":661,"column":12}},"228":{"start":{"line":664,"column":6},"end":{"line":664,"column":29}},"229":{"start":{"line":665,"column":6},"end":{"line":665,"column":12}},"230":{"start":{"line":668,"column":4},"end":{"line":668,"column":22}},"231":{"start":{"line":669,"column":4},"end":{"line":669,"column":22}},"232":{"start":{"line":670,"column":4},"end":{"line":670,"column":20}},"233":{"start":{"line":671,"column":4},"end":{"line":671,"column":21}},"234":{"start":{"line":672,"column":4},"end":{"line":672,"column":27}},"235":{"start":{"line":677,"column":3},"end":{"line":691,"column":11}},"236":{"start":{"line":679,"column":4},"end":{"line":689,"column":5}},"237":{"start":{"line":681,"column":6},"end":{"line":681,"column":28}},"238":{"start":{"line":682,"column":6},"end":{"line":682,"column":12}},"239":{"start":{"line":684,"column":6},"end":{"line":686,"column":7}},"240":{"start":{"line":685,"column":7},"end":{"line":685,"column":65}},"241":{"start":{"line":688,"column":6},"end":{"line":689,"column":4}},"242":{"start":{"line":694,"column":3},"end":{"line":707,"column":11}},"243":{"start":{"line":695,"column":4},"end":{"line":706,"column":5}},"244":{"start":{"line":696,"column":5},"end":{"line":696,"column":24}},"245":{"start":{"line":698,"column":5},"end":{"line":698,"column":30}},"246":{"start":{"line":699,"column":5},"end":{"line":699,"column":38}},"247":{"start":{"line":701,"column":5},"end":{"line":705,"column":6}},"248":{"start":{"line":702,"column":6},"end":{"line":702,"column":54}},"249":{"start":{"line":703,"column":11},"end":{"line":705,"column":6}},"250":{"start":{"line":704,"column":6},"end":{"line":704,"column":55}},"251":{"start":{"line":710,"column":3},"end":{"line":710,"column":76}},"252":{"start":{"line":711,"column":3},"end":{"line":711,"column":75}},"253":{"start":{"line":713,"column":3},"end":{"line":713,"column":71}},"254":{"start":{"line":716,"column":3},"end":{"line":718,"column":4}},"255":{"start":{"line":717,"column":4},"end":{"line":717,"column":78}},"256":{"start":{"line":726,"column":3},"end":{"line":734,"column":4}},"257":{"start":{"line":728,"column":4},"end":{"line":728,"column":49}},"258":{"start":{"line":729,"column":4},"end":{"line":729,"column":47}},"259":{"start":{"line":731,"column":4},"end":{"line":731,"column":89}},"260":{"start":{"line":732,"column":4},"end":{"line":732,"column":53}},"261":{"start":{"line":744,"column":3},"end":{"line":744,"column":76}},"262":{"start":{"line":746,"column":3},"end":{"line":762,"column":4}},"263":{"start":{"line":748,"column":4},"end":{"line":748,"column":65}},"264":{"start":{"line":749,"column":4},"end":{"line":749,"column":71}},"265":{"start":{"line":751,"column":4},"end":{"line":761,"column":12}},"266":{"start":{"line":752,"column":5},"end":{"line":752,"column":56}},"267":{"start":{"line":754,"column":5},"end":{"line":760,"column":6}},"268":{"start":{"line":755,"column":6},"end":{"line":759,"column":9}},"269":{"start":{"line":756,"column":7},"end":{"line":758,"column":8}},"270":{"start":{"line":757,"column":8},"end":{"line":757,"column":32}},"271":{"start":{"line":771,"column":3},"end":{"line":771,"column":35}},"272":{"start":{"line":772,"column":3},"end":{"line":802,"column":4}},"273":{"start":{"line":773,"column":4},"end":{"line":773,"column":38}},"274":{"start":{"line":774,"column":4},"end":{"line":798,"column":5}},"275":{"start":{"line":776,"column":5},"end":{"line":776,"column":88}},"276":{"start":{"line":782,"column":5},"end":{"line":782,"column":61}},"277":{"start":{"line":783,"column":5},"end":{"line":783,"column":61}},"278":{"start":{"line":785,"column":5},"end":{"line":785,"column":50}},"279":{"start":{"line":786,"column":5},"end":{"line":786,"column":51}},"280":{"start":{"line":789,"column":5},"end":{"line":789,"column":56}},"281":{"start":{"line":793,"column":5},"end":{"line":793,"column":60}},"282":{"start":{"line":794,"column":5},"end":{"line":794,"column":62}},"283":{"start":{"line":796,"column":5},"end":{"line":796,"column":51}},"284":{"start":{"line":797,"column":5},"end":{"line":797,"column":50}},"285":{"start":{"line":811,"column":3},"end":{"line":811,"column":51}},"286":{"start":{"line":813,"column":3},"end":{"line":815,"column":4}},"287":{"start":{"line":814,"column":4},"end":{"line":814,"column":14}},"288":{"start":{"line":817,"column":3},"end":{"line":817,"column":18}},"289":{"start":{"line":827,"column":3},"end":{"line":827,"column":61}},"290":{"start":{"line":828,"column":3},"end":{"line":899,"column":11}},"291":{"start":{"line":830,"column":4},"end":{"line":832,"column":5}},"292":{"start":{"line":831,"column":5},"end":{"line":831,"column":12}},"293":{"start":{"line":834,"column":4},"end":{"line":838,"column":5}},"294":{"start":{"line":835,"column":5},"end":{"line":835,"column":54}},"295":{"start":{"line":836,"column":5},"end":{"line":836,"column":52}},"296":{"start":{"line":837,"column":5},"end":{"line":837,"column":27}},"297":{"start":{"line":840,"column":4},"end":{"line":844,"column":5}},"298":{"start":{"line":841,"column":5},"end":{"line":841,"column":46}},"299":{"start":{"line":842,"column":5},"end":{"line":842,"column":52}},"300":{"start":{"line":843,"column":5},"end":{"line":843,"column":27}},"301":{"start":{"line":848,"column":4},"end":{"line":865,"column":5}},"302":{"start":{"line":849,"column":5},"end":{"line":849,"column":22}},"303":{"start":{"line":850,"column":5},"end":{"line":859,"column":8}},"304":{"start":{"line":851,"column":6},"end":{"line":851,"column":33}},"305":{"start":{"line":852,"column":6},"end":{"line":858,"column":7}},"306":{"start":{"line":854,"column":7},"end":{"line":854,"column":19}},"307":{"start":{"line":857,"column":7},"end":{"line":857,"column":29}},"308":{"start":{"line":861,"column":5},"end":{"line":864,"column":6}},"309":{"start":{"line":862,"column":6},"end":{"line":862,"column":71}},"310":{"start":{"line":863,"column":6},"end":{"line":863,"column":20}},"311":{"start":{"line":867,"column":4},"end":{"line":874,"column":5}},"312":{"start":{"line":868,"column":5},"end":{"line":873,"column":6}},"313":{"start":{"line":869,"column":6},"end":{"line":869,"column":45}},"314":{"start":{"line":870,"column":6},"end":{"line":870,"column":53}},"315":{"start":{"line":871,"column":6},"end":{"line":871,"column":28}},"316":{"start":{"line":877,"column":4},"end":{"line":882,"column":5}},"317":{"start":{"line":878,"column":5},"end":{"line":881,"column":6}},"318":{"start":{"line":879,"column":6},"end":{"line":879,"column":20}},"319":{"start":{"line":885,"column":4},"end":{"line":890,"column":5}},"320":{"start":{"line":886,"column":5},"end":{"line":886,"column":48}},"321":{"start":{"line":887,"column":5},"end":{"line":887,"column":31}},"322":{"start":{"line":888,"column":5},"end":{"line":888,"column":52}},"323":{"start":{"line":889,"column":5},"end":{"line":889,"column":27}},"324":{"start":{"line":893,"column":4},"end":{"line":896,"column":5}},"325":{"start":{"line":894,"column":5},"end":{"line":894,"column":70}},"326":{"start":{"line":895,"column":5},"end":{"line":895,"column":19}},"327":{"start":{"line":910,"column":3},"end":{"line":910,"column":22}},"328":{"start":{"line":912,"column":3},"end":{"line":912,"column":57}},"329":{"start":{"line":915,"column":3},"end":{"line":915,"column":75}},"330":{"start":{"line":918,"column":3},"end":{"line":918,"column":54}},"331":{"start":{"line":921,"column":3},"end":{"line":921,"column":65}},"332":{"start":{"line":924,"column":3},"end":{"line":924,"column":68}},"333":{"start":{"line":927,"column":3},"end":{"line":927,"column":92}},"334":{"start":{"line":930,"column":3},"end":{"line":930,"column":56}},"335":{"start":{"line":932,"column":3},"end":{"line":932,"column":22}},"336":{"start":{"line":943,"column":3},"end":{"line":943,"column":24}},"337":{"start":{"line":944,"column":3},"end":{"line":944,"column":87}},"338":{"start":{"line":946,"column":3},"end":{"line":946,"column":64}},"339":{"start":{"line":948,"column":3},"end":{"line":950,"column":4}},"340":{"start":{"line":949,"column":4},"end":{"line":949,"column":69}},"341":{"start":{"line":952,"column":3},"end":{"line":952,"column":22}},"342":{"start":{"line":962,"column":3},"end":{"line":964,"column":4}},"343":{"start":{"line":963,"column":4},"end":{"line":963,"column":55}},"344":{"start":{"line":966,"column":3},"end":{"line":966,"column":55}},"345":{"start":{"line":978,"column":3},"end":{"line":980,"column":4}},"346":{"start":{"line":979,"column":4},"end":{"line":979,"column":55}},"347":{"start":{"line":982,"column":3},"end":{"line":982,"column":28}},"348":{"start":{"line":992,"column":1},"end":{"line":992,"column":23}},"349":{"start":{"line":1003,"column":1},"end":{"line":1005,"column":2}},"350":{"start":{"line":1004,"column":2},"end":{"line":1004,"column":66}},"351":{"start":{"line":1007,"column":1},"end":{"line":1007,"column":46}},"352":{"start":{"line":1008,"column":1},"end":{"line":1095,"column":3}},"353":{"start":{"line":1060,"column":4},"end":{"line":1060,"column":63}},"354":{"start":{"line":1061,"column":4},"end":{"line":1061,"column":61}},"355":{"start":{"line":1063,"column":4},"end":{"line":1063,"column":26}},"356":{"start":{"line":1074,"column":4},"end":{"line":1074,"column":67}},"357":{"start":{"line":1075,"column":4},"end":{"line":1075,"column":65}},"358":{"start":{"line":1077,"column":4},"end":{"line":1077,"column":28}},"359":{"start":{"line":1097,"column":1},"end":{"line":1532,"column":4}},"360":{"start":{"line":1107,"column":3},"end":{"line":1107,"column":137}},"361":{"start":{"line":1111,"column":3},"end":{"line":1118,"column":4}},"362":{"start":{"line":1113,"column":9},"end":{"line":1118,"column":4}},"363":{"start":{"line":1114,"column":4},"end":{"line":1114,"column":41}},"364":{"start":{"line":1115,"column":4},"end":{"line":1115,"column":32}},"365":{"start":{"line":1117,"column":4},"end":{"line":1117,"column":11}},"366":{"start":{"line":1121,"column":3},"end":{"line":1121,"column":32}},"367":{"start":{"line":1122,"column":3},"end":{"line":1122,"column":32}},"368":{"start":{"line":1123,"column":3},"end":{"line":1123,"column":35}},"369":{"start":{"line":1125,"column":3},"end":{"line":1125,"column":54}},"370":{"start":{"line":1126,"column":3},"end":{"line":1126,"column":25}},"371":{"start":{"line":1130,"column":3},"end":{"line":1130,"column":37}},"372":{"start":{"line":1133,"column":3},"end":{"line":1135,"column":4}},"373":{"start":{"line":1134,"column":4},"end":{"line":1134,"column":86}},"374":{"start":{"line":1136,"column":3},"end":{"line":1136,"column":49}},"375":{"start":{"line":1139,"column":3},"end":{"line":1139,"column":98}},"376":{"start":{"line":1142,"column":3},"end":{"line":1142,"column":73}},"377":{"start":{"line":1145,"column":3},"end":{"line":1145,"column":64}},"378":{"start":{"line":1148,"column":3},"end":{"line":1148,"column":77}},"379":{"start":{"line":1149,"column":3},"end":{"line":1149,"column":72}},"380":{"start":{"line":1152,"column":3},"end":{"line":1152,"column":92}},"381":{"start":{"line":1153,"column":3},"end":{"line":1153,"column":39}},"382":{"start":{"line":1154,"column":3},"end":{"line":1154,"column":39}},"383":{"start":{"line":1156,"column":3},"end":{"line":1205,"column":4}},"384":{"start":{"line":1158,"column":4},"end":{"line":1158,"column":144}},"385":{"start":{"line":1160,"column":4},"end":{"line":1165,"column":13}},"386":{"start":{"line":1161,"column":5},"end":{"line":1161,"column":52}},"387":{"start":{"line":1162,"column":5},"end":{"line":1162,"column":27}},"388":{"start":{"line":1163,"column":5},"end":{"line":1163,"column":23}},"389":{"start":{"line":1166,"column":4},"end":{"line":1176,"column":13}},"390":{"start":{"line":1168,"column":5},"end":{"line":1168,"column":51}},"391":{"start":{"line":1169,"column":5},"end":{"line":1173,"column":6}},"392":{"start":{"line":1170,"column":6},"end":{"line":1170,"column":29}},"393":{"start":{"line":1172,"column":6},"end":{"line":1172,"column":25}},"394":{"start":{"line":1174,"column":5},"end":{"line":1174,"column":23}},"395":{"start":{"line":1177,"column":4},"end":{"line":1177,"column":36}},"396":{"start":{"line":1180,"column":4},"end":{"line":1180,"column":87}},"397":{"start":{"line":1181,"column":4},"end":{"line":1183,"column":13}},"398":{"start":{"line":1182,"column":5},"end":{"line":1182,"column":22}},"399":{"start":{"line":1184,"column":4},"end":{"line":1184,"column":35}},"400":{"start":{"line":1187,"column":4},"end":{"line":1187,"column":89}},"401":{"start":{"line":1188,"column":4},"end":{"line":1191,"column":13}},"402":{"start":{"line":1189,"column":5},"end":{"line":1189,"column":44}},"403":{"start":{"line":1190,"column":5},"end":{"line":1190,"column":24}},"404":{"start":{"line":1192,"column":4},"end":{"line":1192,"column":36}},"405":{"start":{"line":1194,"column":4},"end":{"line":1204,"column":5}},"406":{"start":{"line":1195,"column":5},"end":{"line":1195,"column":101}},"407":{"start":{"line":1196,"column":5},"end":{"line":1202,"column":14}},"408":{"start":{"line":1197,"column":6},"end":{"line":1197,"column":52}},"409":{"start":{"line":1198,"column":6},"end":{"line":1198,"column":63}},"410":{"start":{"line":1199,"column":6},"end":{"line":1201,"column":7}},"411":{"start":{"line":1200,"column":7},"end":{"line":1200,"column":32}},"412":{"start":{"line":1203,"column":5},"end":{"line":1203,"column":34}},"413":{"start":{"line":1208,"column":3},"end":{"line":1225,"column":4}},"414":{"start":{"line":1210,"column":4},"end":{"line":1216,"column":7}},"415":{"start":{"line":1218,"column":4},"end":{"line":1224,"column":13}},"416":{"start":{"line":1219,"column":5},"end":{"line":1219,"column":48}},"417":{"start":{"line":1220,"column":5},"end":{"line":1220,"column":69}},"418":{"start":{"line":1221,"column":5},"end":{"line":1221,"column":28}},"419":{"start":{"line":1223,"column":5},"end":{"line":1223,"column":57}},"420":{"start":{"line":1228,"column":3},"end":{"line":1244,"column":4}},"421":{"start":{"line":1229,"column":4},"end":{"line":1229,"column":43}},"422":{"start":{"line":1230,"column":4},"end":{"line":1230,"column":60}},"423":{"start":{"line":1231,"column":4},"end":{"line":1231,"column":59}},"424":{"start":{"line":1234,"column":4},"end":{"line":1238,"column":5}},"425":{"start":{"line":1235,"column":5},"end":{"line":1235,"column":49}},"426":{"start":{"line":1237,"column":5},"end":{"line":1237,"column":103}},"427":{"start":{"line":1241,"column":4},"end":{"line":1241,"column":54}},"428":{"start":{"line":1242,"column":4},"end":{"line":1242,"column":59}},"429":{"start":{"line":1243,"column":4},"end":{"line":1243,"column":61}},"430":{"start":{"line":1247,"column":3},"end":{"line":1247,"column":67}},"431":{"start":{"line":1250,"column":3},"end":{"line":1250,"column":56}},"432":{"start":{"line":1259,"column":3},"end":{"line":1261,"column":4}},"433":{"start":{"line":1260,"column":4},"end":{"line":1260,"column":17}},"434":{"start":{"line":1262,"column":3},"end":{"line":1262,"column":15}},"435":{"start":{"line":1272,"column":3},"end":{"line":1272,"column":22}},"436":{"start":{"line":1275,"column":3},"end":{"line":1275,"column":42}},"437":{"start":{"line":1276,"column":3},"end":{"line":1276,"column":34}},"438":{"start":{"line":1277,"column":3},"end":{"line":1277,"column":59}},"439":{"start":{"line":1279,"column":3},"end":{"line":1279,"column":39}},"440":{"start":{"line":1280,"column":3},"end":{"line":1291,"column":4}},"441":{"start":{"line":1281,"column":4},"end":{"line":1281,"column":31}},"442":{"start":{"line":1283,"column":4},"end":{"line":1290,"column":5}},"443":{"start":{"line":1284,"column":5},"end":{"line":1284,"column":35}},"444":{"start":{"line":1286,"column":5},"end":{"line":1288,"column":13}},"445":{"start":{"line":1287,"column":6},"end":{"line":1287,"column":51}},"446":{"start":{"line":1289,"column":5},"end":{"line":1289,"column":32}},"447":{"start":{"line":1293,"column":3},"end":{"line":1293,"column":25}},"448":{"start":{"line":1294,"column":3},"end":{"line":1294,"column":24}},"449":{"start":{"line":1303,"column":3},"end":{"line":1303,"column":40}},"450":{"start":{"line":1305,"column":3},"end":{"line":1305,"column":61}},"451":{"start":{"line":1306,"column":3},"end":{"line":1306,"column":63}},"452":{"start":{"line":1307,"column":3},"end":{"line":1307,"column":104}},"453":{"start":{"line":1309,"column":3},"end":{"line":1309,"column":21}},"454":{"start":{"line":1323,"column":3},"end":{"line":1326,"column":28}},"455":{"start":{"line":1329,"column":3},"end":{"line":1329,"column":27}},"456":{"start":{"line":1334,"column":3},"end":{"line":1334,"column":71}},"457":{"start":{"line":1336,"column":3},"end":{"line":1336,"column":39}},"458":{"start":{"line":1337,"column":3},"end":{"line":1337,"column":41}},"459":{"start":{"line":1340,"column":3},"end":{"line":1340,"column":54}},"460":{"start":{"line":1341,"column":3},"end":{"line":1341,"column":52}},"461":{"start":{"line":1344,"column":3},"end":{"line":1344,"column":48}},"462":{"start":{"line":1345,"column":3},"end":{"line":1345,"column":50}},"463":{"start":{"line":1348,"column":3},"end":{"line":1348,"column":94}},"464":{"start":{"line":1351,"column":3},"end":{"line":1351,"column":72}},"465":{"start":{"line":1354,"column":3},"end":{"line":1354,"column":23}},"466":{"start":{"line":1363,"column":3},"end":{"line":1363,"column":40}},"467":{"start":{"line":1364,"column":3},"end":{"line":1364,"column":77}},"468":{"start":{"line":1366,"column":3},"end":{"line":1383,"column":4}},"469":{"start":{"line":1368,"column":4},"end":{"line":1380,"column":5}},"470":{"start":{"line":1373,"column":5},"end":{"line":1379,"column":6}},"471":{"start":{"line":1374,"column":6},"end":{"line":1374,"column":48}},"472":{"start":{"line":1375,"column":6},"end":{"line":1375,"column":69}},"473":{"start":{"line":1384,"column":3},"end":{"line":1384,"column":24}},"474":{"start":{"line":1391,"column":3},"end":{"line":1392,"column":28}},"475":{"start":{"line":1395,"column":3},"end":{"line":1395,"column":66}},"476":{"start":{"line":1396,"column":3},"end":{"line":1396,"column":68}},"477":{"start":{"line":1399,"column":3},"end":{"line":1403,"column":4}},"478":{"start":{"line":1400,"column":4},"end":{"line":1400,"column":89}},"479":{"start":{"line":1402,"column":4},"end":{"line":1402,"column":22}},"480":{"start":{"line":1406,"column":3},"end":{"line":1410,"column":4}},"481":{"start":{"line":1407,"column":4},"end":{"line":1407,"column":92}},"482":{"start":{"line":1409,"column":4},"end":{"line":1409,"column":23}},"483":{"start":{"line":1413,"column":3},"end":{"line":1413,"column":44}},"484":{"start":{"line":1415,"column":3},"end":{"line":1415,"column":40}},"485":{"start":{"line":1415,"column":18},"end":{"line":1415,"column":38}},"486":{"start":{"line":1417,"column":3},"end":{"line":1425,"column":6}},"487":{"start":{"line":1427,"column":3},"end":{"line":1433,"column":12}},"488":{"start":{"line":1428,"column":4},"end":{"line":1428,"column":67}},"489":{"start":{"line":1429,"column":4},"end":{"line":1429,"column":69}},"490":{"start":{"line":1432,"column":4},"end":{"line":1432,"column":24}},"491":{"start":{"line":1441,"column":3},"end":{"line":1441,"column":43}},"492":{"start":{"line":1442,"column":3},"end":{"line":1442,"column":44}},"493":{"start":{"line":1445,"column":3},"end":{"line":1445,"column":22}},"494":{"start":{"line":1448,"column":3},"end":{"line":1448,"column":98}},"495":{"start":{"line":1458,"column":3},"end":{"line":1458,"column":44}},"496":{"start":{"line":1459,"column":3},"end":{"line":1459,"column":18}},"497":{"start":{"line":1460,"column":3},"end":{"line":1462,"column":4}},"498":{"start":{"line":1461,"column":4},"end":{"line":1461,"column":37}},"499":{"start":{"line":1463,"column":3},"end":{"line":1463,"column":66}},"500":{"start":{"line":1471,"column":3},"end":{"line":1478,"column":4}},"501":{"start":{"line":1472,"column":4},"end":{"line":1472,"column":51}},"502":{"start":{"line":1473,"column":4},"end":{"line":1473,"column":68}},"503":{"start":{"line":1473,"column":53},"end":{"line":1473,"column":65}},"504":{"start":{"line":1475,"column":4},"end":{"line":1475,"column":41}},"505":{"start":{"line":1477,"column":4},"end":{"line":1477,"column":17}},"506":{"start":{"line":1486,"column":3},"end":{"line":1486,"column":51}},"507":{"start":{"line":1488,"column":3},"end":{"line":1488,"column":170}},"508":{"start":{"line":1496,"column":3},"end":{"line":1496,"column":68}},"509":{"start":{"line":1503,"column":3},"end":{"line":1503,"column":51}},"510":{"start":{"line":1504,"column":3},"end":{"line":1504,"column":38}},"511":{"start":{"line":1505,"column":3},"end":{"line":1505,"column":45}},"512":{"start":{"line":1506,"column":3},"end":{"line":1506,"column":110}},"513":{"start":{"line":1508,"column":3},"end":{"line":1508,"column":23}},"514":{"start":{"line":1514,"column":3},"end":{"line":1514,"column":29}},"515":{"start":{"line":1515,"column":3},"end":{"line":1529,"column":4}},"516":{"start":{"line":1516,"column":4},"end":{"line":1516,"column":39}},"517":{"start":{"line":1518,"column":4},"end":{"line":1520,"column":13}},"518":{"start":{"line":1519,"column":5},"end":{"line":1519,"column":37}},"519":{"start":{"line":1521,"column":4},"end":{"line":1523,"column":13}},"520":{"start":{"line":1522,"column":5},"end":{"line":1522,"column":37}},"521":{"start":{"line":1524,"column":4},"end":{"line":1526,"column":13}},"522":{"start":{"line":1525,"column":5},"end":{"line":1525,"column":40}},"523":{"start":{"line":1528,"column":4},"end":{"line":1528,"column":74}},"524":{"start":{"line":1534,"column":1},"end":{"line":1534,"column":41}},"525":{"start":{"line":1542,"column":1},"end":{"line":1670,"column":0}},"526":{"start":{"line":1561,"column":3},"end":{"line":1561,"column":18}},"527":{"start":{"line":1562,"column":3},"end":{"line":1568,"column":4}},"528":{"start":{"line":1563,"column":4},"end":{"line":1563,"column":14}},"529":{"start":{"line":1564,"column":9},"end":{"line":1568,"column":4}},"530":{"start":{"line":1565,"column":4},"end":{"line":1565,"column":35}},"531":{"start":{"line":1567,"column":4},"end":{"line":1567,"column":22}},"532":{"start":{"line":1569,"column":3},"end":{"line":1569,"column":29}},"533":{"start":{"line":1577,"column":3},"end":{"line":1577,"column":27}},"534":{"start":{"line":1579,"column":3},"end":{"line":1581,"column":4}},"535":{"start":{"line":1580,"column":4},"end":{"line":1580,"column":11}},"536":{"start":{"line":1584,"column":3},"end":{"line":1654,"column":4}},"537":{"start":{"line":1586,"column":4},"end":{"line":1586,"column":146}},"538":{"start":{"line":1587,"column":4},"end":{"line":1632,"column":5}},"539":{"start":{"line":1588,"column":5},"end":{"line":1588,"column":48}},"540":{"start":{"line":1593,"column":5},"end":{"line":1593,"column":38}},"541":{"start":{"line":1594,"column":5},"end":{"line":1594,"column":33}},"542":{"start":{"line":1595,"column":5},"end":{"line":1597,"column":6}},"543":{"start":{"line":1596,"column":7},"end":{"line":1596,"column":77}},"544":{"start":{"line":1598,"column":5},"end":{"line":1598,"column":21}},"545":{"start":{"line":1607,"column":5},"end":{"line":1607,"column":40}},"546":{"start":{"line":1608,"column":5},"end":{"line":1616,"column":6}},"547":{"start":{"line":1609,"column":6},"end":{"line":1609,"column":22}},"548":{"start":{"line":1610,"column":11},"end":{"line":1616,"column":6}},"549":{"start":{"line":1612,"column":6},"end":{"line":1612,"column":44}},"550":{"start":{"line":1614,"column":6},"end":{"line":1614,"column":22}},"551":{"start":{"line":1615,"column":6},"end":{"line":1615,"column":44}},"552":{"start":{"line":1618,"column":5},"end":{"line":1618,"column":41}},"553":{"start":{"line":1621,"column":5},"end":{"line":1623,"column":6}},"554":{"start":{"line":1622,"column":6},"end":{"line":1622,"column":31}},"555":{"start":{"line":1625,"column":5},"end":{"line":1625,"column":34}},"556":{"start":{"line":1626,"column":10},"end":{"line":1632,"column":5}},"557":{"start":{"line":1628,"column":5},"end":{"line":1629,"column":37}},"558":{"start":{"line":1629,"column":6},"end":{"line":1629,"column":37}},"559":{"start":{"line":1630,"column":10},"end":{"line":1632,"column":5}},"560":{"start":{"line":1631,"column":5},"end":{"line":1631,"column":78}},"561":{"start":{"line":1635,"column":4},"end":{"line":1650,"column":5}},"562":{"start":{"line":1636,"column":5},"end":{"line":1636,"column":48}},"563":{"start":{"line":1639,"column":5},"end":{"line":1649,"column":6}},"564":{"start":{"line":1640,"column":6},"end":{"line":1648,"column":7}},"565":{"start":{"line":1641,"column":7},"end":{"line":1641,"column":41}},"566":{"start":{"line":1642,"column":12},"end":{"line":1648,"column":7}},"567":{"start":{"line":1644,"column":7},"end":{"line":1644,"column":43}},"568":{"start":{"line":1646,"column":7},"end":{"line":1646,"column":46}},"569":{"start":{"line":1647,"column":7},"end":{"line":1647,"column":54}},"570":{"start":{"line":1653,"column":4},"end":{"line":1653,"column":28}},"571":{"start":{"line":1662,"column":3},"end":{"line":1662,"column":23}},"572":{"start":{"line":1663,"column":3},"end":{"line":1665,"column":4}},"573":{"start":{"line":1664,"column":4},"end":{"line":1664,"column":42}},"574":{"start":{"line":1666,"column":3},"end":{"line":1666,"column":21}}},"branchMap":{"1":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":3},"end":{"line":146,"column":3}},{"start":{"line":146,"column":3},"end":{"line":146,"column":3}}]},"2":{"line":148,"type":"if","locations":[{"start":{"line":148,"column":4},"end":{"line":148,"column":4}},{"start":{"line":148,"column":4},"end":{"line":148,"column":4}}]},"3":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":4},"end":{"line":168,"column":4}},{"start":{"line":168,"column":4},"end":{"line":168,"column":4}}]},"4":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":4},"end":{"line":176,"column":4}},{"start":{"line":176,"column":4},"end":{"line":176,"column":4}}]},"5":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":5},"end":{"line":269,"column":5}},{"start":{"line":269,"column":5},"end":{"line":269,"column":5}}]},"6":{"line":269,"type":"binary-expr","locations":[{"start":{"line":269,"column":8},"end":{"line":269,"column":17}},{"start":{"line":269,"column":21},"end":{"line":269,"column":69}}]},"7":{"line":270,"type":"if","locations":[{"start":{"line":270,"column":6},"end":{"line":270,"column":6}},{"start":{"line":270,"column":6},"end":{"line":270,"column":6}}]},"8":{"line":276,"type":"if","locations":[{"start":{"line":276,"column":11},"end":{"line":276,"column":11}},{"start":{"line":276,"column":11},"end":{"line":276,"column":11}}]},"9":{"line":276,"type":"binary-expr","locations":[{"start":{"line":276,"column":14},"end":{"line":276,"column":23}},{"start":{"line":276,"column":27},"end":{"line":276,"column":73}}]},"10":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":11},"end":{"line":279,"column":11}},{"start":{"line":279,"column":11},"end":{"line":279,"column":11}}]},"11":{"line":280,"type":"if","locations":[{"start":{"line":280,"column":6},"end":{"line":280,"column":6}},{"start":{"line":280,"column":6},"end":{"line":280,"column":6}}]},"12":{"line":285,"type":"if","locations":[{"start":{"line":285,"column":7},"end":{"line":285,"column":7}},{"start":{"line":285,"column":7},"end":{"line":285,"column":7}}]},"13":{"line":302,"type":"if","locations":[{"start":{"line":302,"column":5},"end":{"line":302,"column":5}},{"start":{"line":302,"column":5},"end":{"line":302,"column":5}}]},"14":{"line":302,"type":"binary-expr","locations":[{"start":{"line":302,"column":8},"end":{"line":302,"column":17}},{"start":{"line":302,"column":21},"end":{"line":302,"column":65}}]},"15":{"line":303,"type":"if","locations":[{"start":{"line":303,"column":6},"end":{"line":303,"column":6}},{"start":{"line":303,"column":6},"end":{"line":303,"column":6}}]},"16":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":11},"end":{"line":309,"column":11}},{"start":{"line":309,"column":11},"end":{"line":309,"column":11}}]},"17":{"line":309,"type":"binary-expr","locations":[{"start":{"line":309,"column":14},"end":{"line":309,"column":23}},{"start":{"line":309,"column":27},"end":{"line":309,"column":73}}]},"18":{"line":312,"type":"if","locations":[{"start":{"line":312,"column":11},"end":{"line":312,"column":11}},{"start":{"line":312,"column":11},"end":{"line":312,"column":11}}]},"19":{"line":313,"type":"if","locations":[{"start":{"line":313,"column":6},"end":{"line":313,"column":6}},{"start":{"line":313,"column":6},"end":{"line":313,"column":6}}]},"20":{"line":318,"type":"if","locations":[{"start":{"line":318,"column":7},"end":{"line":318,"column":7}},{"start":{"line":318,"column":7},"end":{"line":318,"column":7}}]},"21":{"line":335,"type":"if","locations":[{"start":{"line":335,"column":5},"end":{"line":335,"column":5}},{"start":{"line":335,"column":5},"end":{"line":335,"column":5}}]},"22":{"line":335,"type":"binary-expr","locations":[{"start":{"line":335,"column":8},"end":{"line":335,"column":17}},{"start":{"line":335,"column":21},"end":{"line":335,"column":42}}]},"23":{"line":337,"type":"if","locations":[{"start":{"line":337,"column":11},"end":{"line":337,"column":11}},{"start":{"line":337,"column":11},"end":{"line":337,"column":11}}]},"24":{"line":337,"type":"binary-expr","locations":[{"start":{"line":337,"column":14},"end":{"line":337,"column":18}},{"start":{"line":337,"column":22},"end":{"line":337,"column":41}}]},"25":{"line":339,"type":"if","locations":[{"start":{"line":339,"column":11},"end":{"line":339,"column":11}},{"start":{"line":339,"column":11},"end":{"line":339,"column":11}}]},"26":{"line":339,"type":"binary-expr","locations":[{"start":{"line":339,"column":14},"end":{"line":339,"column":23}},{"start":{"line":339,"column":27},"end":{"line":339,"column":70}}]},"27":{"line":344,"type":"if","locations":[{"start":{"line":344,"column":5},"end":{"line":344,"column":5}},{"start":{"line":344,"column":5},"end":{"line":344,"column":5}}]},"28":{"line":354,"type":"if","locations":[{"start":{"line":354,"column":5},"end":{"line":354,"column":5}},{"start":{"line":354,"column":5},"end":{"line":354,"column":5}}]},"29":{"line":354,"type":"binary-expr","locations":[{"start":{"line":354,"column":8},"end":{"line":354,"column":12}},{"start":{"line":354,"column":16},"end":{"line":354,"column":46}}]},"30":{"line":355,"type":"if","locations":[{"start":{"line":355,"column":6},"end":{"line":355,"column":6}},{"start":{"line":355,"column":6},"end":{"line":355,"column":6}}]},"31":{"line":360,"type":"if","locations":[{"start":{"line":360,"column":5},"end":{"line":360,"column":5}},{"start":{"line":360,"column":5},"end":{"line":360,"column":5}}]},"32":{"line":360,"type":"binary-expr","locations":[{"start":{"line":360,"column":8},"end":{"line":360,"column":17}},{"start":{"line":360,"column":21},"end":{"line":360,"column":41}},{"start":{"line":360,"column":45},"end":{"line":360,"column":90}}]},"33":{"line":364,"type":"if","locations":[{"start":{"line":364,"column":11},"end":{"line":364,"column":11}},{"start":{"line":364,"column":11},"end":{"line":364,"column":11}}]},"34":{"line":364,"type":"binary-expr","locations":[{"start":{"line":364,"column":14},"end":{"line":364,"column":18}},{"start":{"line":364,"column":22},"end":{"line":364,"column":51}}]},"35":{"line":367,"type":"if","locations":[{"start":{"line":367,"column":11},"end":{"line":367,"column":11}},{"start":{"line":367,"column":11},"end":{"line":367,"column":11}}]},"36":{"line":368,"type":"if","locations":[{"start":{"line":368,"column":6},"end":{"line":368,"column":6}},{"start":{"line":368,"column":6},"end":{"line":368,"column":6}}]},"37":{"line":382,"type":"if","locations":[{"start":{"line":382,"column":5},"end":{"line":382,"column":5}},{"start":{"line":382,"column":5},"end":{"line":382,"column":5}}]},"38":{"line":401,"type":"if","locations":[{"start":{"line":401,"column":6},"end":{"line":401,"column":6}},{"start":{"line":401,"column":6},"end":{"line":401,"column":6}}]},"39":{"line":401,"type":"binary-expr","locations":[{"start":{"line":401,"column":9},"end":{"line":401,"column":13}},{"start":{"line":401,"column":17},"end":{"line":401,"column":34}}]},"40":{"line":417,"type":"if","locations":[{"start":{"line":417,"column":6},"end":{"line":417,"column":6}},{"start":{"line":417,"column":6},"end":{"line":417,"column":6}}]},"41":{"line":436,"type":"if","locations":[{"start":{"line":436,"column":5},"end":{"line":436,"column":5}},{"start":{"line":436,"column":5},"end":{"line":436,"column":5}}]},"42":{"line":436,"type":"binary-expr","locations":[{"start":{"line":436,"column":8},"end":{"line":436,"column":12}},{"start":{"line":436,"column":16},"end":{"line":436,"column":46}}]},"43":{"line":437,"type":"if","locations":[{"start":{"line":437,"column":6},"end":{"line":437,"column":6}},{"start":{"line":437,"column":6},"end":{"line":437,"column":6}}]},"44":{"line":442,"type":"if","locations":[{"start":{"line":442,"column":5},"end":{"line":442,"column":5}},{"start":{"line":442,"column":5},"end":{"line":442,"column":5}}]},"45":{"line":442,"type":"binary-expr","locations":[{"start":{"line":442,"column":8},"end":{"line":442,"column":17}},{"start":{"line":442,"column":21},"end":{"line":442,"column":41}},{"start":{"line":442,"column":45},"end":{"line":442,"column":88}}]},"46":{"line":447,"type":"if","locations":[{"start":{"line":447,"column":11},"end":{"line":447,"column":11}},{"start":{"line":447,"column":11},"end":{"line":447,"column":11}}]},"47":{"line":447,"type":"binary-expr","locations":[{"start":{"line":447,"column":14},"end":{"line":447,"column":18}},{"start":{"line":447,"column":22},"end":{"line":447,"column":49}}]},"48":{"line":451,"type":"if","locations":[{"start":{"line":451,"column":11},"end":{"line":451,"column":11}},{"start":{"line":451,"column":11},"end":{"line":451,"column":11}}]},"49":{"line":453,"type":"if","locations":[{"start":{"line":453,"column":6},"end":{"line":453,"column":6}},{"start":{"line":453,"column":6},"end":{"line":453,"column":6}}]},"50":{"line":477,"type":"if","locations":[{"start":{"line":477,"column":6},"end":{"line":477,"column":6}},{"start":{"line":477,"column":6},"end":{"line":477,"column":6}}]},"51":{"line":477,"type":"binary-expr","locations":[{"start":{"line":477,"column":9},"end":{"line":477,"column":24}},{"start":{"line":477,"column":28},"end":{"line":477,"column":46}}]},"52":{"line":478,"type":"if","locations":[{"start":{"line":478,"column":7},"end":{"line":478,"column":7}},{"start":{"line":478,"column":7},"end":{"line":478,"column":7}}]},"53":{"line":498,"type":"if","locations":[{"start":{"line":498,"column":5},"end":{"line":498,"column":5}},{"start":{"line":498,"column":5},"end":{"line":498,"column":5}}]},"54":{"line":498,"type":"binary-expr","locations":[{"start":{"line":498,"column":8},"end":{"line":498,"column":17}},{"start":{"line":498,"column":21},"end":{"line":498,"column":73}}]},"55":{"line":499,"type":"if","locations":[{"start":{"line":499,"column":6},"end":{"line":499,"column":6}},{"start":{"line":499,"column":6},"end":{"line":499,"column":6}}]},"56":{"line":506,"type":"if","locations":[{"start":{"line":506,"column":11},"end":{"line":506,"column":11}},{"start":{"line":506,"column":11},"end":{"line":506,"column":11}}]},"57":{"line":506,"type":"binary-expr","locations":[{"start":{"line":506,"column":14},"end":{"line":506,"column":23}},{"start":{"line":506,"column":27},"end":{"line":506,"column":73}}]},"58":{"line":508,"type":"if","locations":[{"start":{"line":508,"column":11},"end":{"line":508,"column":11}},{"start":{"line":508,"column":11},"end":{"line":508,"column":11}}]},"59":{"line":509,"type":"if","locations":[{"start":{"line":509,"column":6},"end":{"line":509,"column":6}},{"start":{"line":509,"column":6},"end":{"line":509,"column":6}}]},"60":{"line":525,"type":"if","locations":[{"start":{"line":525,"column":5},"end":{"line":525,"column":5}},{"start":{"line":525,"column":5},"end":{"line":525,"column":5}}]},"61":{"line":525,"type":"binary-expr","locations":[{"start":{"line":525,"column":8},"end":{"line":525,"column":14}},{"start":{"line":525,"column":18},"end":{"line":525,"column":38}}]},"62":{"line":526,"type":"if","locations":[{"start":{"line":526,"column":6},"end":{"line":526,"column":6}},{"start":{"line":526,"column":6},"end":{"line":526,"column":6}}]},"63":{"line":587,"type":"cond-expr","locations":[{"start":{"line":587,"column":80},"end":{"line":587,"column":88}},{"start":{"line":587,"column":91},"end":{"line":587,"column":97}}]},"64":{"line":603,"type":"if","locations":[{"start":{"line":603,"column":5},"end":{"line":603,"column":5}},{"start":{"line":603,"column":5},"end":{"line":603,"column":5}}]},"65":{"line":616,"type":"if","locations":[{"start":{"line":616,"column":5},"end":{"line":616,"column":5}},{"start":{"line":616,"column":5},"end":{"line":616,"column":5}}]},"66":{"line":616,"type":"binary-expr","locations":[{"start":{"line":616,"column":8},"end":{"line":616,"column":17}},{"start":{"line":616,"column":21},"end":{"line":616,"column":43}}]},"67":{"line":617,"type":"if","locations":[{"start":{"line":617,"column":6},"end":{"line":617,"column":6}},{"start":{"line":617,"column":6},"end":{"line":617,"column":6}}]},"68":{"line":620,"type":"if","locations":[{"start":{"line":620,"column":12},"end":{"line":620,"column":12}},{"start":{"line":620,"column":12},"end":{"line":620,"column":12}}]},"69":{"line":626,"type":"if","locations":[{"start":{"line":626,"column":6},"end":{"line":626,"column":6}},{"start":{"line":626,"column":6},"end":{"line":626,"column":6}}]},"70":{"line":638,"type":"switch","locations":[{"start":{"line":639,"column":5},"end":{"line":645,"column":11}}]},"71":{"line":640,"type":"if","locations":[{"start":{"line":640,"column":5},"end":{"line":640,"column":5}},{"start":{"line":640,"column":5},"end":{"line":640,"column":5}}]},"72":{"line":650,"type":"switch","locations":[{"start":{"line":652,"column":5},"end":{"line":661,"column":12}},{"start":{"line":662,"column":5},"end":{"line":662,"column":18}},{"start":{"line":663,"column":5},"end":{"line":665,"column":12}}]},"73":{"line":653,"type":"if","locations":[{"start":{"line":653,"column":6},"end":{"line":653,"column":6}},{"start":{"line":653,"column":6},"end":{"line":653,"column":6}}]},"74":{"line":653,"type":"binary-expr","locations":[{"start":{"line":653,"column":10},"end":{"line":653,"column":55}},{"start":{"line":653,"column":59},"end":{"line":653,"column":83}}]},"75":{"line":679,"type":"switch","locations":[{"start":{"line":680,"column":5},"end":{"line":682,"column":12}},{"start":{"line":683,"column":5},"end":{"line":686,"column":7}},{"start":{"line":687,"column":5},"end":{"line":689,"column":4}}]},"76":{"line":684,"type":"if","locations":[{"start":{"line":684,"column":6},"end":{"line":684,"column":6}},{"start":{"line":684,"column":6},"end":{"line":684,"column":6}}]},"77":{"line":695,"type":"if","locations":[{"start":{"line":695,"column":4},"end":{"line":695,"column":4}},{"start":{"line":695,"column":4},"end":{"line":695,"column":4}}]},"78":{"line":701,"type":"if","locations":[{"start":{"line":701,"column":5},"end":{"line":701,"column":5}},{"start":{"line":701,"column":5},"end":{"line":701,"column":5}}]},"79":{"line":703,"type":"if","locations":[{"start":{"line":703,"column":11},"end":{"line":703,"column":11}},{"start":{"line":703,"column":11},"end":{"line":703,"column":11}}]},"80":{"line":716,"type":"if","locations":[{"start":{"line":716,"column":3},"end":{"line":716,"column":3}},{"start":{"line":716,"column":3},"end":{"line":716,"column":3}}]},"81":{"line":716,"type":"binary-expr","locations":[{"start":{"line":716,"column":6},"end":{"line":716,"column":24}},{"start":{"line":716,"column":28},"end":{"line":716,"column":66}}]},"82":{"line":726,"type":"if","locations":[{"start":{"line":726,"column":3},"end":{"line":726,"column":3}},{"start":{"line":726,"column":3},"end":{"line":726,"column":3}}]},"83":{"line":746,"type":"if","locations":[{"start":{"line":746,"column":3},"end":{"line":746,"column":3}},{"start":{"line":746,"column":3},"end":{"line":746,"column":3}}]},"84":{"line":754,"type":"if","locations":[{"start":{"line":754,"column":5},"end":{"line":754,"column":5}},{"start":{"line":754,"column":5},"end":{"line":754,"column":5}}]},"85":{"line":756,"type":"if","locations":[{"start":{"line":756,"column":7},"end":{"line":756,"column":7}},{"start":{"line":756,"column":7},"end":{"line":756,"column":7}}]},"86":{"line":774,"type":"if","locations":[{"start":{"line":774,"column":4},"end":{"line":774,"column":4}},{"start":{"line":774,"column":4},"end":{"line":774,"column":4}}]},"87":{"line":813,"type":"if","locations":[{"start":{"line":813,"column":3},"end":{"line":813,"column":3}},{"start":{"line":813,"column":3},"end":{"line":813,"column":3}}]},"88":{"line":830,"type":"if","locations":[{"start":{"line":830,"column":4},"end":{"line":830,"column":4}},{"start":{"line":830,"column":4},"end":{"line":830,"column":4}}]},"89":{"line":834,"type":"if","locations":[{"start":{"line":834,"column":4},"end":{"line":834,"column":4}},{"start":{"line":834,"column":4},"end":{"line":834,"column":4}}]},"90":{"line":840,"type":"if","locations":[{"start":{"line":840,"column":4},"end":{"line":840,"column":4}},{"start":{"line":840,"column":4},"end":{"line":840,"column":4}}]},"91":{"line":848,"type":"if","locations":[{"start":{"line":848,"column":4},"end":{"line":848,"column":4}},{"start":{"line":848,"column":4},"end":{"line":848,"column":4}}]},"92":{"line":852,"type":"if","locations":[{"start":{"line":852,"column":6},"end":{"line":852,"column":6}},{"start":{"line":852,"column":6},"end":{"line":852,"column":6}}]},"93":{"line":852,"type":"binary-expr","locations":[{"start":{"line":852,"column":9},"end":{"line":852,"column":23}},{"start":{"line":852,"column":27},"end":{"line":852,"column":32}},{"start":{"line":852,"column":37},"end":{"line":852,"column":55}},{"start":{"line":852,"column":59},"end":{"line":852,"column":78}},{"start":{"line":852,"column":82},"end":{"line":852,"column":98}},{"start":{"line":852,"column":103},"end":{"line":852,"column":120}}]},"94":{"line":861,"type":"if","locations":[{"start":{"line":861,"column":5},"end":{"line":861,"column":5}},{"start":{"line":861,"column":5},"end":{"line":861,"column":5}}]},"95":{"line":861,"type":"binary-expr","locations":[{"start":{"line":861,"column":8},"end":{"line":861,"column":22}},{"start":{"line":861,"column":26},"end":{"line":861,"column":59}}]},"96":{"line":867,"type":"if","locations":[{"start":{"line":867,"column":4},"end":{"line":867,"column":4}},{"start":{"line":867,"column":4},"end":{"line":867,"column":4}}]},"97":{"line":867,"type":"binary-expr","locations":[{"start":{"line":867,"column":7},"end":{"line":867,"column":36}},{"start":{"line":867,"column":40},"end":{"line":867,"column":80}}]},"98":{"line":868,"type":"if","locations":[{"start":{"line":868,"column":5},"end":{"line":868,"column":5}},{"start":{"line":868,"column":5},"end":{"line":868,"column":5}}]},"99":{"line":877,"type":"if","locations":[{"start":{"line":877,"column":4},"end":{"line":877,"column":4}},{"start":{"line":877,"column":4},"end":{"line":877,"column":4}}]},"100":{"line":878,"type":"if","locations":[{"start":{"line":878,"column":5},"end":{"line":878,"column":5}},{"start":{"line":878,"column":5},"end":{"line":878,"column":5}}]},"101":{"line":878,"type":"binary-expr","locations":[{"start":{"line":878,"column":8},"end":{"line":878,"column":50}},{"start":{"line":878,"column":54},"end":{"line":878,"column":102}}]},"102":{"line":885,"type":"if","locations":[{"start":{"line":885,"column":4},"end":{"line":885,"column":4}},{"start":{"line":885,"column":4},"end":{"line":885,"column":4}}]},"103":{"line":885,"type":"binary-expr","locations":[{"start":{"line":885,"column":7},"end":{"line":885,"column":34}},{"start":{"line":885,"column":38},"end":{"line":885,"column":80}},{"start":{"line":885,"column":85},"end":{"line":885,"column":98}},{"start":{"line":885,"column":103},"end":{"line":885,"column":144}},{"start":{"line":885,"column":148},"end":{"line":885,"column":186}}]},"104":{"line":893,"type":"if","locations":[{"start":{"line":893,"column":4},"end":{"line":893,"column":4}},{"start":{"line":893,"column":4},"end":{"line":893,"column":4}}]},"105":{"line":944,"type":"cond-expr","locations":[{"start":{"line":944,"column":64},"end":{"line":944,"column":68}},{"start":{"line":944,"column":71},"end":{"line":944,"column":86}}]},"106":{"line":948,"type":"if","locations":[{"start":{"line":948,"column":3},"end":{"line":948,"column":3}},{"start":{"line":948,"column":3},"end":{"line":948,"column":3}}]},"107":{"line":948,"type":"binary-expr","locations":[{"start":{"line":948,"column":6},"end":{"line":948,"column":21}},{"start":{"line":948,"column":25},"end":{"line":948,"column":43}}]},"108":{"line":962,"type":"if","locations":[{"start":{"line":962,"column":3},"end":{"line":962,"column":3}},{"start":{"line":962,"column":3},"end":{"line":962,"column":3}}]},"109":{"line":978,"type":"if","locations":[{"start":{"line":978,"column":3},"end":{"line":978,"column":3}},{"start":{"line":978,"column":3},"end":{"line":978,"column":3}}]},"110":{"line":1111,"type":"if","locations":[{"start":{"line":1111,"column":3},"end":{"line":1111,"column":3}},{"start":{"line":1111,"column":3},"end":{"line":1111,"column":3}}]},"111":{"line":1111,"type":"binary-expr","locations":[{"start":{"line":1111,"column":6},"end":{"line":1111,"column":13}},{"start":{"line":1111,"column":17},"end":{"line":1111,"column":30}}]},"112":{"line":1113,"type":"if","locations":[{"start":{"line":1113,"column":9},"end":{"line":1113,"column":9}},{"start":{"line":1113,"column":9},"end":{"line":1113,"column":9}}]},"113":{"line":1113,"type":"binary-expr","locations":[{"start":{"line":1113,"column":12},"end":{"line":1113,"column":19}},{"start":{"line":1113,"column":23},"end":{"line":1113,"column":37}}]},"114":{"line":1133,"type":"if","locations":[{"start":{"line":1133,"column":3},"end":{"line":1133,"column":3}},{"start":{"line":1133,"column":3},"end":{"line":1133,"column":3}}]},"115":{"line":1133,"type":"binary-expr","locations":[{"start":{"line":1133,"column":6},"end":{"line":1133,"column":34}},{"start":{"line":1133,"column":38},"end":{"line":1133,"column":67}}]},"116":{"line":1156,"type":"if","locations":[{"start":{"line":1156,"column":3},"end":{"line":1156,"column":3}},{"start":{"line":1156,"column":3},"end":{"line":1156,"column":3}}]},"117":{"line":1169,"type":"if","locations":[{"start":{"line":1169,"column":5},"end":{"line":1169,"column":5}},{"start":{"line":1169,"column":5},"end":{"line":1169,"column":5}}]},"118":{"line":1194,"type":"if","locations":[{"start":{"line":1194,"column":4},"end":{"line":1194,"column":4}},{"start":{"line":1194,"column":4},"end":{"line":1194,"column":4}}]},"119":{"line":1199,"type":"if","locations":[{"start":{"line":1199,"column":6},"end":{"line":1199,"column":6}},{"start":{"line":1199,"column":6},"end":{"line":1199,"column":6}}]},"120":{"line":1208,"type":"if","locations":[{"start":{"line":1208,"column":3},"end":{"line":1208,"column":3}},{"start":{"line":1208,"column":3},"end":{"line":1208,"column":3}}]},"121":{"line":1228,"type":"if","locations":[{"start":{"line":1228,"column":3},"end":{"line":1228,"column":3}},{"start":{"line":1228,"column":3},"end":{"line":1228,"column":3}}]},"122":{"line":1234,"type":"if","locations":[{"start":{"line":1234,"column":4},"end":{"line":1234,"column":4}},{"start":{"line":1234,"column":4},"end":{"line":1234,"column":4}}]},"123":{"line":1234,"type":"binary-expr","locations":[{"start":{"line":1234,"column":7},"end":{"line":1234,"column":63}},{"start":{"line":1234,"column":67},"end":{"line":1234,"column":103}}]},"124":{"line":1259,"type":"if","locations":[{"start":{"line":1259,"column":3},"end":{"line":1259,"column":3}},{"start":{"line":1259,"column":3},"end":{"line":1259,"column":3}}]},"125":{"line":1259,"type":"binary-expr","locations":[{"start":{"line":1259,"column":11},"end":{"line":1259,"column":22}},{"start":{"line":1259,"column":26},"end":{"line":1259,"column":43}},{"start":{"line":1259,"column":47},"end":{"line":1259,"column":62}},{"start":{"line":1259,"column":66},"end":{"line":1259,"column":77}}]},"126":{"line":1280,"type":"if","locations":[{"start":{"line":1280,"column":3},"end":{"line":1280,"column":3}},{"start":{"line":1280,"column":3},"end":{"line":1280,"column":3}}]},"127":{"line":1280,"type":"binary-expr","locations":[{"start":{"line":1280,"column":7},"end":{"line":1280,"column":12}},{"start":{"line":1280,"column":16},"end":{"line":1280,"column":32}}]},"128":{"line":1283,"type":"if","locations":[{"start":{"line":1283,"column":4},"end":{"line":1283,"column":4}},{"start":{"line":1283,"column":4},"end":{"line":1283,"column":4}}]},"129":{"line":1283,"type":"binary-expr","locations":[{"start":{"line":1283,"column":8},"end":{"line":1283,"column":41}},{"start":{"line":1283,"column":45},"end":{"line":1283,"column":78}}]},"130":{"line":1366,"type":"if","locations":[{"start":{"line":1366,"column":3},"end":{"line":1366,"column":3}},{"start":{"line":1366,"column":3},"end":{"line":1366,"column":3}}]},"131":{"line":1366,"type":"binary-expr","locations":[{"start":{"line":1366,"column":6},"end":{"line":1366,"column":39}},{"start":{"line":1366,"column":43},"end":{"line":1366,"column":78}}]},"132":{"line":1368,"type":"if","locations":[{"start":{"line":1368,"column":4},"end":{"line":1368,"column":4}},{"start":{"line":1368,"column":4},"end":{"line":1368,"column":4}}]},"133":{"line":1368,"type":"binary-expr","locations":[{"start":{"line":1368,"column":7},"end":{"line":1368,"column":50}},{"start":{"line":1368,"column":54},"end":{"line":1368,"column":79}},{"start":{"line":1368,"column":83},"end":{"line":1368,"column":118}}]},"134":{"line":1373,"type":"if","locations":[{"start":{"line":1373,"column":5},"end":{"line":1373,"column":5}},{"start":{"line":1373,"column":5},"end":{"line":1373,"column":5}}]},"135":{"line":1399,"type":"if","locations":[{"start":{"line":1399,"column":3},"end":{"line":1399,"column":3}},{"start":{"line":1399,"column":3},"end":{"line":1399,"column":3}}]},"136":{"line":1406,"type":"if","locations":[{"start":{"line":1406,"column":3},"end":{"line":1406,"column":3}},{"start":{"line":1406,"column":3},"end":{"line":1406,"column":3}}]},"137":{"line":1415,"type":"if","locations":[{"start":{"line":1415,"column":3},"end":{"line":1415,"column":3}},{"start":{"line":1415,"column":3},"end":{"line":1415,"column":3}}]},"138":{"line":1421,"type":"cond-expr","locations":[{"start":{"line":1421,"column":147},"end":{"line":1421,"column":183}},{"start":{"line":1421,"column":186},"end":{"line":1421,"column":217}}]},"139":{"line":1422,"type":"cond-expr","locations":[{"start":{"line":1422,"column":147},"end":{"line":1422,"column":182}},{"start":{"line":1422,"column":185},"end":{"line":1422,"column":215}}]},"140":{"line":1471,"type":"if","locations":[{"start":{"line":1471,"column":3},"end":{"line":1471,"column":3}},{"start":{"line":1471,"column":3},"end":{"line":1471,"column":3}}]},"141":{"line":1515,"type":"if","locations":[{"start":{"line":1515,"column":3},"end":{"line":1515,"column":3}},{"start":{"line":1515,"column":3},"end":{"line":1515,"column":3}}]},"142":{"line":1562,"type":"if","locations":[{"start":{"line":1562,"column":3},"end":{"line":1562,"column":3}},{"start":{"line":1562,"column":3},"end":{"line":1562,"column":3}}]},"143":{"line":1564,"type":"if","locations":[{"start":{"line":1564,"column":9},"end":{"line":1564,"column":9}},{"start":{"line":1564,"column":9},"end":{"line":1564,"column":9}}]},"144":{"line":1564,"type":"binary-expr","locations":[{"start":{"line":1564,"column":12},"end":{"line":1564,"column":15}},{"start":{"line":1564,"column":19},"end":{"line":1564,"column":28}}]},"145":{"line":1579,"type":"if","locations":[{"start":{"line":1579,"column":3},"end":{"line":1579,"column":3}},{"start":{"line":1579,"column":3},"end":{"line":1579,"column":3}}]},"146":{"line":1586,"type":"binary-expr","locations":[{"start":{"line":1586,"column":23},"end":{"line":1586,"column":47}},{"start":{"line":1586,"column":51},"end":{"line":1586,"column":81}},{"start":{"line":1586,"column":85},"end":{"line":1586,"column":145}}]},"147":{"line":1587,"type":"if","locations":[{"start":{"line":1587,"column":4},"end":{"line":1587,"column":4}},{"start":{"line":1587,"column":4},"end":{"line":1587,"column":4}}]},"148":{"line":1608,"type":"if","locations":[{"start":{"line":1608,"column":5},"end":{"line":1608,"column":5}},{"start":{"line":1608,"column":5},"end":{"line":1608,"column":5}}]},"149":{"line":1610,"type":"if","locations":[{"start":{"line":1610,"column":11},"end":{"line":1610,"column":11}},{"start":{"line":1610,"column":11},"end":{"line":1610,"column":11}}]},"150":{"line":1610,"type":"binary-expr","locations":[{"start":{"line":1610,"column":14},"end":{"line":1610,"column":26}},{"start":{"line":1610,"column":30},"end":{"line":1610,"column":73}}]},"151":{"line":1621,"type":"if","locations":[{"start":{"line":1621,"column":5},"end":{"line":1621,"column":5}},{"start":{"line":1621,"column":5},"end":{"line":1621,"column":5}}]},"152":{"line":1626,"type":"if","locations":[{"start":{"line":1626,"column":10},"end":{"line":1626,"column":10}},{"start":{"line":1626,"column":10},"end":{"line":1626,"column":10}}]},"153":{"line":1628,"type":"if","locations":[{"start":{"line":1628,"column":5},"end":{"line":1628,"column":5}},{"start":{"line":1628,"column":5},"end":{"line":1628,"column":5}}]},"154":{"line":1630,"type":"if","locations":[{"start":{"line":1630,"column":10},"end":{"line":1630,"column":10}},{"start":{"line":1630,"column":10},"end":{"line":1630,"column":10}}]},"155":{"line":1635,"type":"if","locations":[{"start":{"line":1635,"column":4},"end":{"line":1635,"column":4}},{"start":{"line":1635,"column":4},"end":{"line":1635,"column":4}}]},"156":{"line":1639,"type":"if","locations":[{"start":{"line":1639,"column":5},"end":{"line":1639,"column":5}},{"start":{"line":1639,"column":5},"end":{"line":1639,"column":5}}]},"157":{"line":1640,"type":"if","locations":[{"start":{"line":1640,"column":6},"end":{"line":1640,"column":6}},{"start":{"line":1640,"column":6},"end":{"line":1640,"column":6}}]},"158":{"line":1642,"type":"if","locations":[{"start":{"line":1642,"column":12},"end":{"line":1642,"column":12}},{"start":{"line":1642,"column":12},"end":{"line":1642,"column":12}}]}},"code":["(function () { YUI.add('gallery-editor-ui', function (Y, NAME) {","","","\t/**","\t* The Editor UI builds on top of YUI's Rich Text Editor base to create a user interface for editting and formatting HTML content.","\t* Besides basic formatting support (text style, outlining, lists) it has an easy to use image upload manager and link manager.","\t* @module gallery-editor-ui","\t* @author Yvo Schaap","\t*/","","\t/**","\t * @class EditorUI","\t * @description EditorUI class","\t * @constructor","\t * @extends Base","\t * @param config {Object} configuration object","\t */\t\t","\tfunction EditorUI(config) {","\t\tEditorUI.superclass.constructor.apply(this, arguments);","\t}","\t","\tEditorUI.NAME = 'editor-ui';","\tEditorUI.ATTRS = {","\t\t/**","\t\t * The DOM element ID to render our editor in.","\t\t * @attribute textareaEl","\t\t * @type String","\t\t */","\t\ttextareaEl: {","\t\t\tvalue: null,","\t\t\tvalidator: Y.Lang.isString,","\t\t\twriteOnce:true","\t\t},","\t\t/**","\t\t * The DOM element ID of the FORM to write the WYSIWYG content to the textarea.","\t\t * @attribute formEl","\t\t * @type String","\t\t */","\t\tformEl: {","\t\t\tvalue: null,","\t\t\tvalidator: Y.Lang.isString,","\t\t\twriteOnce:true","\t\t},","\t\t/**","\t\t * Parent class name to refer from in CSS.","\t\t * @attribute editorClass","\t\t * @default post","\t\t * @type String","\t\t */","\t\teditorClass: {","\t\t\tvalue: 'post',","\t\t\twriteOnce:true","\t\t},","\t\t/**","\t\t * Content tags formatting.","\t\t * @attribute editorClass","\t\t * @default contentStylesheetUrl","\t\t * @type String","\t\t */","\t\tcontentStylesheetUrl: {","\t\t\tvalue: '/build/gallery-editor-ui/assets/gallery-editor-ui-content.css',","\t\t\twriteOnce:true","\t\t},","\t\t/**","\t\t * The URL to upload the image to, resize image and return JSON. In the assets folder look at upload.phps for an example. Used by image-manager, only passed along.","\t\t * @attribute uploadToUrl","\t\t * @type String","\t\t */","\t\tuploadToUrl: {","\t\t\tvalue: '/build/gallery-editor-ui/assets/fake-upload.html',","\t\t\tvalidator: Y.Lang.isString,","\t\t\twriteOnce:true","\t\t},\t\t","\t\tvisualEditMode: {","\t\t\tvalue: true\t","\t\t},","\t\teditor: null,","\t\ttextArea: null,","\t\tbaseEditor: null,","\t\tframeInstance: null,","","\t\tlinkWindow: null,","\t\tmediaWindow: null,","\t\tsizeWindow: null,","","\t\tflagPaste: null","\t};","","\t","\tY.extend(EditorUI, Y.Base, {\t\t","","\t\t/**","\t\t* @property regexps","\t\t* @type object","\t\t* @protected","\t\t*/\t\t","\t\tregexps: {","\t\t\tdivToPElementsRe:       /<(a|blockquote|dl|div|ol|p|pre|table|ul|img)/i,","\t\t\treplaceBrsRe:           /(<br[^>]*>[ \\n\\r\\t]*){2,}/gi,","\t\t\treplaceFontsRe:         /<(\\/?)font[^>]*>/gi,","\t\t\ttrimRe:                 /^\\s+|\\s+$/g,","\t\t\tnormalizeRe:            /\\s{2,}/g,","\t\t\tkillBreaksRe:           /(<br\\s*\\/?>(\\s|&nbsp;?)*){1,}/g","\t\t},","\t\ttag2cmd: {","\t\t\t'b': 'bold',","\t\t\t'strong': 'bold',","\t\t\t'i': 'italic',","\t\t\t'em': 'italic',","\t\t\t'u': 'underline',","\t\t\t'blockquote' : 'blockquote',","\t\t\t'img': 'media',","\t\t\t'a' : 'link',","\t\t\t'ul' : 'insertunorderedlist',","\t\t\t'ol' : 'insertorderedlist',","\t\t\t'h2' : 'size',","\t\t\t'h3' : 'size'","\t\t},","\t\tstyles: {","\t\t\t'textDecoration': true,","\t\t\t'fontWeight': true,","\t\t\t'fontStyle': true,","\t\t\t'textAlign': true,","\t\t\t'color': false,","\t\t\t'fontSize' : false,","\t\t\t'fontFamily' : false,","\t\t\t'backgroundColor': false","\t\t},","\t\tstyle2tag: {","\t\t\t'strong': 'strong',","\t\t\t'italic': 'em',","\t\t\t'underline': 'em'","\t\t},","\t\ttextAreaTextDefault: '<p><br><p>',","","\t\trenderUI : function() {},/* is only for Widget? */","\t\tdestructor : function() {},","\t\t","\t\t/**","\t\t * @method initializer","\t\t * @description main render method","\t\t */","\t\tinitializer: function() {","\t\t\tvar textArea,editor,textFrame,htmlFrame;","\t\t\t","\t\t\tif(this.get(\"textareaEl\")){","\t\t\t\ttextArea = Y.one(this.get(\"textareaEl\"));","\t\t\t\tif(textArea){\t\t\t\t\t","\t\t\t\t\t//build html for editor UI","\t\t\t\t\ttextArea.addClass(\"Ak\");//styling class","\t\t\t\t\teditor = Y.Node.create('<div style=\"width: '+textArea.getComputedStyle(\"width\")+'\"\"></div>');//inherit width","\t\t\t\t\ttextFrame = Y.Node.create('<div class=\"f9 Ar\" style=\"display: none\"></div>');//todo: allow config option to set initial state","\t\t\t\t\thtmlFrame = Y.Node.create('<div class=\"f8 Ar\"></div>');//height from css","\t\t\t\t\t","\t\t\t\t\ttextArea.wrap(textFrame);//textarea gets parent frame","\t\t\t\t\ttextFrame.wrap(editor);//frame gets another parent","\t\t\t\t\teditor.appendChild(htmlFrame);//parent gets child","\t\t\t\t\t","\t\t\t\t\t//reference","\t\t\t\t\tthis.set(\"textArea\",textArea);","\t\t\t\t\tthis.set(\"editor\",editor);","\t\t\t\t}else{","\t\t\t\t\treturn false;\t","\t\t\t\t}","","\t\t\t\t\t\t\t\t\t\t\t\t","\t\t\t\t//for styling of panel (make configurable)","\t\t\t\tif(!Y.one(\"body\").hasClass(\"yui3-skin-sam\")){","\t\t\t\t\tY.one(\"body\").addClass(\"yui3-skin-sam\");","\t\t\t\t}","\t\t\t\t\t\t\t\t","\t\t\t\t//build toolbar html\t\t\t","\t\t\t\t//this._buildToolbar();","\t\t\t\t","\t\t\t\t//if we don't get a form ID, find the ancestor and set that one.","\t\t\t\tif(this.get(\"formEl\") === null){","\t\t\t\t\t/*","\t\t\t\t\tvar form = editor.ancestor(\"form\");","\t\t\t\t\tif(form){","\t\t\t\t\t\tthis.set(\"formEl\",form);","\t\t\t\t\t}","\t\t\t\t\t*/\t\t\t\t\t","\t\t\t\t}","\t\t\t\t","\t\t\t\tvar baseEditor = new Y.EditorBase({","\t\t\t\t\tdefaultblock : 'p',","\t\t\t\t\textracss: 'body {margin: 0; padding: 0; overflow-y: scroll; overflow-x: hidden;} img, iframe, object, embed { -webkit-user-select: none; user-select: none; user-select: none;}',","\t\t\t\t\tlinkedcss: this.get('contentStylesheetUrl'),/* external file to load formatting */","\t\t\t\t\tplugins : [","\t\t\t\t\t\tY.Plugin.EditorBr,","\t\t\t\t\t\tY.Plugin.EditorTab,","\t\t\t\t\t\tY.Plugin.EditorLists","\t\t\t\t\t]","\t\t\t\t});","\t\t\t\tthis.set(\"baseEditor\",baseEditor);//set in class\t","\t\t\t\t","\t\t\t\t/* hacky but need object reference from execCommand to close panels and stuff */","\t\t\t\tY.mix(baseEditor, {","\t\t\t\t\teditorUI: this","\t\t\t\t});","\t\t\t\t","\t\t\t\tbaseEditor.on('frame:ready', function(){\t\t\t\t\t","\t\t\t\t\tthis.set(\"frameInstance\",baseEditor.getInstance());","\t\t\t\t\t","\t\t\t\t\tthis.get(\"frameInstance\").one(\"body\").addClass(this.get(\"editorClass\")).addClass('editing');/* our css style holder */","\t\t\t\t\tthis.get(\"frameInstance\").on(\"resizestart\",Y.bind(function(){ return false; },this)); //some browsers allow image resizing, we dont. Another option unselectable=on on ellements.","\t\t\t\t\tthis._buildToolbar();","\t\t\t\t\tthis._registerCommands();","\t\t\t\t\tthis._initToolbar();","\t\t\t\t\tthis._toggleComposer(true);//init contents\t\t","\t\t\t\t},this);","\t\t\t\t","\t\t\t\tthis.set(\"linkWindow\", new Y.Panel({","\t\t\t\t\t\t\tmodal: true,","\t\t\t\t\t\t\tvisible: false,","\t\t\t\t\t\t\tcentered: true,","\t\t\t\t\t\t\tzIndex: 150,","\t\t\t\t\t\t\tshim: true,","\t\t\t\t\t\t\theaderContent: \"Add Link\",","\t\t\t\t\t\t\tbodyContent: '<table class=\"space\"><tr><td>Text to display:</td><td><input id=\"linkdialog-text\" style=\"width: 300px\"></td></tr><tr><td>To what URL should this link go?</td><td><input id=\"linkdialog-input\" type=\"url\" style=\"width: 300px; margin-right: 5px;\"><small><a href=\"#\" id=\"testLink\" target=\"_blank\">test link</a></small></td></tr><tr><td colspan=\"2\"><div class=\"Kj-JD-Jl\"><button name=\"ok\" id=\"linkSubmitButton\">Insert Link</button><button name=\"cancel\" class=\"linkHideWindow\">Cancel</button></div></td></tr></table>',","\t\t\t\t\t\t\trender: true","\t\t\t\t}));","\t\t\t\tthis.set(\"mediaWindow\", new Y.Panel({","\t\t\t\t\t\t\tmodal: true,","\t\t\t\t\t\t\tvisible: false,","\t\t\t\t\t\t\tcentered: true,","\t\t\t\t\t\t\tzIndex: 150,","\t\t\t\t\t\t\tshim: true,","\t\t\t\t\t\t\theaderContent: \"Add Media\",","\t\t\t\t\t\t\tbodyContent: '<table class=\"space\"><tr><td colspan=\"2\"><div class=\"image-upload-frame\"></div></td></tr><tr><td>URL:</td><td><input id=\"mediadialog-source\" style=\"width: 300px\" placeholder=\"http://\"></td></tr><tr><td>Title:</td><td><input id=\"mediadialog-text\" style=\"width: 300px\" placeholder=\"\"></td></tr><tr><td colspan=\"2\"><div class=\"Kj-JD-Jl\"><button name=\"ok\" id=\"mediaSubmitButton\">Add Media</button><button name=\"cancel\" class=\"mediaHideWindow\">Cancel</button></div></td></tr></table>',","\t\t\t\t\t\t\trender: true","\t\t\t\t}));","\t\t\t\tthis.set(\"sizeWindow\", new Y.Overlay({","\t\t\t\t\t\t\tvisible: false,","\t\t\t\t\t\t\tzIndex: 150,","\t\t\t\t\t\t\tshim: true,","\t\t\t\t\t\t\tbodyContent: '<div class=\"J-M\"><div class=\"J-N\" role=\"menuitem\" style=\"font-size: normal;\" command=\"p\">Paragraph</div><div class=\"J-N\" role=\"menuitem\" style=\"font-size: x-large;\" command=\"h2\">Header One</div><div class=\"J-N\" role=\"menuitem\" style=\"font-size: large;\" command=\"h3\">Header Two</div><div class=\"J-N\" role=\"menuitem\" style=\"font-size: 1.2em\" command=\"h3\">Header Three</div></div>',","\t\t\t\t\t\t\talign: {","    \t\t\t\t\t\t\tnode:\".eY\",","\t\t\t\t\t\t\t\tpoints:[Y.WidgetPositionAlign.TL, Y.WidgetPositionAlign.BL]","\t\t\t\t\t\t\t},","\t\t\t\t\t\t\trender: true\t\t\t\t\t\t","\t\t\t\t}));","\t\t\t\t","\t\t\t\tY.one(\".mediaHideWindow\").on(\"click\",Y.bind(function(){ this.get(\"mediaWindow\").hide(); },this));","\t\t\t\tY.one(\".linkHideWindow\").on(\"click\",Y.bind(function(){ this.get(\"linkWindow\").hide(); },this));\t\t\t\t","\t\t\t\t","\t\t\t\tbaseEditor.render(htmlFrame);","\t\t\t\t","\t\t\t}else{","\t\t\t}","\t\t\t","\t\t},","","\t\t/**","\t\t*","\t\t* @method _registerCommands","\t\t* @protected","\t\t*/\t\t","\t\t_registerCommands: function(){","\t\t\t/* this mixes YUI commands with our commands into one; doesn't link with browsers execCommand */","\t\t\t/* http://yuilibrary.com/forum/viewtopic.php?p=35065 */","\t\t\t/* we already try to use html5 tags instead of the browsers */","\t\t\tY.mix(Y.Plugin.ExecCommand.COMMANDS, {","\t\t\t\t","\t\t\t\tbold: function(cmd) {","\t\t\t\t\tvar inst = this.get('host').getInstance(), selection = new inst.Selection(), node, text = '', editor = inst.host.editorUI;","\t\t\t\t\t//remove end and start space of selection","\t\t\t\t\tif(selection && selection.anchorNode.get(\"tagName\") === \"STRONG\"){","\t\t\t\t\t\tif (!selection.isCollapsed) {","\t\t\t\t\t\t\tthis._command('bold');","\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t//remove node's tag","\t\t\t\t\t\t\tthis._command('bold');","\t\t\t\t\t\t}","\t\t\t\t\t}else if(selection && selection.anchorNode.get(\"tagName\") === \"BODY\"){","\t\t\t\t\t\t//the top","\t\t\t\t\t\treturn;","\t\t\t\t\t}else if(selection){","\t\t\t\t\t\tif (!selection.isCollapsed) {","\t\t\t\t\t\t\tnode = selection.wrapContent('strong');","\t\t\t\t\t\t\tselection.focusCursor(true, true);","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\ttext = editor._getInnerText(selection.anchorNode);","\t\t\t\t\t\t\tif(text.length > 0){","\t\t\t\t\t\t\t\tnode = selection.insertContent('<strong>&nbsp;</strong>');","\t\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t\tnode = selection.insertContent('<strong>&nbsp;</strong><br>');","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\tselection.focusCursor(true, true);","\t\t\t\t\t\t}","\t\t\t\t\t}else{","\t\t\t\t\t\t//this._command('bold');","\t\t\t\t\t}","\t\t\t\t\t","\t\t\t\t\treturn node;","\t\t\t\t},","\t\t\t\titalic: function(cmd) {","\t\t\t\t\t////scope.baseEditor.execCommand('wrap','em');","\t\t\t\t\tvar inst = this.get('host').getInstance(), selection = new inst.Selection(), node, text = '', editor = inst.host.editorUI;","\t\t\t\t\t//remove end and start space of selection","\t\t\t\t\tif(selection && selection.anchorNode.get(\"tagName\") === \"EM\"){","\t\t\t\t\t\tif (!selection.isCollapsed){","\t\t\t\t\t\t\tthis._command('italic');","\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t//remove node's tag","\t\t\t\t\t\t\tthis._command('italic');","\t\t\t\t\t\t}","\t\t\t\t\t}else if(selection && selection.anchorNode.get(\"tagName\") === \"BODY\"){","\t\t\t\t\t\t//the top","\t\t\t\t\t\treturn;","\t\t\t\t\t}else if(selection){","\t\t\t\t\t\tif (!selection.isCollapsed) {","\t\t\t\t\t\t\tnode = selection.wrapContent('em');","\t\t\t\t\t\t\tselection.focusCursor(true, true);","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\ttext = editor._getInnerText(selection.anchorNode);","\t\t\t\t\t\t\tif(text.length > 0){","\t\t\t\t\t\t\t\tnode = selection.insertContent('<em>&nbsp;</em>');\t","\t\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t\tnode = selection.insertContent('<em>&nbsp;</em><br>');\t","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\tselection.focusCursor(true, true);","\t\t\t\t\t\t}","\t\t\t\t\t}else{","\t\t\t\t\t\t//this._command('italic');","\t\t\t\t\t}","\t\t\t\t\t","\t\t\t\t\treturn node;","\t\t\t\t},","","\t\t\t\tsize: function(cmd,node) {","\t\t\t\t\tvar inst = this.get('host').getInstance(), selection = new inst.Selection(), node, text = '', editor = inst.host.editorUI;","\t\t\t\t\t//remove end and start space of selection","\t\t\t\t\tif(selection && selection.isCollapsed){","\t\t\t\t\t\t//insert new header","\t\t\t\t\t}else if(node && node.get(\"tagName\")){","\t\t\t\t\t\t//if a click happened on a h3, h2, or ..","\t\t\t\t\t}else if(selection && selection.anchorNode.get(\"tagName\") === \"P\"){","\t\t\t\t\t\t//update paragraph to header","\t\t\t\t\t}","\t\t\t\t\tselection.focusCursor(true, true);","","\t\t\t\t\tif(editor.get(\"sizeWindow\").get('visible') === true){","\t\t\t\t\t\teditor.get(\"sizeWindow\").setAttrs({visible: false});","\t\t\t\t\t}else{","\t\t\t\t\t\teditor.get(\"sizeWindow\").setAttrs({visible: true});","\t\t\t\t\t}","\t\t\t\t},","\t\t\t\tmedia: function(cmd,node) {","","\t\t\t\t\tvar inst = this.get('host').getInstance(), selection = new inst.Selection(), node, grid, text = '', src = 'http://', editor = inst.host.editorUI;","","\t\t\t\t\tif(node && node.changedType === \"mouseup\") {","\t\t\t\t\t\tif (!selection.isCollapsed) {","\t\t\t\t\t\t\treturn false;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\t","\t\t\t\t\tif(selection && selection.anchorNode && selection.anchorNode.get(\"tagName\") === \"IMG\"){","\t\t\t\t\t\tnode = selection.anchorNode;","\t\t\t\t\t\ttext = node.get(\"title\");","\t\t\t\t\t\tsrc = node.get(\"src\");","\t\t\t\t\t}else if(node && node.get(\"tagName\") === \"IMG\"){","\t\t\t\t\t\ttext = node.get(\"title\");","\t\t\t\t\t\tsrc = node.get(\"src\");","\t\t\t\t\t}else if(selection){\t\t","\t\t\t\t\t\tif (!selection.isCollapsed) {","\t\t\t\t\t\t\ttext = selection.text;","\t\t\t\t\t\t}","\t\t\t\t\t}else{","\t\t\t\t\t\tinst.focus();\t","\t\t\t\t\t}","\t\t\t\t\t","\t\t\t\t\tvar frame = editor.get(\"mediaWindow\").get(\"contentBox\").one(\".image-upload-frame\");//where to insert the image manager","\t\t\t\t\tvar parent_width = editor.get(\"editor\").get(\"offsetWidth\");/* get textarea width = width image upload max */","\t\t\t\t\tvar cfg = {cellImageSizes: {height: '300px', width: parent_width}, frameEl: frame, resizeHeight: true, uploadToUrl: this.get('uploadToUrl')};","\t\t\t\t\t","\t\t\t\t\t//before rendering overlay, set .image-upload-frame with the correct height and width for centerized to work correctly","\t\t\t\t\t//frame.setStyle(\"width\",cfg.cellImageSizes.width).setStyle(\"height\",cfg.cellImageSizes.height);","\t\t\t\t\t","\t\t\t\t\tif(node){","\t\t\t\t\t\tcfg = Y.mix(cfg,{file: src, cellImageSizes: {width: node.getStyle(\"width\"), height: node.getStyle(\"height\")}},true);//overwrite","\t\t\t\t\t}","\t\t\t\t\t","\t\t\t\t\tvar g = new Y.EditorImageManage(cfg);/* mix image data with other cfg */","\t\t\t\t\t//g.support() === true){","\t\t\t\t\t\t//g.render();","\t\t\t\t\t//}else{","\t\t\t\t\t//}","\t\t\t\t\tg.on(\"upload:start\",Y.bind(function(event){","\t\t\t\t\t\t//disable save button","\t\t\t\t\t},this));","\t\t\t\t\tg.on(\"upload:error\",Y.bind(function(event){","\t\t\t\t\t\t//notify user of upload error","\t\t\t\t\t},this));","\t\t\t\t\tg.on(\"upload:complete\",Y.bind(function(event){","\t\t\t\t\t\t//enable save button","\t\t\t\t\t\t","\t\t\t\t\t\tvar data = Y.JSON.parse(event.data);//return span with title of image, keep","\t\t\t\t\t\tif(data && data.status === 1){","\t\t\t\t\t\t\tY.one(\"#mediadialog-source\").set(\"value\",data.file);","\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t//notify user","\t\t\t\t\t\t}","","\t\t\t\t\t},this));","\t\t\t\t\t","\t\t\t\t\t//Y.one(\"#mediadialog-data\").set(\"value\",\"\");//existing gallery?","\t\t\t\t\tY.one(\"#mediadialog-source\").set(\"value\",src);","\t\t\t\t\tY.one(\"#mediadialog-text\").set(\"value\",text);","\t\t\t\t\t","\t\t\t\t\tY.one(\"#mediaSubmitButton\").destroy();//destroy","\t\t\t\t\tY.one(\"#mediaSubmitButton\").on(\"click\",Y.bind(function(e){","\t\t\t\t\t\te.preventDefault();","\t\t\t\t\t\t","\t\t\t\t\t\tif(node){","\t\t\t\t\t\t\t//update node src","\t\t\t\t\t\t\tnode.set(\"src\",Y.one(\"#mediadialog-source\").get(\"value\"));","\t\t\t\t\t\t\tnode.set(\"title\",Y.one(\"#mediadialog-text\").get(\"value\"));","\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t//else image node","\t\t\t\t\t\t\tthis.command(\"insertandfocus\",'<img src=\"'+Y.one(\"#mediadialog-source\").get(\"value\")+'\" title=\"'+Y.one(\"#mediadialog-text\").get(\"value\")+'\">'+editor.textAreaTextDefault);","\t\t\t\t\t\t}","\t\t\t\t\t\teditor.get(\"mediaWindow\").hide();","\t\t\t\t\t},this));","","\t\t\t\t\teditor.get(\"mediaWindow\").setAttrs({visible: true})","","\t\t\t\t},","\t\t\t\tlink: function(cmd,node) {","\t\t\t\t\t//http://yuiblog.com/sandbox/yui/3.2.0pr1/api/createlink-base.js.html","\t\t\t\t\t","\t\t\t\t\tvar inst = this.get('host').getInstance(), selection = new inst.Selection(), node, text = '',href = 'http://',editor = inst.host.editorUI;","","\t\t\t\t\tif(node && node.changedType === \"mouseup\") {","\t\t\t\t\t\tif (!selection.isCollapsed) {","\t\t\t\t\t\t\treturn false;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\t","\t\t\t\t\tif(selection && selection.anchorNode && selection.anchorNode.get(\"tagName\") === \"A\"){","\t\t\t\t\t\t//within link","\t\t\t\t\t\tnode = selection.anchorNode;//selection has link?","\t\t\t\t\t\ttext = node.get(\"text\");","\t\t\t\t\t\thref = node.get(\"href\");","\t\t\t\t\t}else if(node && node.get(\"tagName\") === \"A\"){","\t\t\t\t\t\t//on a link","\t\t\t\t\t\ttext = node.get(\"text\");","\t\t\t\t\t\thref = node.get(\"href\");\t\t\t\t\t\t","\t\t\t\t\t}else if(selection){\t\t\t\t","\t\t\t\t\t\t//create link","\t\t\t\t\t\tif (!selection.isCollapsed) {","\t\t\t\t\t\t\ttext = selection.text;//text to link (no url available)","\t\t\t\t\t\t}","","\t\t\t\t\t}else{","\t\t\t\t\t\tinst.focus();\t\t","\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\tY.one(\"#linkdialog-text\").set(\"value\",text);","\t\t\t\t\tY.one(\"#linkdialog-input\").set(\"value\",href);","\t\t\t\t\t","\t\t\t\t\t//testLink","\t\t\t\t\tY.one(\"#testLink\").destroy();//destroy","\t\t\t\t\tY.one(\"#testLink\").on(\"mousedown\",Y.bind(function(e){","\t\t\t\t\t\te.preventDefault()","\t\t\t\t\t\te.currentTarget.set(\"href\",Y.one(\"#linkdialog-input\").get(\"value\"));","\t\t\t\t\t},this));","\t\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\tY.one(\"#linkSubmitButton\").destroy();//destroy","\t\t\t\t\tY.one(\"#linkSubmitButton\").on(\"click\",Y.bind(function(e){","\t\t\t\t\t\te.preventDefault();","\t\t\t\t\t\tvar href, text;","\t\t\t\t\t\ttext = Y.one(\"#linkdialog-text\").get(\"value\");","\t\t\t\t\t\thref = Y.one(\"#linkdialog-input\").get(\"value\");","\t\t\t\t\t\tif(text.length > 0 && href !== \"http://\"){","\t\t\t\t\t\t\tif(node){","\t\t\t\t\t\t\t\tnode.set(\"href\",href);","\t\t\t\t\t\t\t\tnode.set(\"text\",text);","\t\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t\tthis.command(\"insertandfocus\",\"<a href=\\\"\"+href+\"\\\">\"+text+\"</a>\");","\t\t\t\t\t\t\t}","\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t//message error no link","\t\t\t\t\t\t\tthis.command(\"unlink\");","\t\t\t\t\t\t}","\t\t\t\t\t\teditor.get(\"linkWindow\").hide();","\t\t\t\t\t},this));","\t\t\t\t\t","\t\t\t\t\teditor.get(\"linkWindow\").setAttrs({visible: true})","","\t\t\t\t},","\t\t\t\tblockquote: function(cmd) {","\t\t\t\t\t////scope.baseEditor.execCommand('wrap','em');","\t\t\t\t    var inst = this.get('host').getInstance(), selection = new inst.Selection(), node, text = '',editor = inst.host.editorUI;","\t\t\t\t\t//remove end and start space of selection","\t\t\t\t\tif(selection && selection.anchorNode.get(\"tagName\") === \"BLOCKQUOTE\"){","\t\t\t\t\t\tif (!selection.isCollapsed){","\t\t\t\t\t\t\tthis._command('outdent');","\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t//remove node's tag","\t\t\t\t\t\t\tthis._command('outdent');","\t\t\t\t\t\t}","\t\t\t\t\t\t//_getInnerText","\t\t\t\t\t}else if(selection && selection.anchorNode.get(\"tagName\") === \"BODY\"){","\t\t\t\t\t\treturn","\t\t\t\t\t}else if(selection){","\t\t\t\t\t\tif (!selection.isCollapsed) {","\t\t\t\t\t\t\tnode = selection.wrapContent('blockquote');","\t\t\t\t\t\t\tselection.focusCursor(true, true);","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t//text = editor._getInnerText(selection.anchorNode);","\t\t\t\t\t\t\tnode = selection.insertContent('<blockquote>&nbsp;</blockquote>');\t","\t\t\t\t\t\t\tselection.focusCursor(true, true);//selection.selectNode(node., true);","\t\t\t\t\t\t}","\t\t\t\t\t}else{","\t\t\t\t\t\tthis._command('blockquote');","\t\t\t\t\t}","\t\t\t\t},","\t\t\t\tclear: function(cmd) {","\t\t\t\t\tvar inst = this.get('host').getInstance(), selection = new inst.Selection(), node;","\t\t\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\tvar answer = confirm('You will lose the html formatting. Are you sure?');\t","\t\t\t\t\tif(answer && selection.anchorNode){","\t\t\t\t\t\tif(selection.anchorNode.get(\"parentNode\").get(\"tagName\") === \"BODY\"){","\t\t\t\t\t\t\tselection.anchorNode.set(\"outerHTML\",'<p>'+selection.anchorNode.get(\"text\")+'<br></p>');//must have paragraphs","\t\t\t\t\t\t}else{","\t\t\t\t\t\t\tselection.anchorNode.set(\"outerHTML\",selection.anchorNode.get(\"text\"));/* selection.getText(selection.anchorNode) */","\t\t\t\t\t\t\tselection.focusCursor(true, true);","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}\t\t\t\t","\t\t\t});\t\t\t","\t\t},","\t\t/**","\t\t*","\t\t* @method _buildToolbar","\t\t* @protected","\t\t*/","\t\t_buildToolbar: function(){","\t\t\tvar editor = this.get(\"editor\"), toolbars = Y.Node.create('<div class=\"toolbars\"></div>'), html_toolbar = Y.Node.create('<div class=\"html_toolbar\"></div>'), plain_toolbar = Y.Node.create('<div class=\"plain_toolbar\" style=\"display: none\"></div>');/* todo: no inline styles */","\t\t\t","\t\t\tvar toolbar_buttons = [","\t\t\t\t{fn: 'bold', cls:'eN'},","\t\t\t\t{fn: 'italic', cls:'e3'},","\t\t\t\t{fn: 'underline', cls:'fu'},","\t\t\t\t{fn: 'size', cls:'eY',desc: 'Format size',arrow: true},","\t\t\t\t{fn: 'media', cls:'QT',desc: 'Insert image'},","\t\t\t\t{fn: 'link', cls:'e5',desc: 'Insert link'},","\t\t\t\t{fn: 'insertorderedlist', cls:'e6',desc: 'Ordered list'},","\t\t\t\t{fn: 'insertunorderedlist', cls:'eO',desc: 'Unordered list'},","\t\t\t\t{fn: 'outdent', cls:'e8',desc: 'Outdent'},","\t\t\t\t{fn: 'indent', cls:'e2',desc: 'Indent'},","\t\t\t\t{fn: 'blockquote', cls:'fa',desc: 'Insert blockquote'},","\t\t\t\t{fn: 'justifyleft', cls:'e4',desc: 'Align text left'},","\t\t\t\t{fn: 'justifycenter', cls:'eP',desc: 'Center text'},","\t\t\t\t{fn: 'justifyright', cls:'fc',desc: 'Align text right'},","\t\t\t\t{fn: 'justifyfull', cls:'fd',desc: 'Text justified'},","\t\t\t\t{fn: 'clear', cls:'fb',desc: 'Clear formatting selection'}\t","\t\t\t];","\t\t\t","\t\t\tY.Object.each(toolbar_buttons, function(button){","\t\t\t\thtml_toolbar.appendChild(this._createToolbarButton(button));","\t\t\t},this);","\t\t\t","\t\t\thtml_toolbar.appendChild(Y.Node.create('<div class=\"button switch e9\">Edit HTML</div>'));","","\t\t\ttoolbars.appendChild(html_toolbar);","","\t\t\tplain_toolbar.appendChild(Y.Node.create('<div class=\"button switch k9\">Rich formatting</div>'));","\t\t\tplain_toolbar.appendChild(this._createToolbarButton({fn: 'format', cls:'u9','desc': 'Format HTML'}));","\t\t\t","\t\t\ttoolbars.appendChild(plain_toolbar);","\t\t\t","\t\t\teditor.insert(toolbars,editor.one(\"*\"));","\t\t},","\t\t/**","\t\t*","\t\t* @method _createToolbarButton","\t\t* @param cfg {Object} Config for button.","\t\t* @protected","\t\t* @return {Object} YUI Node object.","\t\t*/","\t\t_createToolbarButton: function(cfg){","\t\t\t//todo: support arrow","\t\t\treturn Y.Node.create('<div class=\"button\" role=\"button\" title=\"'+(cfg.desc ? cfg.desc : cfg.fn)+'\" command=\"'+cfg.fn+'\"><div class=\"'+cfg.cls+' icon\"></div></div>');","\t\t},","\t\t/**","\t\t * ","\t\t * @method _initToolbar","\t\t * @protected","\t\t */\t\t\t","\t\t_initToolbar: function(){","\t\t\tvar editor = this.get(\"editor\"), sizeWindow = this.get(\"sizeWindow\");","\t\t\t","\t\t\t//we use mousedown, so we can keep focus in editor","\t\t\teditor.all('.html_toolbar div[role=button]').each(function(node) {","\t\t\t\tnode.on('mousedown', function(e){","\t\t\t\t\te.preventDefault();","\t\t\t\t\t","\t\t\t\t\tvar command = e.currentTarget.getAttribute(\"command\"); ","\t\t\t\t\tif(command){","\t\t\t\t\t\tvar node = this.get(\"baseEditor\").execCommand(command);","\t\t\t\t\t}","\t\t\t\t\treturn false;","\t\t\t\t},this);","\t\t\t}, this);\t","\t\t\t","\t\t\t","\t\t\tsizeWindow.get(\"contentBox\").all(\"div[role=menuitem]\").each(function(node) {","\t\t\t\tnode.on(\"mousedown\",Y.bind(function(e){","\t\t\t\t\te.preventDefault();","\t\t\t\t\tvar inst = this.get(\"baseEditor\").getInstance(), selection = new inst.Selection(), target = e.currentTarget;","","\t\t\t\t\tif(selection && !selection.isCollapsed){","\t\t\t\t\t\tif((style = target.getAttribute(\"data-style\"))){","\t\t\t\t\t\t\tvar style = style.split(\": \");","\t\t\t\t\t\t\tselection.anchorNode.setStyle(style[0],style[1]);//attach style","\t\t\t\t\t\t}else if(command = target.getAttribute(\"command\")){","\t\t\t\t\t\t\tthis.get(\"baseEditor\").execCommand(\"formatblock\",target.getAttribute(\"command\"));","\t\t\t\t\t\t}","\t\t\t\t\t\tselection.focusCursor(true, true);","\t\t\t\t\t}else{","\t\t\t\t\t\t//nothing selected, insert node with new line","\t\t\t\t\t\tif(command = target.getAttribute(\"command\")){","\t\t\t\t\t\t\tthis.get(\"baseEditor\").execCommand(\"insertandfocus\",\"<\"+target.getAttribute(\"command\")+\">&nbsp;<br></\"+target.getAttribute(\"command\")+\">\");","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t\t","\t\t\t\t\tthis.get(\"sizeWindow\").hide();","\t\t\t\t\treturn false;//so we keep focus\t\t\t\t ","\t\t\t\t},this));\t\t\t\t","\t\t\t},this);","","\t\t\t//","\t\t\tthis.get(\"baseEditor\").before('nodeChange', function(e) {","\t\t\t\tswitch (e.changedType) {","\t\t\t\t\tcase 'backspace-up':","\t\t\t\t\tif (Y.UA.webkit){","\t\t\t\t\t\te.preventDefault();","\t\t\t\t\t\te.stopPropagation();","\t\t\t\t\t\treturn false;","\t\t\t\t\t}\t","\t\t\t\t\tbreak;\t\t\t\t","\t\t\t\t}","\t\t\t},this);\t","\t\t\t","\t\t\tthis.get(\"baseEditor\").after('nodeChange', function(e) {","\t\t\t\tswitch (e.changedType) {","\t\t\t\t\t/*case 'execcommand': endless loop*/","\t\t\t\t\tcase 'enter':","\t\t\t\t\t\tif (e.changedNode.get(\"tagName\") === 'BLOCKQUOTE' && !e.changedEvent.shiftKey) {","\t\t\t\t\t\t\t/* we don't want enters in blockquote creating a new blockquote (use shift enter)*/","\t\t\t\t\t\t\te.preventDefault();","\t\t\t\t\t\t\t//this.get('baseEditor').execCommand('outdent', '');","\t\t\t\t\t\t\tthis.get(\"baseEditor\").execCommand(\"insertandfocus\",\"</blockquote><p><br></p>\");","\t\t\t\t\t\t}","\t\t\t\t\t\t/* on enter with parent body, force p instead of copy element we came from */","\t\t\t\t\t\t","\t\t\t\t\t\tbreak;","\t\t\t\t\tcase 'keyup':","\t\t\t\t\tcase 'mousedown':","\t\t\t\t\t\tthis._updateButtons(e);","\t\t\t\t\t\tbreak;","\t\t\t\t}","\t\t\t\t/* we don't like this */","\t\t\t\te.classNames = \"\";","\t\t\t\te.fontFamily = \"\";","\t\t\t\te.fontSize = \"\";","\t\t\t\te.fontColor = \"\";","\t\t\t\te.backgroundColor = \"\";\t","\t\t\t},this);","","\t\t\t//strip any styles added (except, execcommand, which allows styles (incl. \"question\") doesn't pick up on browser exceccommand CTRL+B capture ourselves and bubble to this)","\t\t\t//","\t\t\tthis.get(\"baseEditor\").before('nodeChange', function(e) {","","\t\t\t\tswitch (e.changedType) {","\t\t\t\t\tcase 'paste':","\t\t\t\t\t\tthis.flagPaste = true;","\t\t\t\t\t\tbreak;","\t\t\t\t\tcase 'keyup':","\t\t\t\t\t\tif(this.flagPaste === true){","\t\t\t\t\t\t\te.changedNode.set('innerHTML', e.changedNode.get('text'));//allow a, strong, li, ul, ol, p, br?","\t\t\t\t\t\t}","\t\t\t\t\tdefault:","\t\t\t\t\t\tthis.flagPaste = false","\t\t\t\t}","","\t\t\t},this);","\t\t\t","\t\t\t//only on clicks of element","\t\t\tthis.get(\"baseEditor\").after('nodeChange', function(e) {","\t\t\t\tif(e.changedType === \"mouseup\") {","\t\t\t\t\te.preventDefault();","\t\t\t\t\t","\t\t\t\t\tvar node = e.changedNode;","\t\t\t\t\tnode.changedType = e.changedType; /* we use this to check what the action was */","\t\t\t\t\t","\t\t\t\t\tif(node.get(\"tagName\") === \"A\"){","\t\t\t\t\t\tthis.get(\"baseEditor\").execCommand(\"link\",node);","\t\t\t\t\t}else if(node.get(\"tagName\") === \"IMG\"){","\t\t\t\t\t\tthis.get(\"baseEditor\").execCommand(\"media\",node);","\t\t\t\t\t}","\t\t\t\t}","\t\t\t},this);","\t\t\t","\t\t\t//toggle","\t\t\teditor.one(\".e9\").on('click', Y.bind(this._toggleComposer, this, false));","\t\t\teditor.one(\".k9\").on('click', Y.bind(this._toggleComposer, this, true));","\t\t\t\t","\t\t\teditor.one(\".u9\").on('click', Y.bind(this._formatHtml, this, true));//format html button","\t\t\t","\t\t\t//on form submit","\t\t\tif(this.get(\"formEl\") && Y.all(this.get(\"formEl\")).size() === 1){","\t\t\t\tY.one(this.get(\"formEl\")).before(\"submit\", Y.bind(this.submitForm, this));//should be referenced in config","\t\t\t}","\t\t},","\t\t/**","\t\t *","\t\t * @method _formatHtml","\t\t * @protected","\t\t */\t","\t\t_formatHtml : function() {","\t\t\tif(!(typeof EditorHTMLFormatter === 'undefined')){","\t\t\t\t//bit crazy way around but it works","\t\t\t\tvar html = this.get(\"textArea\").get(\"value\");","\t\t\t\tthis.get(\"baseEditor\").set('content',html);//don't do anything with the formatting","\t\t\t\t","\t\t\t\tvar formatted_html = EditorHTMLFormatter.init(this.get(\"frameInstance\").one('body'));","\t\t\t\tthis.get(\"textArea\").set(\"value\",formatted_html);","\t\t\t\t//after switch we clean it up","\t\t\t}","\t\t},\t","\t\t/**","\t\t *","\t\t * @method _updateButtons","\t\t * @param e {Event} events","\t\t * @protected","\t\t */\t","\t\t_updateButtons : function(e) {","\t\t\t//e.preventDefault();","\t\t\tvar editor = this.get(\"editor\"), node = e.changedNode, cmds = e.commands;","\t\t\t","\t\t\tif(node) {\t\t\t","\t\t\t\t//tag2cmd links tag to command hence button","\t\t\t\tvar parents = this.get(\"baseEditor\").getDomPath(node, false);//get parent DOM nodes","\t\t\t\teditor.all(\".html_toolbar div[role=button]\").removeClass(\"active\");//reset buttons","\t\t\t\t","\t\t\t\tY.each(parents, function(node){","\t\t\t\t\tvar cmd = this.tag2cmd[node.tagName.toLowerCase()];","\t\t\t\t\t/* also support our outline styles */","\t\t\t\t\tif(cmd){","\t\t\t\t\t\teditor.all(\".html_toolbar div[role=button]\").each(function(node){","\t\t\t\t\t\t\tif(node.getAttribute(\"command\") === cmd){","\t\t\t\t\t\t\t\tnode.addClass(\"active\");//active","\t\t\t\t\t\t\t}","\t\t\t\t\t\t});","\t\t\t\t\t}","\t\t\t\t},this);","\t\t\t}","\t\t},\t\t","\t\t/**","\t\t *","\t\t * @method _toggleComposer","\t\t * @param toggle {Boolean} Toggle between WYSIWYG editor or HTML.","\t\t * @protected","\t\t */","\t\t_toggleComposer: function(toggle){","\t\t\tvar editor = this.get(\"editor\");","\t\t\ttry{","\t\t\t\tthis.set(\"visualEditMode\",toggle);","\t\t\t\tif(toggle === true){","\t\t\t\t\t//wysiwyg editor","\t\t\t\t\tthis.get(\"baseEditor\").set('content',this._formatDom() + this.textAreaTextDefault);//is removed anyways by regex","\t\t\t\t\t","\t\t\t\t\t//make object not peak through","\t\t\t\t\t//var param = Y.Node.create('<param name=\"wmode\" value=\"opaque\">');","\t\t\t\t\t//this.get(\"frameInstance\").all('object').appendChild(param);","\t\t\t\t\t","\t\t\t\t\teditor.one(\".html_toolbar\").setStyle('display','block');","\t\t\t\t\teditor.one(\".plain_toolbar\").setStyle('display','none');","\t\t\t\t\t","\t\t\t\t\teditor.one(\".f9\").setStyle('display','none');","\t\t\t\t\teditor.one(\".f8\").setStyle('display','block');","\t\t\t\t}else{","\t\t\t\t\t//html format editor\t\t\t\t","\t\t\t\t\tthis.get(\"textArea\").set(\"value\",this._cleanDom());","","\t\t\t\t\t//this._formatHtml();//format html","\t\t\t\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\teditor.one(\".html_toolbar\").setStyle('display','none');","\t\t\t\t\teditor.one(\".plain_toolbar\").setStyle('display','block');","\t\t\t\t\t","\t\t\t\t\teditor.one(\".f9\").setStyle('display','block');","\t\t\t\t\teditor.one(\".f8\").setStyle('display','none');","\t\t\t\t}","\t\t\t}catch(err){","\t\t\t\t","\t\t\t\t","\t\t\t}","\t\t},","\t\t/**","\t\t*","\t\t* @method _formatDom","\t\t* @protected","\t\t* @return {String} textArea value.","\t\t*/","\t\t_formatDom : function(){","\t\t\tvar content = this.get(\"textArea\").get(\"value\");;","\t\t\t//content = content.replace(this.regexps.normalizeRe, \" \");/* clean up whitespace */","\t\t\tif(content.length < 1){","\t\t\t\treturn \"\";/* toggle will add a p again */","\t\t\t}","\t\t\t","\t\t\treturn content;","\t\t},","\t\t/**","\t\t*","\t\t* @method _cleanNodes","\t\t* @protected","\t\t*/","\t\t_cleanNodes : function(){","\t\t\t/* http://yuilibrary.com/yui/docs/node/ */","\t\t\t","\t\t\tvar tags = this.get(\"frameInstance\").one('body').all(\"*\");","\t\t\ttags.each(function(node){","\t\t\t\t","\t\t\t\tif(node.ancestor(\".gridbuilder\",true)){","\t\t\t\t\treturn;","\t\t\t\t}","","\t\t\t\tif(node.get(\"tagName\") === \"B\") {","\t\t\t\t\tvar newNode = Y.Node.create('<strong></strong>');","\t\t\t\t\tnewNode.set(\"innerHTML\",node.get(\"innerHTML\"));\t\t\t\t","\t\t\t\t\tnode.replace(newNode);","\t\t\t\t}","","\t\t\t\tif(node.get(\"tagName\") === \"I\") {","\t\t\t\t\tvar newNode = Y.Node.create('<em></em>');","\t\t\t\t\tnewNode.set(\"innerHTML\",node.get(\"innerHTML\"));\t\t\t\t","\t\t\t\t\tnode.replace(newNode);","\t\t\t\t}","","\t\t\t\t//remove spans without a whitelisted meaning","\t\t\t\t//remove justify on span or normal?","\t\t\t\tif(node.get(\"tagName\") === \"SPAN\") { //&& no whitelisted style (weight, underline, color, italics, align)","\t\t\t\t\tvar flag = false;","\t\t\t\t\tY.each(this.styles, function(value, key) {","\t\t\t\t\t\tstyle = node.getStyle(key);//return textDecoration = none, equals; drop line-height and stuff","\t\t\t\t\t\tif(value === true && style && (style !== \"normal\" && style !== \"justify\" && style !== \"none\"  && style !== \"start\" )){","\t\t\t\t\t\t\t//keep","\t\t\t\t\t\t\tflag = true;","\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t//remove style","\t\t\t\t\t\t\tnode.setStyle(key,'');","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t\t/* safari adds spans with Apple-style-span stuff */","\t\t\t\t\tif(flag === false || node.hasClass(\"Apple-style-span\")){","\t\t\t\t\t\tnode.get(\"parentNode\").insertBefore(node.get(\"childNodes\"),node);","\t\t\t\t\t\tnode.remove();","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t\t","\t\t\t\tif(node.get(\"tagName\") === \"DIV\" && this._getInnerText(node,true).length > 0) {","\t\t\t\t\tif (node.get(\"innerHTML\").search(this.regexps.divToPElementsRe) === -1)\t{","\t\t\t\t\t\tvar newNode = Y.Node.create('<p></p>');//kills all div information","\t\t\t\t\t\tnewNode.set(\"innerHTML\",node.get(\"innerHTML\"));\t\t\t\t","\t\t\t\t\t\tnode.replace(newNode);","\t\t\t\t\t}else{","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\t","\t\t\t\t//if has no child node text, what are you doing here (p with an image?)","\t\t\t\tif(node.get(\"tagName\").match(/^(ul|ol|blockquote|p|li|em|strong|h3|h2)$/i)){","\t\t\t\t\tif(this._getInnerText(node,true).length === 0 && node.all(\"img, iframe, object, br\").size() === 0){","\t\t\t\t\t\tnode.remove();","\t\t\t\t\t}else{","\t\t\t\t\t}","\t\t\t\t}","","\t\t\t\t//if youtube object/iframe, strip parent <p>","\t\t\t\tif(node.get(\"tagName\") === \"P\" && this._getInnerText(node,true).length === 0 && (node.one('*') && (node.one('*').get(\"tagName\") === \"IFRAME\" || node.one('*').get(\"tagName\") === \"IMG\"))) {","\t\t\t\t\tvar newNode = Y.Node.create('<div></div>');","\t\t\t\t\tnewNode.addClass(\"media\");","\t\t\t\t\tnewNode.set(\"innerHTML\",node.get(\"innerHTML\"));\t\t\t\t\t","\t\t\t\t\tnode.replace(newNode);","\t\t\t\t}","\t\t\t\t","\t\t\t\t//some editor-base node for IE and cursors","\t\t\t\tif(node.get(\"tagName\") === \"VAR\") {","\t\t\t\t\tnode.get(\"parentNode\").insertBefore(node.get(\"childNodes\"),node);","\t\t\t\t\tnode.remove();","\t\t\t\t}","","\t\t\t\t","\t\t\t},this);","\t\t},","\t\t/**","\t\t* Cleans up the DOM the editor created.","\t\t* @method _cleanNodes","\t\t* @protected","\t\t* @return {String} WYSIWYG to clean HTML string.","\t\t*/","\t\t_cleanDom : function(){","\t\t\t","\t\t\t//clean up dom","\t\t\tthis._cleanNodes();","\t\t\t\t\t\t","\t\t\tvar textContent = this.get(\"baseEditor\").getContent();//get content","\t\t\t","\t\t\t//br br to p","\t\t\ttextContent = textContent.replace(this.regexps.replaceBrsRe, '</p><p>');","\t\t\t","\t\t\t//remove &nbsp;","\t\t\ttextContent = textContent.replace(/&nbsp;/gi, ' ');","\t\t\t","\t\t\t//replace <br><p>","\t\t\ttextContent = textContent.replace(/<br>([\\S+])?<p>/gi, '<p>');","","\t\t\t//replace </p></br>","\t\t\ttextContent = textContent.replace(/<\\/p>([\\S+])?<br>/gi, '</p>');","","\t\t\t//replace <p>[spaces|single br]</p> or those as divs","\t\t\ttextContent = textContent.replace(/<(div|p|span)>([\\S+])?(<br>)?<\\/(div|p|span)>/gi, '');","\t\t\t","\t\t\t//replace style=\"\" due to clearing unwanted styles, but keeping this attribute","\t\t\ttextContent = textContent.replace(/ style=\"\"/gi, '');","\t\t\t","\t\t\treturn textContent;","\t\t},","\t\t/**","\t\t * ","\t\t * @method _getInnerText","\t\t * @param e {HTMLElement}","\t\t * @param normalizeSpaces {Boolean}","\t\t * @protected","\t\t * @return {String} Node text contents as string.","\t\t */\t\t\t","\t\t_getInnerText: function (e, normalizeSpaces) {","\t\t\tvar textContent = \"\";","\t\t\tnormalizeSpaces = (typeof normalizeSpaces === 'undefined') ? true : normalizeSpaces;","","\t\t\ttextContent = e.get(\"text\").replace(this.regexps.trimRe, \"\");","\t\t\t","\t\t\tif(normalizeSpaces && !e.hasChildNodes()){","\t\t\t\te.set(\"text\",textContent.replace(this.regexps.normalizeRe, \" \"));","\t\t\t}","\t\t\t","\t\t\treturn textContent;","\t\t},","\t\t/**","\t\t * @method submitForm","\t\t * @param e {Event}","\t\t * @description Called before form is submitted","\t\t */\t\t","\t\tsubmitForm: function(e){","\t\t\t","\t\t\t//if in 'wysiwyg' mode","\t\t\tif(this.get(\"visualEditMode\") === true){","\t\t\t\tthis.get(\"textArea\").set(\"value\",this._cleanDom());/* take content from wysig editor and push to textarea */","\t\t\t}","\t\t\t","\t\t\tthis.get(\"textArea\").set(\"value\",this._formatDom());","\t\t\t","\t\t\t//Y.one(this.get(\"formEl\")).submit();\t//remove submitForm from event listener?\t\t","\t\t},","\t\t/**","\t\t * @method getContent","\t\t * @description Return the html content from the active view","\t\t * @return {String} Editor content as html string.","\t\t */\t","\t\tgetContent: function(){","\t\t\t","\t\t\t//if in 'wysiwyg' mode","\t\t\tif(this.get(\"visualEditMode\") === true){","\t\t\t\tthis.get(\"textArea\").set(\"value\",this._cleanDom());/* take content from wysig editor and push to textarea */","\t\t\t}","\t\t\t","\t\t\treturn this._formatDom();\t\t\t","\t\t},","\t\t/**","\t\t * ","\t\t **/\t\t","\t\ttest : function(){","\t\t\t","\t\t}","\t});","\t","\tY.EditorUI = EditorUI;\t/**","\t * @module gallery-editor-ui","\t */"," ","\t/**","\t * @class EditorImageManage","\t * @description EditorImageManage class","\t * @constructor","\t * @extends Base","\t * @param config {Object} configuration object","\t */\t","\tfunction EditorImageManage(config) {","\t\tEditorImageManage.superclass.constructor.apply(this, arguments);","\t}","\t","\tEditorImageManage.NAME = 'EditorImageManage';","\tEditorImageManage.ATTRS = {","\t\t/**","\t\t * The DOM element to render our image in. Can be YUI3 node or selector.","\t\t * @attribute frameEl","\t\t * @type Object","\t\t */","\t\tframeEl: {","\t\t\tvalue: null,","\t\t\twriteOnce:true","\t\t},","\t\t/**","\t\t * The URL to upload the image to, resize image and return JSON. In the assets folder look at upload.phps for an example.","\t\t * @attribute uploadToUrl","\t\t * @type String","\t\t */","\t\tuploadToUrl: {","\t\t\tvalue: '/build/gallery-editor-ui/assets/fake-upload.html',","\t\t\tvalidator: Y.Lang.isString,","\t\t\twriteOnce:true","\t\t},","\t\t/**","\t\t * Can we adjust the height of the image.","\t\t * @attribute resizeHeight","\t\t * @type Boolean","\t\t */","\t\tresizeHeight: {","\t\t\tvalue: true,","\t\t\tvalidator: Y.Lang.isBoolean,","\t\t\twriteOnce:true","\t\t},","\t\t/**","\t\t * Draw UI buttons in manager","\t\t * @attribute drawUI","\t\t * @type Boolean","\t\t */","\t\tdrawUI: {","\t\t\tvalue: true\t","\t\t},","\t\t/**","\t\t * Image URL which pre-loads into our manager","\t\t * @attribute file","\t\t * @type String","\t\t */","\t\tfile: null,","\t\t/**","\t\t * The frame's initial size dimentsions (height and width) to hold image in","\t\t * @attribute cellImageSizes","\t\t * @type Object","\t\t */","\t\tcellImageSizes: {","\t\t\tvalue: {width: 0, height: 0 },","\t\t\tsetter: function (cellImageSizes) {","\t\t\t\tcellImageSizes.height = parseInt(cellImageSizes.height,10);","\t\t\t\tcellImageSizes.width = parseInt(cellImageSizes.width,10);","\t\t\t\t","\t\t\t\treturn cellImageSizes;","\t\t\t}","\t\t},","\t\t/**","\t\t * The image size dimentsions (height and width)","\t\t * @attribute canvasImageSizes","\t\t * @type Object","\t\t */","\t\tcanvasImageSizes: {","\t\t\tvalue: {width: 0, height: 0 },","\t\t\tsetter: function (canvasImageSizes) {","\t\t\t\tcanvasImageSizes.height = parseInt(canvasImageSizes.height,10);","\t\t\t\tcanvasImageSizes.width = parseInt(canvasImageSizes.width,10);","\t\t\t\t","\t\t\t\treturn canvasImageSizes;","\t\t\t}","\t\t},","\t\tcell: null,","\t\ttop:{","\t\t\tvalue: 0","\t\t},","\t\tleft:{","\t\t\tvalue: 0\t","\t\t},","\t\timg: null,","\t\timg_src: null,","\t\tzoom: {","\t\t\tvalue: 1","\t\t},","\t\tresize: {","\t\t\tvalue: 1","\t\t}","\t};","\t","\tY.extend(EditorImageManage, Y.Base, {","\t\t","\t\trenderUI : function() {},/* is only for Widget? */","\t\tdestructor : function() {},","\t\t","\t\t/**","\t\t * @method initializer","\t\t * @description main render method","\t\t */","\t\tinitializer: function() {","\t\t\tvar cellImageSizes = this.get('cellImageSizes'), canvasImageSizes = this.get('canvasImageSizes'), frameEl = this.get(\"frameEl\"), cell;","\t\t\t","\t\t\t","\t\t\t//init vars","\t\t\tif(frameEl && frameEl._node){","\t\t\t\t//ok","\t\t\t}else if(frameEl && Y.one(frameEl)){//is string","\t\t\t\tframeEl = Y.one(this.get(\"frameEl\"));//set frameEl as node","\t\t\t\tthis.set(\"frameEl\",frameEl);","\t\t\t}else{","\t\t\t\treturn;","\t\t\t}","","\t\t\t//events","\t\t\tthis.publish(\"upload:start\");","\t\t\tthis.publish(\"upload:error\");","\t\t\tthis.publish(\"upload:complete\");","","\t\t\tcell = Y.Node.create('<div class=\"visual\"></div>');","\t\t\tthis.set(\"cell\",cell);\t\t\t","\t\t\t//cellImageSizes is obligated","\t\t\t","\t\t\t","\t\t\tframeEl.empty().appendChild(cell);//clear and add manage cell","\t\t\t","\t\t\t//do all this in a cell","\t\t\tif(canvasImageSizes.width === 0 && canvasImageSizes.height === 0){","\t\t\t\tcanvasImageSizes = { width: cellImageSizes.width, height: cellImageSizes.height };","\t\t\t}","\t\t\tthis.set('canvasImageSizes',canvasImageSizes);","\t\t\t","\t\t\t//this.set('cellImageSizes',cellImageSizes);","\t\t\tcell.setStyle(\"width\",cellImageSizes.width+\"px\").setStyle(\"height\",cellImageSizes.height+\"px\");\t","","\t\t\t//init upload-to canvas:","\t\t\tthis.uploadCanvas = Y.Node.create('<canvas class=\"canvas\"></canvas>');","\t\t\t","\t\t\t//init canvas draw","\t\t\tthis.uploadTo = this.uploadCanvas.invoke('getContext', '2d');//node: _node.getContext(\"2d\");\t\t\t","\t\t\t","\t\t\t//canvas copy (due to crazy sizing issues)","\t\t\tthis.uploadCanvasCopy = Y.Node.create('<canvas class=\"canvas\"></canvas>');","\t\t\tthis.uploadToCopy = this.uploadCanvasCopy.invoke('getContext', '2d');//node: _node.getContext(\"2d\");","\t\t\t\t\t","\t\t\t//init upload button","\t\t\tthis.uploadButton = Y.Node.create('<input type=\"file\" class=\"upload\" accept=\"image/*\">');//multiple=\"multiple\", size=\"0\"","\t\t\tcell.appendChild(this.uploadButton);","\t\t\tcell.appendChild(this.uploadCanvas);","\t\t\t","\t\t\tif(this.get(\"drawUI\")){","\t\t\t\t//create zoom buttons","\t\t\t\tthis.zoomBtns = Y.Node.create('<div class=\"zoom button in\" title=\"Zoom In\">+</div> <div class=\" zoom button out\" title=\"Zoom Out\">-</div>');","\t\t\t\t","\t\t\t\tthis.zoomBtns.one(\".in\").on(\"click\",Y.bind(function(e){\t\t","\t\t\t\t\tvar zoom = parseFloat(this.get(\"zoom\") * 1.05);","\t\t\t\t\tthis.set(\"zoom\",zoom);","\t\t\t\t\tthis.drawCanvas();","\t\t\t\t\t","\t\t\t\t},this));","\t\t\t\tthis.zoomBtns.one(\".out\").on(\"click\",Y.bind(function(e){\t\t","","\t\t\t\t\tvar zoom = parseFloat(this.get(\"zoom\") * .95);","\t\t\t\t\tif(zoom > 1){","\t\t\t\t\t\tthis.set(\"zoom\", zoom);","\t\t\t\t\t}else{","\t\t\t\t\t\tthis.set(\"zoom\",1);//reset\t\t\t\t\t\t","\t\t\t\t\t}","\t\t\t\t\tthis.drawCanvas();","\t\t\t\t\t","\t\t\t\t},this));","\t\t\t\tcell.appendChild(this.zoomBtns);","","\t\t\t\t//save image button","\t\t\t\tthis.saveBtn = Y.Node.create('<a class=\"save button\" title=\"Save image\">Save</a>');","\t\t\t\tthis.saveBtn.on(\"click\",Y.bind(function(e){\t","\t\t\t\t\tthis.saveImage();","\t\t\t\t},this));","\t\t\t\tcell.appendChild(this.saveBtn);","\t\t\t\t\t\t\t\t","\t\t\t\t//remove image button","\t\t\t\tthis.clearBtn = Y.Node.create('<a class=\"delete button\" title=\"Remove image\">x</a>');","\t\t\t\tthis.clearBtn.on(\"click\",Y.bind(function(e){\t\t\t\t","\t\t\t\t\tthis.get(\"cell\").removeClass(\"active\");","\t\t\t\t\tthis.clearCanvas();","\t\t\t\t},this));","\t\t\t\tcell.appendChild(this.clearBtn);","\t\t\t\t","\t\t\t\tif(this.get(\"resizeHeight\") === true){","\t\t\t\t\tvar heightInpt = Y.Node.create('<input class=\"heightRow\" value=\"'+cellImageSizes.height+'px\">');","\t\t\t\t\theightInpt.on([\"blur\",\"submit\"],Y.bind(function(evt){","\t\t\t\t\t\tvar row = evt.currentTarget.get(\"parentNode\");","\t\t\t\t\t\tvar height = parseInt(evt.currentTarget.get(\"value\"),10);","\t\t\t\t\t\tif(height > 10){/* minimum height */","\t\t\t\t\t\t\tthis.setHeight(height+6);/* this shouldn't be here +6 */","\t\t\t\t\t\t}","\t\t\t\t\t},this));","\t\t\t\t\tcell.appendChild(heightInpt);\t","\t\t\t\t}","\t\t\t}","","\t\t\t//add resizer of cell","\t\t\tif(this.get(\"resizeHeight\") === true){","","\t\t\t\tvar resize = new Y.Resize({","\t\t\t\t\tnode: frameEl,","\t\t\t\t\thandles: 'b',","\t\t\t\t\tminHeight: 55,","\t\t\t\t\tmaxHeight: 600,","\t\t\t\t\tpreserveRatio: false","\t\t\t\t});","","\t\t\t\tresize.on('resize:resize', Y.bind(function(event) {","\t\t\t\t\tvar cell = event.currentTarget.get(\"node\");\t\t\t\t","\t\t\t\t\tvar height = parseInt(event.currentTarget.info.offsetHeight,10);","\t\t\t\t\tthis.setHeight(height);","\t\t\t\t\t","\t\t\t\t\tcell.all(\".heightRow\").set(\"value\",(height-6)+\"px\");/* 6 = handlebar adjust upload.js */","\t\t\t\t},this));","\t\t\t}","","\t\t\t//have a image to fill cell? Load into canvas!","\t\t\tif(this.get(\"file\")){","\t\t\t\tthis.set(\"img\",Y.Node.create('<img>'));\t","\t\t\t\tthis.get(\"img\").on(\"load\",Y.bind(this.prepareImg,this));","\t\t\t\tthis.get(\"img\").on(\"error\",Y.bind(this.errorImg,this));","\t\t\t\t","\t\t\t\t//only local files can load to crossdomain, else use our proxy to load","\t\t\t\tif(this.get(\"file\").indexOf(document.location.hostname) > 0 || this.get(\"file\").substr(0,1) === \"/\") {","\t\t\t\t\tthis.get(\"img\").set('src',this.get(\"file\"));","\t\t\t\t}else{","\t\t\t\t\tthis.get(\"img\").set('src',this.get('uploadToUrl')+'?proxy='+encodeURIComponent(this.get(\"file\")));","\t\t\t\t}","","\t\t\t\t//initial offset","\t\t\t\tthis.uploadCanvas.setStyle('position','relative');","\t\t\t\tthis.uploadCanvas.setStyle('top',this.get(\"top\")+'px');","\t\t\t\tthis.uploadCanvas.setStyle('left',this.get(\"left\")+'px');\t\t","\t\t\t}","\t\t\t","\t\t\t//events","\t\t\tthis.uploadButton.on(\"change\",Y.bind(this.loadLocalImage,this));","\t\t\t","\t\t\t//events resize","\t\t\tY.on('windowresize', Y.bind(this.contrainMove,this));","\t\t},","\t\t","\t\t/**","\t\t * Only works for html5 browsers, else fallback to browser upload only?","\t\t * @method support","\t\t * @return {Boolean}","\t\t**/\t\t\t","\t\tsupport: function(){","\t\t\tif ( !( window.File && window.FileReader && window.FileList && window.Blob ) ) {\t","\t\t\t\treturn false;\t","\t\t\t}","\t\t\treturn true;","\t\t},","\t\t/**","\t\t * @method loadLocalImage","\t\t * @param evt {Event} events","\t\t * @protected","\t\t**/\t\t\t\t","\t\tloadLocalImage: function(evt){\t","\t\t\t\t\t\t","\t\t\t//clear canvas","\t\t\tthis.clearCanvas();","\t\t\t","\t\t\t//create image holder and attach event listener","\t\t\tthis.set(\"img\",Y.Node.create('<img>'));","\t\t\tthis.get(\"img\").detach('load');","\t\t\tthis.get(\"img\").on(\"load\",Y.bind(this.prepareImg,this));","","\t\t\tvar files = evt.target.get('files');/* ie10 :( */\t\t\t\t","\t\t\tif (files && files.size() > 0) {","\t\t\t\tvar file = files._nodes[0];","\t\t\t\t//file.name , file.size, file.lastModifiedDate","\t\t\t\tif (typeof FileReader !== \"undefined\" && file.type.indexOf(\"image\") !== -1) {","\t\t\t\t\tvar reader = new FileReader();","\t\t\t\t\t//addEventListener doesn't work in Google Chrome for this event","\t\t\t\t\treader.onload = Y.bind(function (evt) {","\t\t\t\t\t\tthis.get(\"img\").set('src',evt.target.result);//this will call load on prepareImg\t\t\t","\t\t\t\t\t},this);\t","\t\t\t\t\treader.readAsDataURL(file);//readAsText\t\t\t\t","\t\t\t\t}","\t\t\t}","\t\t\t","\t\t\tevt.stopPropagation();","\t\t\tevt.preventDefault();\t","\t\t},","\t\t/**","\t\t * @method prepareImg","\t\t * @param evt {Event} events","\t\t * @protected","\t\t**/\t\t\t\t","\t\tprepareImg: function(evt){\t\t","\t\t\t//save local source file","\t\t\tthis.set(\"img_src\",evt.target._node);","","\t\t\tthis.uploadCanvasCopy.set(\"width\",evt.target._node.width);","\t\t\tthis.uploadCanvasCopy.set(\"height\",evt.target._node.height);\t\t","\t\t\tthis.uploadToCopy.drawImage(evt.target._node, 0, 0, evt.target._node.width, evt.target._node.height);","\t\t\t","\t\t\tthis.drawCanvas();","\t\t},","\t\t/**","\t\t * @method errorImg","\t\t * @param evt {Event} events","\t\t * @protected","\t\t**/\t\t\t\t","\t\terrorImg: function(evt){\t\t","\t\t},","\t\t/**","\t\t * @method drawCanvas","\t\t * @protected","\t\t**/\t\t\t\t","\t\tdrawCanvas: function(){","\t\t\tvar img = this.get(\"img\"),","\t\t\t\timg_src = this.get(\"img_src\"),","\t\t\t\tcanvasImageSizes = this.get(\"canvasImageSizes\"),","\t\t\t\tcell = this.get(\"cell\");","\t\t\t","\t\t\t//set cell active","\t\t\tcell.addClass(\"active\");","\t\t\t","\t\t\t//to allow moving","\t\t\t","\t\t\t//get dimentsions, and set them","\t\t\tvar newDimensions = this.resizeDimensions(img_src,canvasImageSizes);\t\t\t","\t\t\t","\t\t\timg_src.width = newDimensions.width;","\t\t\timg_src.height = newDimensions.height;","\t\t\t","\t\t\t//zoom","\t\t\timg_src.height = img_src.height * this.get(\"zoom\");","\t\t\timg_src.width = img_src.width * this.get(\"zoom\");","\t\t\t","\t\t\t//do we allow canvas to be < max-width|max-height? -> result is too small image send back ","\t\t\tthis.uploadCanvas.set(\"width\",img_src.width);","\t\t\tthis.uploadCanvas.set(\"height\",img_src.height);","","\t\t\t//calc ratio between our source canvas and and target (preview) canvas","\t\t\tthis.set(\"resize\",(this.uploadCanvasCopy.get(\"height\") / this.uploadCanvas.get(\"height\")));","\t\t\t","\t\t\t//support zoom","\t\t\tthis.uploadTo.drawImage(img_src, 0, 0, img_src.width,img_src.height);","\t\t\t","\t\t\t//draggable reset","\t\t\tthis.contrainMove();","\t\t},","\t\t/**","\t\t * @method resizeDimensions","\t\t * @protected","\t\t * @return {Object} Dimensions","\t\t**/\t\t\t","\t\tresizeDimensions: function(node,minDimensions){","\t\t\t//get image dimensions","\t\t\tvar ratio = node.height / node.width;","\t\t\tvar newDimensions = {height: node.height, width: node.width, resize: 100};","\t\t\t\t\t\t","\t\t\tif(node.width >= minDimensions.width || node.height >= minDimensions.height){","\t\t\t\t//start with the shortest target lenght","\t\t\t\tif(minDimensions.width <= minDimensions.height && node.height <= node.width && node.height >= minDimensions.height){","\t\t\t\t\t//match up height with max height","\t\t\t\t\t//newDimensions.resize = (Math.round((newDimensions.width / node.width)*100));\t\t\t\t","\t\t\t\t}else{","\t\t\t\t\t//match up width with height","\t\t\t\t\tif(node.width >= minDimensions.width){","\t\t\t\t\t\tnewDimensions.width = minDimensions.width;","\t\t\t\t\t\tnewDimensions.height = Math.round(minDimensions.width * ratio);\t","\t\t\t\t\t\t//newDimensions.resize = (Math.round((newDimensions.width / node.width)*100));\t\t\t\t","\t\t\t\t\t}else{","\t\t\t\t\t\t//fits within max (too small)","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}else{","\t\t\t\t//no resize","\t\t\t}\t","\t\t\treturn newDimensions;\t","\t\t},","\t\t/**","\t\t * @method contrainMove","\t\t * @protected","\t\t**/\t\t\t\t\t","\t\tcontrainMove: function(){","\t\t\tvar img = this.get(\"img\"),","\t\t\t\tcell = this.get(\"cell\");","\t\t\t","\t\t\t/* is the canvas already offset */","\t\t\tvar offsetTop = parseInt(this.uploadCanvas.getStyle(\"top\"),10);","\t\t\tvar offsetLeft = parseInt(this.uploadCanvas.getStyle(\"left\"),10);","\t\t\t","\t\t\t/* for if image is smaller then canvas */","\t\t\tif(this.uploadCanvas.get(\"width\") < parseInt(cell.getStyle(\"width\"),10)){","\t\t\t\tvar fillWidth = parseInt(cell.getStyle(\"width\"),10) - this.uploadCanvas.get(\"width\");","\t\t\t}else{\t\t\t","\t\t\t\tvar fillWidth = 0;","\t\t\t}","","\t\t\t/* for if image is smaller then canvas */","\t\t\tif(this.uploadCanvas.get(\"height\") < parseInt(cell.getStyle(\"height\"),10)){","\t\t\t\tvar fillHeight = parseInt(cell.getStyle(\"height\"),10) - this.uploadCanvas.get(\"height\");","\t\t\t}else{\t\t\t","\t\t\t\tvar fillHeight = 0;","\t\t\t}","\t\t\t\t\t\t","\t\t\t//make draggable in div (set when new image is loaded, unset previous node)","\t\t\tvar location = this.uploadCanvas.getXY();","\t\t\t","\t\t\tif(this.drag){ this.drag.destroy(); }//cleanup reset","\t\t\t","\t\t\tthis.drag = new Y.DD.Drag({","\t\t\t\tnode: this.uploadCanvas,","\t\t\t}).plug(Y.Plugin.DDConstrained,{","\t\t\t\t\tconstrain: { ","\t\t\t\t\ttop: (location[1] - offsetTop - (this.uploadCanvas.get(\"height\") - (this.uploadCanvas.get(\"height\") > parseInt(cell.getStyle(\"height\"),10) ?  parseInt(cell.getStyle(\"height\"),10) : this.uploadCanvas.get(\"height\")))),","\t\t\t\t\tleft: (location[0] - offsetLeft - (this.uploadCanvas.get(\"width\") - (this.uploadCanvas.get(\"width\") >  parseInt(cell.getStyle(\"width\"),10) ?  parseInt(cell.getStyle(\"width\"),10) : this.uploadCanvas.get(\"width\")))), ","\t\t\t\t\tright: location[0] + this.uploadCanvas.get(\"width\") + fillWidth - offsetLeft,","\t\t\t\t\tbottom: location[1] + this.uploadCanvas.get(\"height\") + fillHeight - offsetTop }","\t\t\t});","","\t\t\tthis.drag.on(\"drag:end\",Y.bind(function(e){","\t\t\t\tthis.set(\"top\",parseInt(this.uploadCanvas.getStyle(\"top\"),10));","\t\t\t\tthis.set(\"left\",parseInt(this.uploadCanvas.getStyle(\"left\"),10));","\t\t\t\t","\t\t\t\t//and calc new drag area","\t\t\t\tthis.contrainMove();","\t\t\t},this));\t\t","\t\t},","\t\t/**","\t\t * @method clearCanvas","\t\t * @protected","\t\t**/\t\t\t\t","\t\tclearCanvas: function(){","\t\t\t//reset offset","\t\t\tthis.uploadCanvas.setStyle('top','0px');","\t\t\tthis.uploadCanvas.setStyle('left','0px');","\t\t\t","\t\t\t//zoom","\t\t\tthis.set(\"zoom\",1);","\t\t\t","\t\t\t//cleanup canvas pixels","\t\t\tthis.uploadTo.clearRect(0, 0, this.uploadCanvas.get(\"width\"), this.uploadCanvas.get(\"height\"));\t","\t\t},","\t\t/**","\t\t * @method convertToBlob","\t\t * @return {Blob} Blob image data.","\t\t**/\t\t","\t\tconvertToBlob: function(dataURI){","\t\t\t","\t\t\t//http://stackoverflow.com/questions/4998908/convert-data-uri-to-file-then-append-to-formdata","\t\t\t//https://github.com/josefrichter/resize/blob/master/public/preprocess.js","\t\t\tvar binary = atob(dataURI.split(',')[1]);","\t\t\tvar array = [];","\t\t\tfor(var i = 0; i < binary.length; i++) {","\t\t\t\tarray.push(binary.charCodeAt(i));","\t\t\t}","\t\t\treturn new Blob([new Uint8Array(array)], {type: 'image/jpeg'});\t\t","\t\t},","\t\t/**","\t\t * @method getFile","\t\t * @return {FileHTML5} Y.FileHTML5 object.","\t\t**/\t\t\t\t\t","\t\tgetFile: function(){\t","\t\t\t//var blob = this.uploadCanvas._node.mozGetAsFile(\"file.jpg\");\t\t\t","\t\t\tif(this.get(\"cell\").hasClass(\"active\")){","\t\t\t\tvar blob = this.convertToBlob(this.getImage());","\t\t\t\tY.FileHTML5.prototype._isValidFile = function(){ return true; };//overwrite","\t\t\t\t","\t\t\t\treturn new Y.FileHTML5({file: blob});","\t\t\t}else{","\t\t\t\treturn false;\t","\t\t\t}","\t\t},","\t\t/**","\t\t * Height and width of output cell not actual image!","\t\t * @method getFileDetails","\t\t * @return {Object} File dimensions (top, left, zoom, width, height, resize)","\t\t**/\t\t","\t\tgetFileDetails: function(){\t","\t\t\tvar cellImageSizes = this.get(\"cellImageSizes\");\t\t\t","\t\t\t//todo: if cellImageSizes < canvas size, push that out","\t\t\treturn {top: this.get(\"top\"), left: this.get(\"left\"), zoom: this.get(\"zoom\"), width: cellImageSizes.width, height: cellImageSizes.height, resize: this.get(\"resize\") };","\t\t},\t","\t\t/**","\t\t * @method getImage\t","\t\t * @return {String} Base64 binary image data.","\t\t**/\t\t\t\t","\t\tgetImage: function(){\t\t","\t\t\t//this string is a file","\t\t\treturn this.uploadCanvasCopy._node.toDataURL(\"image/jpeg\",\"0.8\");//png,jpeg,.8","\t\t},","\t\t/**","\t\t * @method setHeight\t\t","\t\t**/\t\t\t\t","\t\tsetHeight: function(pixels){","\t\t\t","\t\t\tvar cellImageSizes = this.get('cellImageSizes');","\t\t\tcellImageSizes.height = pixels - 6; /*6 is so we have an resize handle bar */","\t\t\tthis.set('cellImageSizes',cellImageSizes);","\t\t\tthis.get(\"cell\").setStyle(\"height\",cellImageSizes.height+\"px\").setStyle(\"width\",cellImageSizes.width+\"px\");\t","\t\t\t","\t\t\tthis.contrainMove();/* redrawn image */\t","\t\t},","\t\t/**","\t\t * @method saveImage\t\t","\t\t**/\t\t\t","\t\tsaveImage: function(){","\t\t\tvar file = this.getFile();","\t\t\tif(file){","\t\t\t\tvar uploader = new Y.UploaderHTML5;","\t\t\t\t","\t\t\t\tuploader.on(\"uploadstart\",Y.bind(function(event) {","\t\t\t\t\tthis.fire(\"upload:start\",event);","\t\t\t\t},this));","\t\t\t\tuploader.on(\"uploaderror\",Y.bind(function(event) {","\t\t\t\t\tthis.fire(\"upload:error\",event);","\t\t\t\t},this));","\t\t\t\tuploader.on(\"uploadcomplete\",Y.bind(function(event) {","\t\t\t\t\tthis.fire(\"upload:complete\",event);","\t\t\t\t},this));","","\t\t\t\tuploader.upload(file, this.get('uploadToUrl'), this.getFileDetails());","\t\t\t}","\t\t\t","\t\t},","\t});","\t","\tY.EditorImageManage = EditorImageManage;\t/**","\t * @module gallery-editor-ui","\t */","","\t/**","\t * @class EditorHTMLFormatter","\t * @description Formats a DOM to correctly outlined easy to read HTML.","\t */\t","\tvar EditorHTMLFormatter = {","\t\thtml: [],","\t\tindent: '  ',","\t\ttrimRe: /^\\s+|\\s+$/gi,","\t\tinlineNodeRe: /^(img|br|sup|sub)$/i,","\t\tnewLineNodeRe: /^(div|p|img|blockquote|q|iframe|pre|code|table|tbody|th|td|tr|ul|ol|li|h1|h2|h3|h4|h5|h6|dl|dt|dd|form|fieldset|legend|iframe)$/i,","\t\tnotCloseNodesRe: /^(img|br)$/i,","\t\tfirstNodeRe: /^(<[^>]+>)/i,","\t\treplaceNodesRe: /^(script|style|meta|body|head|title|link)/i,","\t\tkeepAttributesRe: /^(src|style|width|height|class|title|alt|data-)/i,//no id","\t\t/* span, ul, b, strong, em, i, ul are all online */","","\t\t/**","\t\t * @method init","\t\t * @description main render method","\t\t * @param dom {Object} native DOM element or YUI Node","\t\t * @return {String} HTML","\t\t */\t\t","\t\tinit: function(dom){","\t\t\tthis.html = [];","\t\t\tif(dom === null){","\t\t\t\treturn '';//overwrites so maybe return dom","\t\t\t}else if(dom && dom._node){","\t\t\t\tthis._dive(dom.getDOMNode(),0);//for YUI","\t\t\t}else{","\t\t\t\tthis._dive(dom,0);//native DOM assumed","\t\t\t}","\t\t\treturn this.html.join('');","\t\t},","\t\t/**","\t\t*","\t\t* @method _dive","\t\t* @protected","\t\t*/\t\t\t","\t\t_dive: function (e,level) {","\t\t\tvar node = e.firstChild;","\t","\t\t\tif(!e) {","\t\t\t\treturn;","\t\t\t}","\t","\t\t\t//go until no more child nodes","\t\t\twhile(node !== null) {","\t\t\t\t//https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType","\t\t\t\tvar hasTextChild = node.hasChildNodes() > 0 && node.firstChild.nodeType === 3 && node.firstChild.nodeValue.replace(this.trimRe,'').length > 0;","\t\t\t\tif (node.nodeType === 1) {","\t\t\t\t\tvar nodeName = node.nodeName.toLowerCase();","\t\t\t\t\t//add all atributes","\t","\t\t\t\t\t//var node_str = node.outerHTML.replace(node.innerHTML,'').replace(this.trimRe, '');//works with new lines and stuff?","\t\t\t\t\t//rebuild node","\t\t\t\t\tvar collection = node.attributes;","\t\t\t\t\tvar node_str = \"<\"+nodeName;","\t\t\t\t\tfor(var i=0; i<collection.length; i++){","\t\t\t\t\t\t node_str += \" \"+collection[i].name + \"=\\\"\" + collection[i].value+\"\\\"\";","\t\t\t\t\t}\t","\t\t\t\t\tnode_str += \">\";\t\t","\t\t\t\t\t/*","\t\t\t\t\tnode_match = node_str.match(this.firstNodeRe);//extract only first node","\t\t\t\t\tif(node_match){","\t\t\t\t\t\tnode_str = node_match[0];","\t\t\t\t\t}","\t\t\t\t\t*/\t","\t\t\t\t\t","\t\t\t\t\t//only certain nodes get indent","\t\t\t\t\tvar new_line = '', indent_str = '';","\t\t\t\t\tif (nodeName.search(this.newLineNodeRe) === -1) {","\t\t\t\t\t\tindent_str = '';","\t\t\t\t\t}else if(hasTextChild || !nodeName.search(this.inlineNodeRe)  === -1){","\t\t\t\t\t\t//text node","\t\t\t\t\t\tindent_str = ''+this._indenter(level);","\t\t\t\t\t}else{//inline block","\t\t\t\t\t\tnew_line = '\\n';","\t\t\t\t\t\tindent_str = ''+this._indenter(level);","\t\t\t\t\t}","\t\t\t\t\t","\t\t\t\t\tthis.html.push(indent_str+node_str);","\t\t\t\t\t","\t\t\t\t\t//if first child is not empty textnode, add new line","\t\t\t\t\tif (!hasTextChild){","\t\t\t\t\t\tthis.html.push(new_line);","\t\t\t\t\t}","\t\t\t\t\t","\t\t\t\t\tthis._dive(node,(level + 1));","\t\t\t\t}else if(node.nodeType === 3){","\t\t\t\t\t//text nodes (only non empty)","\t\t\t\t\tif(node.nodeValue.replace(this.trimRe, '').length > 0)","\t\t\t\t\t\tthis.html.push(node.nodeValue);\t\t\t","\t\t\t\t}else if(node.nodeType === 8){","\t\t\t\t\tthis.html.push(\"<!-- \"+node.nodeValue.replace(this.trimRe, '')+\" -->\\n\");//comment node","\t\t\t\t}","\t","\t\t\t\t","\t\t\t\tif (node.nodeType === 1) {","\t\t\t\t\tvar nodeName = node.nodeName.toLowerCase();","\t\t\t\t\t","\t\t\t\t\t//if to another level, close tag","\t\t\t\t\tif (nodeName.search(this.notCloseNodesRe) === -1) {\t\t","\t\t\t\t\t\tif (nodeName.search(this.newLineNodeRe) === -1) {","\t\t\t\t\t\t\tthis.html.push('</'+nodeName+'>');\t//just close tag","\t\t\t\t\t\t}else if(hasTextChild){","\t\t\t\t\t\t\t/* if has no childeren of main node, don't indent */","\t\t\t\t\t\t\tthis.html.push('</'+nodeName+'>\\n');","\t\t\t\t\t\t}else{","\t\t\t\t\t\t\tvar indent_str = this._indenter(level);","\t\t\t\t\t\t\tthis.html.push(indent_str+'</'+nodeName+'>\\n'); //new line node (block) end tag","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}","\t\t\t\t","\t\t\t\t//move to next","\t\t\t\tnode = node.nextSibling;","\t\t\t}           ","\t\t},","\t\t/**","\t\t*","\t\t* @method _indenter","\t\t* @protected","\t\t*/\t\t\t","\t\t_indenter: function(level){","\t\t\tvar indent_str = '';","\t\t\tfor(var i=0; i < level; i++){","\t\t\t\tindent_str = indent_str + this.indent; ","\t\t\t}\t","\t\t\treturn indent_str;","\t\t}","\t}","","}, 'gallery-2013.02.13-21-08', {","    \"skinnable\": true,","    \"requires\": [","        \"base\",","        \"editor\",","        \"event\",","        \"node\",","        \"panel\",","        \"overlay\",","        \"dd-drag\",","        \"dd-constrain\",","        \"uploader\",","        \"resize\",","        \"json\"","    ]","});","","}());"]};
}
var __cov_SQINQ6HyCOEnhyrOY0PHtg = __coverage__['build/gallery-editor-ui/gallery-editor-ui.js'];
__cov_SQINQ6HyCOEnhyrOY0PHtg.s['1']++;YUI.add('gallery-editor-ui',function(Y,NAME){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['1']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['2']++;function EditorUI(config){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['2']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['3']++;EditorUI.superclass.constructor.apply(this,arguments);}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['4']++;EditorUI.NAME='editor-ui';__cov_SQINQ6HyCOEnhyrOY0PHtg.s['5']++;EditorUI.ATTRS={textareaEl:{value:null,validator:Y.Lang.isString,writeOnce:true},formEl:{value:null,validator:Y.Lang.isString,writeOnce:true},editorClass:{value:'post',writeOnce:true},contentStylesheetUrl:{value:'/build/gallery-editor-ui/assets/gallery-editor-ui-content.css',writeOnce:true},uploadToUrl:{value:'/build/gallery-editor-ui/assets/fake-upload.html',validator:Y.Lang.isString,writeOnce:true},visualEditMode:{value:true},editor:null,textArea:null,baseEditor:null,frameInstance:null,linkWindow:null,mediaWindow:null,sizeWindow:null,flagPaste:null};__cov_SQINQ6HyCOEnhyrOY0PHtg.s['6']++;Y.extend(EditorUI,Y.Base,{regexps:{divToPElementsRe:/<(a|blockquote|dl|div|ol|p|pre|table|ul|img)/i,replaceBrsRe:/(<br[^>]*>[ \n\r\t]*){2,}/gi,replaceFontsRe:/<(\/?)font[^>]*>/gi,trimRe:/^\s+|\s+$/g,normalizeRe:/\s{2,}/g,killBreaksRe:/(<br\s*\/?>(\s|&nbsp;?)*){1,}/g},tag2cmd:{'b':'bold','strong':'bold','i':'italic','em':'italic','u':'underline','blockquote':'blockquote','img':'media','a':'link','ul':'insertunorderedlist','ol':'insertorderedlist','h2':'size','h3':'size'},styles:{'textDecoration':true,'fontWeight':true,'fontStyle':true,'textAlign':true,'color':false,'fontSize':false,'fontFamily':false,'backgroundColor':false},style2tag:{'strong':'strong','italic':'em','underline':'em'},textAreaTextDefault:'<p><br><p>',renderUI:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['3']++;},destructor:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['4']++;},initializer:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['5']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['7']++;var textArea,editor,textFrame,htmlFrame;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['8']++;if(this.get('textareaEl')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['1'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['9']++;textArea=Y.one(this.get('textareaEl'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['10']++;if(textArea){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['2'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['11']++;textArea.addClass('Ak');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['12']++;editor=Y.Node.create('<div style="width: '+textArea.getComputedStyle('width')+'""></div>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['13']++;textFrame=Y.Node.create('<div class="f9 Ar" style="display: none"></div>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['14']++;htmlFrame=Y.Node.create('<div class="f8 Ar"></div>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['15']++;textArea.wrap(textFrame);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['16']++;textFrame.wrap(editor);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['17']++;editor.appendChild(htmlFrame);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['18']++;this.set('textArea',textArea);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['19']++;this.set('editor',editor);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['2'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['20']++;return false;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['21']++;if(!Y.one('body').hasClass('yui3-skin-sam')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['3'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['22']++;Y.one('body').addClass('yui3-skin-sam');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['3'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['23']++;if(this.get('formEl')===null){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['4'][0]++;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['4'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['24']++;var baseEditor=new Y.EditorBase({defaultblock:'p',extracss:'body {margin: 0; padding: 0; overflow-y: scroll; overflow-x: hidden;} img, iframe, object, embed { -webkit-user-select: none; user-select: none; user-select: none;}',linkedcss:this.get('contentStylesheetUrl'),plugins:[Y.Plugin.EditorBr,Y.Plugin.EditorTab,Y.Plugin.EditorLists]});__cov_SQINQ6HyCOEnhyrOY0PHtg.s['25']++;this.set('baseEditor',baseEditor);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['26']++;Y.mix(baseEditor,{editorUI:this});__cov_SQINQ6HyCOEnhyrOY0PHtg.s['27']++;baseEditor.on('frame:ready',function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['6']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['28']++;this.set('frameInstance',baseEditor.getInstance());__cov_SQINQ6HyCOEnhyrOY0PHtg.s['29']++;this.get('frameInstance').one('body').addClass(this.get('editorClass')).addClass('editing');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['30']++;this.get('frameInstance').on('resizestart',Y.bind(function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['7']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['31']++;return false;},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['32']++;this._buildToolbar();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['33']++;this._registerCommands();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['34']++;this._initToolbar();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['35']++;this._toggleComposer(true);},this);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['36']++;this.set('linkWindow',new Y.Panel({modal:true,visible:false,centered:true,zIndex:150,shim:true,headerContent:'Add Link',bodyContent:'<table class="space"><tr><td>Text to display:</td><td><input id="linkdialog-text" style="width: 300px"></td></tr><tr><td>To what URL should this link go?</td><td><input id="linkdialog-input" type="url" style="width: 300px; margin-right: 5px;"><small><a href="#" id="testLink" target="_blank">test link</a></small></td></tr><tr><td colspan="2"><div class="Kj-JD-Jl"><button name="ok" id="linkSubmitButton">Insert Link</button><button name="cancel" class="linkHideWindow">Cancel</button></div></td></tr></table>',render:true}));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['37']++;this.set('mediaWindow',new Y.Panel({modal:true,visible:false,centered:true,zIndex:150,shim:true,headerContent:'Add Media',bodyContent:'<table class="space"><tr><td colspan="2"><div class="image-upload-frame"></div></td></tr><tr><td>URL:</td><td><input id="mediadialog-source" style="width: 300px" placeholder="http://"></td></tr><tr><td>Title:</td><td><input id="mediadialog-text" style="width: 300px" placeholder=""></td></tr><tr><td colspan="2"><div class="Kj-JD-Jl"><button name="ok" id="mediaSubmitButton">Add Media</button><button name="cancel" class="mediaHideWindow">Cancel</button></div></td></tr></table>',render:true}));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['38']++;this.set('sizeWindow',new Y.Overlay({visible:false,zIndex:150,shim:true,bodyContent:'<div class="J-M"><div class="J-N" role="menuitem" style="font-size: normal;" command="p">Paragraph</div><div class="J-N" role="menuitem" style="font-size: x-large;" command="h2">Header One</div><div class="J-N" role="menuitem" style="font-size: large;" command="h3">Header Two</div><div class="J-N" role="menuitem" style="font-size: 1.2em" command="h3">Header Three</div></div>',align:{node:'.eY',points:[Y.WidgetPositionAlign.TL,Y.WidgetPositionAlign.BL]},render:true}));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['39']++;Y.one('.mediaHideWindow').on('click',Y.bind(function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['8']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['40']++;this.get('mediaWindow').hide();},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['41']++;Y.one('.linkHideWindow').on('click',Y.bind(function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['9']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['42']++;this.get('linkWindow').hide();},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['43']++;baseEditor.render(htmlFrame);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['1'][1]++;}},_registerCommands:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['10']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['44']++;Y.mix(Y.Plugin.ExecCommand.COMMANDS,{bold:function(cmd){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['11']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['45']++;var inst=this.get('host').getInstance(),selection=new inst.Selection(),node,text='',editor=inst.host.editorUI;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['46']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['6'][0]++,selection)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['6'][1]++,selection.anchorNode.get('tagName')==='STRONG')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['5'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['47']++;if(!selection.isCollapsed){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['7'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['48']++;this._command('bold');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['7'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['49']++;this._command('bold');}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['5'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['50']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['9'][0]++,selection)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['9'][1]++,selection.anchorNode.get('tagName')==='BODY')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['8'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['51']++;return;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['8'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['52']++;if(selection){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['10'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['53']++;if(!selection.isCollapsed){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['11'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['54']++;node=selection.wrapContent('strong');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['55']++;selection.focusCursor(true,true);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['11'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['56']++;text=editor._getInnerText(selection.anchorNode);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['57']++;if(text.length>0){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['12'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['58']++;node=selection.insertContent('<strong>&nbsp;</strong>');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['12'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['59']++;node=selection.insertContent('<strong>&nbsp;</strong><br>');}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['60']++;selection.focusCursor(true,true);}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['10'][1]++;}}}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['61']++;return node;},italic:function(cmd){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['12']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['62']++;var inst=this.get('host').getInstance(),selection=new inst.Selection(),node,text='',editor=inst.host.editorUI;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['63']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['14'][0]++,selection)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['14'][1]++,selection.anchorNode.get('tagName')==='EM')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['13'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['64']++;if(!selection.isCollapsed){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['15'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['65']++;this._command('italic');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['15'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['66']++;this._command('italic');}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['13'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['67']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['17'][0]++,selection)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['17'][1]++,selection.anchorNode.get('tagName')==='BODY')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['16'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['68']++;return;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['16'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['69']++;if(selection){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['18'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['70']++;if(!selection.isCollapsed){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['19'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['71']++;node=selection.wrapContent('em');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['72']++;selection.focusCursor(true,true);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['19'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['73']++;text=editor._getInnerText(selection.anchorNode);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['74']++;if(text.length>0){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['20'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['75']++;node=selection.insertContent('<em>&nbsp;</em>');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['20'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['76']++;node=selection.insertContent('<em>&nbsp;</em><br>');}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['77']++;selection.focusCursor(true,true);}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['18'][1]++;}}}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['78']++;return node;},size:function(cmd,node){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['13']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['79']++;var inst=this.get('host').getInstance(),selection=new inst.Selection(),node,text='',editor=inst.host.editorUI;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['80']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['22'][0]++,selection)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['22'][1]++,selection.isCollapsed)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['21'][0]++;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['21'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['81']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['24'][0]++,node)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['24'][1]++,node.get('tagName'))){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['23'][0]++;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['23'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['82']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['26'][0]++,selection)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['26'][1]++,selection.anchorNode.get('tagName')==='P')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['25'][0]++;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['25'][1]++;}}}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['83']++;selection.focusCursor(true,true);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['84']++;if(editor.get('sizeWindow').get('visible')===true){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['27'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['85']++;editor.get('sizeWindow').setAttrs({visible:false});}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['27'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['86']++;editor.get('sizeWindow').setAttrs({visible:true});}},media:function(cmd,node){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['14']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['87']++;var inst=this.get('host').getInstance(),selection=new inst.Selection(),node,grid,text='',src='http://',editor=inst.host.editorUI;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['88']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['29'][0]++,node)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['29'][1]++,node.changedType==='mouseup')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['28'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['89']++;if(!selection.isCollapsed){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['30'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['90']++;return false;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['30'][1]++;}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['28'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['91']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['32'][0]++,selection)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['32'][1]++,selection.anchorNode)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['32'][2]++,selection.anchorNode.get('tagName')==='IMG')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['31'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['92']++;node=selection.anchorNode;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['93']++;text=node.get('title');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['94']++;src=node.get('src');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['31'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['95']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['34'][0]++,node)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['34'][1]++,node.get('tagName')==='IMG')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['33'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['96']++;text=node.get('title');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['97']++;src=node.get('src');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['33'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['98']++;if(selection){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['35'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['99']++;if(!selection.isCollapsed){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['36'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['100']++;text=selection.text;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['36'][1]++;}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['35'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['101']++;inst.focus();}}}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['102']++;var frame=editor.get('mediaWindow').get('contentBox').one('.image-upload-frame');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['103']++;var parent_width=editor.get('editor').get('offsetWidth');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['104']++;var cfg={cellImageSizes:{height:'300px',width:parent_width},frameEl:frame,resizeHeight:true,uploadToUrl:this.get('uploadToUrl')};__cov_SQINQ6HyCOEnhyrOY0PHtg.s['105']++;if(node){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['37'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['106']++;cfg=Y.mix(cfg,{file:src,cellImageSizes:{width:node.getStyle('width'),height:node.getStyle('height')}},true);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['37'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['107']++;var g=new Y.EditorImageManage(cfg);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['108']++;g.on('upload:start',Y.bind(function(event){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['15']++;},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['109']++;g.on('upload:error',Y.bind(function(event){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['16']++;},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['110']++;g.on('upload:complete',Y.bind(function(event){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['17']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['111']++;var data=Y.JSON.parse(event.data);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['112']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['39'][0]++,data)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['39'][1]++,data.status===1)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['38'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['113']++;Y.one('#mediadialog-source').set('value',data.file);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['38'][1]++;}},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['114']++;Y.one('#mediadialog-source').set('value',src);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['115']++;Y.one('#mediadialog-text').set('value',text);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['116']++;Y.one('#mediaSubmitButton').destroy();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['117']++;Y.one('#mediaSubmitButton').on('click',Y.bind(function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['18']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['118']++;e.preventDefault();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['119']++;if(node){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['40'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['120']++;node.set('src',Y.one('#mediadialog-source').get('value'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['121']++;node.set('title',Y.one('#mediadialog-text').get('value'));}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['40'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['122']++;this.command('insertandfocus','<img src="'+Y.one('#mediadialog-source').get('value')+'" title="'+Y.one('#mediadialog-text').get('value')+'">'+editor.textAreaTextDefault);}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['123']++;editor.get('mediaWindow').hide();},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['124']++;editor.get('mediaWindow').setAttrs({visible:true});},link:function(cmd,node){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['19']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['125']++;var inst=this.get('host').getInstance(),selection=new inst.Selection(),node,text='',href='http://',editor=inst.host.editorUI;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['126']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['42'][0]++,node)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['42'][1]++,node.changedType==='mouseup')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['41'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['127']++;if(!selection.isCollapsed){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['43'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['128']++;return false;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['43'][1]++;}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['41'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['129']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['45'][0]++,selection)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['45'][1]++,selection.anchorNode)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['45'][2]++,selection.anchorNode.get('tagName')==='A')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['44'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['130']++;node=selection.anchorNode;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['131']++;text=node.get('text');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['132']++;href=node.get('href');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['44'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['133']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['47'][0]++,node)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['47'][1]++,node.get('tagName')==='A')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['46'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['134']++;text=node.get('text');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['135']++;href=node.get('href');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['46'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['136']++;if(selection){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['48'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['137']++;if(!selection.isCollapsed){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['49'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['138']++;text=selection.text;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['49'][1]++;}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['48'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['139']++;inst.focus();}}}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['140']++;Y.one('#linkdialog-text').set('value',text);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['141']++;Y.one('#linkdialog-input').set('value',href);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['142']++;Y.one('#testLink').destroy();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['143']++;Y.one('#testLink').on('mousedown',Y.bind(function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['20']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['144']++;e.preventDefault();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['145']++;e.currentTarget.set('href',Y.one('#linkdialog-input').get('value'));},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['146']++;Y.one('#linkSubmitButton').destroy();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['147']++;Y.one('#linkSubmitButton').on('click',Y.bind(function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['21']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['148']++;e.preventDefault();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['149']++;var href,text;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['150']++;text=Y.one('#linkdialog-text').get('value');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['151']++;href=Y.one('#linkdialog-input').get('value');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['152']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['51'][0]++,text.length>0)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['51'][1]++,href!=='http://')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['50'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['153']++;if(node){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['52'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['154']++;node.set('href',href);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['155']++;node.set('text',text);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['52'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['156']++;this.command('insertandfocus','<a href="'+href+'">'+text+'</a>');}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['50'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['157']++;this.command('unlink');}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['158']++;editor.get('linkWindow').hide();},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['159']++;editor.get('linkWindow').setAttrs({visible:true});},blockquote:function(cmd){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['22']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['160']++;var inst=this.get('host').getInstance(),selection=new inst.Selection(),node,text='',editor=inst.host.editorUI;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['161']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['54'][0]++,selection)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['54'][1]++,selection.anchorNode.get('tagName')==='BLOCKQUOTE')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['53'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['162']++;if(!selection.isCollapsed){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['55'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['163']++;this._command('outdent');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['55'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['164']++;this._command('outdent');}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['53'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['165']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['57'][0]++,selection)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['57'][1]++,selection.anchorNode.get('tagName')==='BODY')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['56'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['166']++;return;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['56'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['167']++;if(selection){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['58'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['168']++;if(!selection.isCollapsed){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['59'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['169']++;node=selection.wrapContent('blockquote');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['170']++;selection.focusCursor(true,true);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['59'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['171']++;node=selection.insertContent('<blockquote>&nbsp;</blockquote>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['172']++;selection.focusCursor(true,true);}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['58'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['173']++;this._command('blockquote');}}}},clear:function(cmd){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['23']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['174']++;var inst=this.get('host').getInstance(),selection=new inst.Selection(),node;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['175']++;var answer=confirm('You will lose the html formatting. Are you sure?');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['176']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['61'][0]++,answer)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['61'][1]++,selection.anchorNode)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['60'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['177']++;if(selection.anchorNode.get('parentNode').get('tagName')==='BODY'){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['62'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['178']++;selection.anchorNode.set('outerHTML','<p>'+selection.anchorNode.get('text')+'<br></p>');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['62'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['179']++;selection.anchorNode.set('outerHTML',selection.anchorNode.get('text'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['180']++;selection.focusCursor(true,true);}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['60'][1]++;}}});},_buildToolbar:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['24']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['181']++;var editor=this.get('editor'),toolbars=Y.Node.create('<div class="toolbars"></div>'),html_toolbar=Y.Node.create('<div class="html_toolbar"></div>'),plain_toolbar=Y.Node.create('<div class="plain_toolbar" style="display: none"></div>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['182']++;var toolbar_buttons=[{fn:'bold',cls:'eN'},{fn:'italic',cls:'e3'},{fn:'underline',cls:'fu'},{fn:'size',cls:'eY',desc:'Format size',arrow:true},{fn:'media',cls:'QT',desc:'Insert image'},{fn:'link',cls:'e5',desc:'Insert link'},{fn:'insertorderedlist',cls:'e6',desc:'Ordered list'},{fn:'insertunorderedlist',cls:'eO',desc:'Unordered list'},{fn:'outdent',cls:'e8',desc:'Outdent'},{fn:'indent',cls:'e2',desc:'Indent'},{fn:'blockquote',cls:'fa',desc:'Insert blockquote'},{fn:'justifyleft',cls:'e4',desc:'Align text left'},{fn:'justifycenter',cls:'eP',desc:'Center text'},{fn:'justifyright',cls:'fc',desc:'Align text right'},{fn:'justifyfull',cls:'fd',desc:'Text justified'},{fn:'clear',cls:'fb',desc:'Clear formatting selection'}];__cov_SQINQ6HyCOEnhyrOY0PHtg.s['183']++;Y.Object.each(toolbar_buttons,function(button){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['25']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['184']++;html_toolbar.appendChild(this._createToolbarButton(button));},this);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['185']++;html_toolbar.appendChild(Y.Node.create('<div class="button switch e9">Edit HTML</div>'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['186']++;toolbars.appendChild(html_toolbar);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['187']++;plain_toolbar.appendChild(Y.Node.create('<div class="button switch k9">Rich formatting</div>'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['188']++;plain_toolbar.appendChild(this._createToolbarButton({fn:'format',cls:'u9','desc':'Format HTML'}));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['189']++;toolbars.appendChild(plain_toolbar);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['190']++;editor.insert(toolbars,editor.one('*'));},_createToolbarButton:function(cfg){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['26']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['191']++;return Y.Node.create('<div class="button" role="button" title="'+(cfg.desc?(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['63'][0]++,cfg.desc):(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['63'][1]++,cfg.fn))+'" command="'+cfg.fn+'"><div class="'+cfg.cls+' icon"></div></div>');},_initToolbar:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['27']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['192']++;var editor=this.get('editor'),sizeWindow=this.get('sizeWindow');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['193']++;editor.all('.html_toolbar div[role=button]').each(function(node){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['28']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['194']++;node.on('mousedown',function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['29']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['195']++;e.preventDefault();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['196']++;var command=e.currentTarget.getAttribute('command');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['197']++;if(command){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['64'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['198']++;var node=this.get('baseEditor').execCommand(command);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['64'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['199']++;return false;},this);},this);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['200']++;sizeWindow.get('contentBox').all('div[role=menuitem]').each(function(node){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['30']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['201']++;node.on('mousedown',Y.bind(function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['31']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['202']++;e.preventDefault();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['203']++;var inst=this.get('baseEditor').getInstance(),selection=new inst.Selection(),target=e.currentTarget;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['204']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['66'][0]++,selection)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['66'][1]++,!selection.isCollapsed)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['65'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['205']++;if(style=target.getAttribute('data-style')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['67'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['206']++;var style=style.split(': ');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['207']++;selection.anchorNode.setStyle(style[0],style[1]);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['67'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['208']++;if(command=target.getAttribute('command')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['68'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['209']++;this.get('baseEditor').execCommand('formatblock',target.getAttribute('command'));}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['68'][1]++;}}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['210']++;selection.focusCursor(true,true);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['65'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['211']++;if(command=target.getAttribute('command')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['69'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['212']++;this.get('baseEditor').execCommand('insertandfocus','<'+target.getAttribute('command')+'>&nbsp;<br></'+target.getAttribute('command')+'>');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['69'][1]++;}}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['213']++;this.get('sizeWindow').hide();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['214']++;return false;},this));},this);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['215']++;this.get('baseEditor').before('nodeChange',function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['32']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['216']++;switch(e.changedType){case'backspace-up':__cov_SQINQ6HyCOEnhyrOY0PHtg.b['70'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['217']++;if(Y.UA.webkit){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['71'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['218']++;e.preventDefault();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['219']++;e.stopPropagation();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['220']++;return false;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['71'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['221']++;break;}},this);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['222']++;this.get('baseEditor').after('nodeChange',function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['33']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['223']++;switch(e.changedType){case'enter':__cov_SQINQ6HyCOEnhyrOY0PHtg.b['72'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['224']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['74'][0]++,e.changedNode.get('tagName')==='BLOCKQUOTE')&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['74'][1]++,!e.changedEvent.shiftKey)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['73'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['225']++;e.preventDefault();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['226']++;this.get('baseEditor').execCommand('insertandfocus','</blockquote><p><br></p>');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['73'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['227']++;break;case'keyup':__cov_SQINQ6HyCOEnhyrOY0PHtg.b['72'][1]++;case'mousedown':__cov_SQINQ6HyCOEnhyrOY0PHtg.b['72'][2]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['228']++;this._updateButtons(e);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['229']++;break;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['230']++;e.classNames='';__cov_SQINQ6HyCOEnhyrOY0PHtg.s['231']++;e.fontFamily='';__cov_SQINQ6HyCOEnhyrOY0PHtg.s['232']++;e.fontSize='';__cov_SQINQ6HyCOEnhyrOY0PHtg.s['233']++;e.fontColor='';__cov_SQINQ6HyCOEnhyrOY0PHtg.s['234']++;e.backgroundColor='';},this);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['235']++;this.get('baseEditor').before('nodeChange',function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['34']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['236']++;switch(e.changedType){case'paste':__cov_SQINQ6HyCOEnhyrOY0PHtg.b['75'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['237']++;this.flagPaste=true;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['238']++;break;case'keyup':__cov_SQINQ6HyCOEnhyrOY0PHtg.b['75'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['239']++;if(this.flagPaste===true){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['76'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['240']++;e.changedNode.set('innerHTML',e.changedNode.get('text'));}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['76'][1]++;}default:__cov_SQINQ6HyCOEnhyrOY0PHtg.b['75'][2]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['241']++;this.flagPaste=false;}},this);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['242']++;this.get('baseEditor').after('nodeChange',function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['35']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['243']++;if(e.changedType==='mouseup'){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['77'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['244']++;e.preventDefault();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['245']++;var node=e.changedNode;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['246']++;node.changedType=e.changedType;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['247']++;if(node.get('tagName')==='A'){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['78'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['248']++;this.get('baseEditor').execCommand('link',node);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['78'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['249']++;if(node.get('tagName')==='IMG'){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['79'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['250']++;this.get('baseEditor').execCommand('media',node);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['79'][1]++;}}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['77'][1]++;}},this);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['251']++;editor.one('.e9').on('click',Y.bind(this._toggleComposer,this,false));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['252']++;editor.one('.k9').on('click',Y.bind(this._toggleComposer,this,true));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['253']++;editor.one('.u9').on('click',Y.bind(this._formatHtml,this,true));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['254']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['81'][0]++,this.get('formEl'))&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['81'][1]++,Y.all(this.get('formEl')).size()===1)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['80'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['255']++;Y.one(this.get('formEl')).before('submit',Y.bind(this.submitForm,this));}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['80'][1]++;}},_formatHtml:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['36']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['256']++;if(!(typeof EditorHTMLFormatter==='undefined')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['82'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['257']++;var html=this.get('textArea').get('value');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['258']++;this.get('baseEditor').set('content',html);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['259']++;var formatted_html=EditorHTMLFormatter.init(this.get('frameInstance').one('body'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['260']++;this.get('textArea').set('value',formatted_html);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['82'][1]++;}},_updateButtons:function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['37']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['261']++;var editor=this.get('editor'),node=e.changedNode,cmds=e.commands;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['262']++;if(node){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['83'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['263']++;var parents=this.get('baseEditor').getDomPath(node,false);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['264']++;editor.all('.html_toolbar div[role=button]').removeClass('active');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['265']++;Y.each(parents,function(node){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['38']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['266']++;var cmd=this.tag2cmd[node.tagName.toLowerCase()];__cov_SQINQ6HyCOEnhyrOY0PHtg.s['267']++;if(cmd){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['84'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['268']++;editor.all('.html_toolbar div[role=button]').each(function(node){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['39']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['269']++;if(node.getAttribute('command')===cmd){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['85'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['270']++;node.addClass('active');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['85'][1]++;}});}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['84'][1]++;}},this);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['83'][1]++;}},_toggleComposer:function(toggle){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['40']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['271']++;var editor=this.get('editor');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['272']++;try{__cov_SQINQ6HyCOEnhyrOY0PHtg.s['273']++;this.set('visualEditMode',toggle);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['274']++;if(toggle===true){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['86'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['275']++;this.get('baseEditor').set('content',this._formatDom()+this.textAreaTextDefault);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['276']++;editor.one('.html_toolbar').setStyle('display','block');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['277']++;editor.one('.plain_toolbar').setStyle('display','none');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['278']++;editor.one('.f9').setStyle('display','none');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['279']++;editor.one('.f8').setStyle('display','block');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['86'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['280']++;this.get('textArea').set('value',this._cleanDom());__cov_SQINQ6HyCOEnhyrOY0PHtg.s['281']++;editor.one('.html_toolbar').setStyle('display','none');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['282']++;editor.one('.plain_toolbar').setStyle('display','block');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['283']++;editor.one('.f9').setStyle('display','block');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['284']++;editor.one('.f8').setStyle('display','none');}}catch(err){}},_formatDom:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['41']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['285']++;var content=this.get('textArea').get('value');;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['286']++;if(content.length<1){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['87'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['287']++;return'';}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['87'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['288']++;return content;},_cleanNodes:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['42']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['289']++;var tags=this.get('frameInstance').one('body').all('*');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['290']++;tags.each(function(node){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['43']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['291']++;if(node.ancestor('.gridbuilder',true)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['88'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['292']++;return;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['88'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['293']++;if(node.get('tagName')==='B'){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['89'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['294']++;var newNode=Y.Node.create('<strong></strong>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['295']++;newNode.set('innerHTML',node.get('innerHTML'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['296']++;node.replace(newNode);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['89'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['297']++;if(node.get('tagName')==='I'){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['90'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['298']++;var newNode=Y.Node.create('<em></em>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['299']++;newNode.set('innerHTML',node.get('innerHTML'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['300']++;node.replace(newNode);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['90'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['301']++;if(node.get('tagName')==='SPAN'){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['91'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['302']++;var flag=false;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['303']++;Y.each(this.styles,function(value,key){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['44']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['304']++;style=node.getStyle(key);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['305']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['93'][0]++,value===true)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['93'][1]++,style)&&((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['93'][2]++,style!=='normal')&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['93'][3]++,style!=='justify')&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['93'][4]++,style!=='none')&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['93'][5]++,style!=='start'))){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['92'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['306']++;flag=true;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['92'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['307']++;node.setStyle(key,'');}});__cov_SQINQ6HyCOEnhyrOY0PHtg.s['308']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['95'][0]++,flag===false)||(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['95'][1]++,node.hasClass('Apple-style-span'))){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['94'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['309']++;node.get('parentNode').insertBefore(node.get('childNodes'),node);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['310']++;node.remove();}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['94'][1]++;}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['91'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['311']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['97'][0]++,node.get('tagName')==='DIV')&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['97'][1]++,this._getInnerText(node,true).length>0)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['96'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['312']++;if(node.get('innerHTML').search(this.regexps.divToPElementsRe)===-1){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['98'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['313']++;var newNode=Y.Node.create('<p></p>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['314']++;newNode.set('innerHTML',node.get('innerHTML'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['315']++;node.replace(newNode);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['98'][1]++;}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['96'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['316']++;if(node.get('tagName').match(/^(ul|ol|blockquote|p|li|em|strong|h3|h2)$/i)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['99'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['317']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['101'][0]++,this._getInnerText(node,true).length===0)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['101'][1]++,node.all('img, iframe, object, br').size()===0)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['100'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['318']++;node.remove();}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['100'][1]++;}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['99'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['319']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['103'][0]++,node.get('tagName')==='P')&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['103'][1]++,this._getInnerText(node,true).length===0)&&((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['103'][2]++,node.one('*'))&&((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['103'][3]++,node.one('*').get('tagName')==='IFRAME')||(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['103'][4]++,node.one('*').get('tagName')==='IMG')))){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['102'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['320']++;var newNode=Y.Node.create('<div></div>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['321']++;newNode.addClass('media');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['322']++;newNode.set('innerHTML',node.get('innerHTML'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['323']++;node.replace(newNode);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['102'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['324']++;if(node.get('tagName')==='VAR'){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['104'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['325']++;node.get('parentNode').insertBefore(node.get('childNodes'),node);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['326']++;node.remove();}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['104'][1]++;}},this);},_cleanDom:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['45']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['327']++;this._cleanNodes();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['328']++;var textContent=this.get('baseEditor').getContent();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['329']++;textContent=textContent.replace(this.regexps.replaceBrsRe,'</p><p>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['330']++;textContent=textContent.replace(/&nbsp;/gi,' ');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['331']++;textContent=textContent.replace(/<br>([\S+])?<p>/gi,'<p>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['332']++;textContent=textContent.replace(/<\/p>([\S+])?<br>/gi,'</p>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['333']++;textContent=textContent.replace(/<(div|p|span)>([\S+])?(<br>)?<\/(div|p|span)>/gi,'');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['334']++;textContent=textContent.replace(/ style=""/gi,'');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['335']++;return textContent;},_getInnerText:function(e,normalizeSpaces){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['46']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['336']++;var textContent='';__cov_SQINQ6HyCOEnhyrOY0PHtg.s['337']++;normalizeSpaces=typeof normalizeSpaces==='undefined'?(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['105'][0]++,true):(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['105'][1]++,normalizeSpaces);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['338']++;textContent=e.get('text').replace(this.regexps.trimRe,'');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['339']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['107'][0]++,normalizeSpaces)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['107'][1]++,!e.hasChildNodes())){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['106'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['340']++;e.set('text',textContent.replace(this.regexps.normalizeRe,' '));}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['106'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['341']++;return textContent;},submitForm:function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['47']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['342']++;if(this.get('visualEditMode')===true){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['108'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['343']++;this.get('textArea').set('value',this._cleanDom());}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['108'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['344']++;this.get('textArea').set('value',this._formatDom());},getContent:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['48']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['345']++;if(this.get('visualEditMode')===true){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['109'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['346']++;this.get('textArea').set('value',this._cleanDom());}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['109'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['347']++;return this._formatDom();},test:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['49']++;}});__cov_SQINQ6HyCOEnhyrOY0PHtg.s['348']++;Y.EditorUI=EditorUI;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['349']++;function EditorImageManage(config){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['50']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['350']++;EditorImageManage.superclass.constructor.apply(this,arguments);}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['351']++;EditorImageManage.NAME='EditorImageManage';__cov_SQINQ6HyCOEnhyrOY0PHtg.s['352']++;EditorImageManage.ATTRS={frameEl:{value:null,writeOnce:true},uploadToUrl:{value:'/build/gallery-editor-ui/assets/fake-upload.html',validator:Y.Lang.isString,writeOnce:true},resizeHeight:{value:true,validator:Y.Lang.isBoolean,writeOnce:true},drawUI:{value:true},file:null,cellImageSizes:{value:{width:0,height:0},setter:function(cellImageSizes){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['51']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['353']++;cellImageSizes.height=parseInt(cellImageSizes.height,10);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['354']++;cellImageSizes.width=parseInt(cellImageSizes.width,10);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['355']++;return cellImageSizes;}},canvasImageSizes:{value:{width:0,height:0},setter:function(canvasImageSizes){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['52']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['356']++;canvasImageSizes.height=parseInt(canvasImageSizes.height,10);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['357']++;canvasImageSizes.width=parseInt(canvasImageSizes.width,10);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['358']++;return canvasImageSizes;}},cell:null,top:{value:0},left:{value:0},img:null,img_src:null,zoom:{value:1},resize:{value:1}};__cov_SQINQ6HyCOEnhyrOY0PHtg.s['359']++;Y.extend(EditorImageManage,Y.Base,{renderUI:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['53']++;},destructor:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['54']++;},initializer:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['55']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['360']++;var cellImageSizes=this.get('cellImageSizes'),canvasImageSizes=this.get('canvasImageSizes'),frameEl=this.get('frameEl'),cell;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['361']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['111'][0]++,frameEl)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['111'][1]++,frameEl._node)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['110'][0]++;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['110'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['362']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['113'][0]++,frameEl)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['113'][1]++,Y.one(frameEl))){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['112'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['363']++;frameEl=Y.one(this.get('frameEl'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['364']++;this.set('frameEl',frameEl);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['112'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['365']++;return;}}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['366']++;this.publish('upload:start');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['367']++;this.publish('upload:error');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['368']++;this.publish('upload:complete');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['369']++;cell=Y.Node.create('<div class="visual"></div>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['370']++;this.set('cell',cell);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['371']++;frameEl.empty().appendChild(cell);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['372']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['115'][0]++,canvasImageSizes.width===0)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['115'][1]++,canvasImageSizes.height===0)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['114'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['373']++;canvasImageSizes={width:cellImageSizes.width,height:cellImageSizes.height};}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['114'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['374']++;this.set('canvasImageSizes',canvasImageSizes);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['375']++;cell.setStyle('width',cellImageSizes.width+'px').setStyle('height',cellImageSizes.height+'px');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['376']++;this.uploadCanvas=Y.Node.create('<canvas class="canvas"></canvas>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['377']++;this.uploadTo=this.uploadCanvas.invoke('getContext','2d');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['378']++;this.uploadCanvasCopy=Y.Node.create('<canvas class="canvas"></canvas>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['379']++;this.uploadToCopy=this.uploadCanvasCopy.invoke('getContext','2d');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['380']++;this.uploadButton=Y.Node.create('<input type="file" class="upload" accept="image/*">');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['381']++;cell.appendChild(this.uploadButton);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['382']++;cell.appendChild(this.uploadCanvas);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['383']++;if(this.get('drawUI')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['116'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['384']++;this.zoomBtns=Y.Node.create('<div class="zoom button in" title="Zoom In">+</div> <div class=" zoom button out" title="Zoom Out">-</div>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['385']++;this.zoomBtns.one('.in').on('click',Y.bind(function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['56']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['386']++;var zoom=parseFloat(this.get('zoom')*1.05);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['387']++;this.set('zoom',zoom);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['388']++;this.drawCanvas();},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['389']++;this.zoomBtns.one('.out').on('click',Y.bind(function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['57']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['390']++;var zoom=parseFloat(this.get('zoom')*0.95);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['391']++;if(zoom>1){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['117'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['392']++;this.set('zoom',zoom);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['117'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['393']++;this.set('zoom',1);}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['394']++;this.drawCanvas();},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['395']++;cell.appendChild(this.zoomBtns);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['396']++;this.saveBtn=Y.Node.create('<a class="save button" title="Save image">Save</a>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['397']++;this.saveBtn.on('click',Y.bind(function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['58']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['398']++;this.saveImage();},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['399']++;cell.appendChild(this.saveBtn);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['400']++;this.clearBtn=Y.Node.create('<a class="delete button" title="Remove image">x</a>');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['401']++;this.clearBtn.on('click',Y.bind(function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['59']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['402']++;this.get('cell').removeClass('active');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['403']++;this.clearCanvas();},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['404']++;cell.appendChild(this.clearBtn);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['405']++;if(this.get('resizeHeight')===true){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['118'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['406']++;var heightInpt=Y.Node.create('<input class="heightRow" value="'+cellImageSizes.height+'px">');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['407']++;heightInpt.on(['blur','submit'],Y.bind(function(evt){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['60']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['408']++;var row=evt.currentTarget.get('parentNode');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['409']++;var height=parseInt(evt.currentTarget.get('value'),10);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['410']++;if(height>10){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['119'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['411']++;this.setHeight(height+6);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['119'][1]++;}},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['412']++;cell.appendChild(heightInpt);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['118'][1]++;}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['116'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['413']++;if(this.get('resizeHeight')===true){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['120'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['414']++;var resize=new Y.Resize({node:frameEl,handles:'b',minHeight:55,maxHeight:600,preserveRatio:false});__cov_SQINQ6HyCOEnhyrOY0PHtg.s['415']++;resize.on('resize:resize',Y.bind(function(event){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['61']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['416']++;var cell=event.currentTarget.get('node');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['417']++;var height=parseInt(event.currentTarget.info.offsetHeight,10);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['418']++;this.setHeight(height);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['419']++;cell.all('.heightRow').set('value',height-6+'px');},this));}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['120'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['420']++;if(this.get('file')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['121'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['421']++;this.set('img',Y.Node.create('<img>'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['422']++;this.get('img').on('load',Y.bind(this.prepareImg,this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['423']++;this.get('img').on('error',Y.bind(this.errorImg,this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['424']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['123'][0]++,this.get('file').indexOf(document.location.hostname)>0)||(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['123'][1]++,this.get('file').substr(0,1)==='/')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['122'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['425']++;this.get('img').set('src',this.get('file'));}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['122'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['426']++;this.get('img').set('src',this.get('uploadToUrl')+'?proxy='+encodeURIComponent(this.get('file')));}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['427']++;this.uploadCanvas.setStyle('position','relative');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['428']++;this.uploadCanvas.setStyle('top',this.get('top')+'px');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['429']++;this.uploadCanvas.setStyle('left',this.get('left')+'px');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['121'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['430']++;this.uploadButton.on('change',Y.bind(this.loadLocalImage,this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['431']++;Y.on('windowresize',Y.bind(this.contrainMove,this));},support:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['62']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['432']++;if(!((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['125'][0]++,window.File)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['125'][1]++,window.FileReader)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['125'][2]++,window.FileList)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['125'][3]++,window.Blob))){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['124'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['433']++;return false;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['124'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['434']++;return true;},loadLocalImage:function(evt){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['63']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['435']++;this.clearCanvas();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['436']++;this.set('img',Y.Node.create('<img>'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['437']++;this.get('img').detach('load');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['438']++;this.get('img').on('load',Y.bind(this.prepareImg,this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['439']++;var files=evt.target.get('files');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['440']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['127'][0]++,files)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['127'][1]++,files.size()>0)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['126'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['441']++;var file=files._nodes[0];__cov_SQINQ6HyCOEnhyrOY0PHtg.s['442']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['129'][0]++,typeof FileReader!=='undefined')&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['129'][1]++,file.type.indexOf('image')!==-1)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['128'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['443']++;var reader=new FileReader();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['444']++;reader.onload=Y.bind(function(evt){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['64']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['445']++;this.get('img').set('src',evt.target.result);},this);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['446']++;reader.readAsDataURL(file);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['128'][1]++;}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['126'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['447']++;evt.stopPropagation();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['448']++;evt.preventDefault();},prepareImg:function(evt){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['65']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['449']++;this.set('img_src',evt.target._node);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['450']++;this.uploadCanvasCopy.set('width',evt.target._node.width);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['451']++;this.uploadCanvasCopy.set('height',evt.target._node.height);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['452']++;this.uploadToCopy.drawImage(evt.target._node,0,0,evt.target._node.width,evt.target._node.height);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['453']++;this.drawCanvas();},errorImg:function(evt){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['66']++;},drawCanvas:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['67']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['454']++;var img=this.get('img'),img_src=this.get('img_src'),canvasImageSizes=this.get('canvasImageSizes'),cell=this.get('cell');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['455']++;cell.addClass('active');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['456']++;var newDimensions=this.resizeDimensions(img_src,canvasImageSizes);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['457']++;img_src.width=newDimensions.width;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['458']++;img_src.height=newDimensions.height;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['459']++;img_src.height=img_src.height*this.get('zoom');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['460']++;img_src.width=img_src.width*this.get('zoom');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['461']++;this.uploadCanvas.set('width',img_src.width);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['462']++;this.uploadCanvas.set('height',img_src.height);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['463']++;this.set('resize',this.uploadCanvasCopy.get('height')/this.uploadCanvas.get('height'));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['464']++;this.uploadTo.drawImage(img_src,0,0,img_src.width,img_src.height);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['465']++;this.contrainMove();},resizeDimensions:function(node,minDimensions){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['68']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['466']++;var ratio=node.height/node.width;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['467']++;var newDimensions={height:node.height,width:node.width,resize:100};__cov_SQINQ6HyCOEnhyrOY0PHtg.s['468']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['131'][0]++,node.width>=minDimensions.width)||(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['131'][1]++,node.height>=minDimensions.height)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['130'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['469']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['133'][0]++,minDimensions.width<=minDimensions.height)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['133'][1]++,node.height<=node.width)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['133'][2]++,node.height>=minDimensions.height)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['132'][0]++;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['132'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['470']++;if(node.width>=minDimensions.width){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['134'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['471']++;newDimensions.width=minDimensions.width;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['472']++;newDimensions.height=Math.round(minDimensions.width*ratio);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['134'][1]++;}}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['130'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['473']++;return newDimensions;},contrainMove:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['69']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['474']++;var img=this.get('img'),cell=this.get('cell');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['475']++;var offsetTop=parseInt(this.uploadCanvas.getStyle('top'),10);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['476']++;var offsetLeft=parseInt(this.uploadCanvas.getStyle('left'),10);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['477']++;if(this.uploadCanvas.get('width')<parseInt(cell.getStyle('width'),10)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['135'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['478']++;var fillWidth=parseInt(cell.getStyle('width'),10)-this.uploadCanvas.get('width');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['135'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['479']++;var fillWidth=0;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['480']++;if(this.uploadCanvas.get('height')<parseInt(cell.getStyle('height'),10)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['136'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['481']++;var fillHeight=parseInt(cell.getStyle('height'),10)-this.uploadCanvas.get('height');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['136'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['482']++;var fillHeight=0;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['483']++;var location=this.uploadCanvas.getXY();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['484']++;if(this.drag){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['137'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['485']++;this.drag.destroy();}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['137'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['486']++;this.drag=new Y.DD.Drag({node:this.uploadCanvas}).plug(Y.Plugin.DDConstrained,{constrain:{top:location[1]-offsetTop-(this.uploadCanvas.get('height')-(this.uploadCanvas.get('height')>parseInt(cell.getStyle('height'),10)?(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['138'][0]++,parseInt(cell.getStyle('height'),10)):(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['138'][1]++,this.uploadCanvas.get('height')))),left:location[0]-offsetLeft-(this.uploadCanvas.get('width')-(this.uploadCanvas.get('width')>parseInt(cell.getStyle('width'),10)?(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['139'][0]++,parseInt(cell.getStyle('width'),10)):(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['139'][1]++,this.uploadCanvas.get('width')))),right:location[0]+this.uploadCanvas.get('width')+fillWidth-offsetLeft,bottom:location[1]+this.uploadCanvas.get('height')+fillHeight-offsetTop}});__cov_SQINQ6HyCOEnhyrOY0PHtg.s['487']++;this.drag.on('drag:end',Y.bind(function(e){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['70']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['488']++;this.set('top',parseInt(this.uploadCanvas.getStyle('top'),10));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['489']++;this.set('left',parseInt(this.uploadCanvas.getStyle('left'),10));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['490']++;this.contrainMove();},this));},clearCanvas:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['71']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['491']++;this.uploadCanvas.setStyle('top','0px');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['492']++;this.uploadCanvas.setStyle('left','0px');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['493']++;this.set('zoom',1);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['494']++;this.uploadTo.clearRect(0,0,this.uploadCanvas.get('width'),this.uploadCanvas.get('height'));},convertToBlob:function(dataURI){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['72']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['495']++;var binary=atob(dataURI.split(',')[1]);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['496']++;var array=[];__cov_SQINQ6HyCOEnhyrOY0PHtg.s['497']++;for(var i=0;i<binary.length;i++){__cov_SQINQ6HyCOEnhyrOY0PHtg.s['498']++;array.push(binary.charCodeAt(i));}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['499']++;return new Blob([new Uint8Array(array)],{type:'image/jpeg'});},getFile:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['73']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['500']++;if(this.get('cell').hasClass('active')){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['140'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['501']++;var blob=this.convertToBlob(this.getImage());__cov_SQINQ6HyCOEnhyrOY0PHtg.s['502']++;Y.FileHTML5.prototype._isValidFile=function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['74']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['503']++;return true;};__cov_SQINQ6HyCOEnhyrOY0PHtg.s['504']++;return new Y.FileHTML5({file:blob});}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['140'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['505']++;return false;}},getFileDetails:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['75']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['506']++;var cellImageSizes=this.get('cellImageSizes');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['507']++;return{top:this.get('top'),left:this.get('left'),zoom:this.get('zoom'),width:cellImageSizes.width,height:cellImageSizes.height,resize:this.get('resize')};},getImage:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['76']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['508']++;return this.uploadCanvasCopy._node.toDataURL('image/jpeg','0.8');},setHeight:function(pixels){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['77']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['509']++;var cellImageSizes=this.get('cellImageSizes');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['510']++;cellImageSizes.height=pixels-6;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['511']++;this.set('cellImageSizes',cellImageSizes);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['512']++;this.get('cell').setStyle('height',cellImageSizes.height+'px').setStyle('width',cellImageSizes.width+'px');__cov_SQINQ6HyCOEnhyrOY0PHtg.s['513']++;this.contrainMove();},saveImage:function(){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['78']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['514']++;var file=this.getFile();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['515']++;if(file){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['141'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['516']++;var uploader=new Y.UploaderHTML5();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['517']++;uploader.on('uploadstart',Y.bind(function(event){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['79']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['518']++;this.fire('upload:start',event);},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['519']++;uploader.on('uploaderror',Y.bind(function(event){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['80']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['520']++;this.fire('upload:error',event);},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['521']++;uploader.on('uploadcomplete',Y.bind(function(event){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['81']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['522']++;this.fire('upload:complete',event);},this));__cov_SQINQ6HyCOEnhyrOY0PHtg.s['523']++;uploader.upload(file,this.get('uploadToUrl'),this.getFileDetails());}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['141'][1]++;}}});__cov_SQINQ6HyCOEnhyrOY0PHtg.s['524']++;Y.EditorImageManage=EditorImageManage;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['525']++;var EditorHTMLFormatter={html:[],indent:'  ',trimRe:/^\s+|\s+$/gi,inlineNodeRe:/^(img|br|sup|sub)$/i,newLineNodeRe:/^(div|p|img|blockquote|q|iframe|pre|code|table|tbody|th|td|tr|ul|ol|li|h1|h2|h3|h4|h5|h6|dl|dt|dd|form|fieldset|legend|iframe)$/i,notCloseNodesRe:/^(img|br)$/i,firstNodeRe:/^(<[^>]+>)/i,replaceNodesRe:/^(script|style|meta|body|head|title|link)/i,keepAttributesRe:/^(src|style|width|height|class|title|alt|data-)/i,init:function(dom){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['82']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['526']++;this.html=[];__cov_SQINQ6HyCOEnhyrOY0PHtg.s['527']++;if(dom===null){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['142'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['528']++;return'';}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['142'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['529']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['144'][0]++,dom)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['144'][1]++,dom._node)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['143'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['530']++;this._dive(dom.getDOMNode(),0);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['143'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['531']++;this._dive(dom,0);}}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['532']++;return this.html.join('');},_dive:function(e,level){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['83']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['533']++;var node=e.firstChild;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['534']++;if(!e){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['145'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['535']++;return;}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['145'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['536']++;while(node!==null){__cov_SQINQ6HyCOEnhyrOY0PHtg.s['537']++;var hasTextChild=(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['146'][0]++,node.hasChildNodes()>0)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['146'][1]++,node.firstChild.nodeType===3)&&(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['146'][2]++,node.firstChild.nodeValue.replace(this.trimRe,'').length>0);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['538']++;if(node.nodeType===1){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['147'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['539']++;var nodeName=node.nodeName.toLowerCase();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['540']++;var collection=node.attributes;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['541']++;var node_str='<'+nodeName;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['542']++;for(var i=0;i<collection.length;i++){__cov_SQINQ6HyCOEnhyrOY0PHtg.s['543']++;node_str+=' '+collection[i].name+'="'+collection[i].value+'"';}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['544']++;node_str+='>';__cov_SQINQ6HyCOEnhyrOY0PHtg.s['545']++;var new_line='',indent_str='';__cov_SQINQ6HyCOEnhyrOY0PHtg.s['546']++;if(nodeName.search(this.newLineNodeRe)===-1){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['148'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['547']++;indent_str='';}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['148'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['548']++;if((__cov_SQINQ6HyCOEnhyrOY0PHtg.b['150'][0]++,hasTextChild)||(__cov_SQINQ6HyCOEnhyrOY0PHtg.b['150'][1]++,!nodeName.search(this.inlineNodeRe)===-1)){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['149'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['549']++;indent_str=''+this._indenter(level);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['149'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['550']++;new_line='\n';__cov_SQINQ6HyCOEnhyrOY0PHtg.s['551']++;indent_str=''+this._indenter(level);}}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['552']++;this.html.push(indent_str+node_str);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['553']++;if(!hasTextChild){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['151'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['554']++;this.html.push(new_line);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['151'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['555']++;this._dive(node,level+1);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['147'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['556']++;if(node.nodeType===3){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['152'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['557']++;if(node.nodeValue.replace(this.trimRe,'').length>0){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['153'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['558']++;this.html.push(node.nodeValue);}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['153'][1]++;}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['152'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['559']++;if(node.nodeType===8){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['154'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['560']++;this.html.push('<!-- '+node.nodeValue.replace(this.trimRe,'')+' -->\n');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['154'][1]++;}}}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['561']++;if(node.nodeType===1){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['155'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['562']++;var nodeName=node.nodeName.toLowerCase();__cov_SQINQ6HyCOEnhyrOY0PHtg.s['563']++;if(nodeName.search(this.notCloseNodesRe)===-1){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['156'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['564']++;if(nodeName.search(this.newLineNodeRe)===-1){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['157'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['565']++;this.html.push('</'+nodeName+'>');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['157'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['566']++;if(hasTextChild){__cov_SQINQ6HyCOEnhyrOY0PHtg.b['158'][0]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['567']++;this.html.push('</'+nodeName+'>\n');}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['158'][1]++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['568']++;var indent_str=this._indenter(level);__cov_SQINQ6HyCOEnhyrOY0PHtg.s['569']++;this.html.push(indent_str+'</'+nodeName+'>\n');}}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['156'][1]++;}}else{__cov_SQINQ6HyCOEnhyrOY0PHtg.b['155'][1]++;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['570']++;node=node.nextSibling;}},_indenter:function(level){__cov_SQINQ6HyCOEnhyrOY0PHtg.f['84']++;__cov_SQINQ6HyCOEnhyrOY0PHtg.s['571']++;var indent_str='';__cov_SQINQ6HyCOEnhyrOY0PHtg.s['572']++;for(var i=0;i<level;i++){__cov_SQINQ6HyCOEnhyrOY0PHtg.s['573']++;indent_str=indent_str+this.indent;}__cov_SQINQ6HyCOEnhyrOY0PHtg.s['574']++;return indent_str;}};},'gallery-2013.02.13-21-08',{'skinnable':true,'requires':['base','editor','event','node','panel','overlay','dd-drag','dd-constrain','uploader','resize','json']});
