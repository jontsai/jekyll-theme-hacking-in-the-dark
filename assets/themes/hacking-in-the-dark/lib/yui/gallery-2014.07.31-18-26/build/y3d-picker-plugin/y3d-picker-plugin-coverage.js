if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/y3d-picker-plugin/y3d-picker-plugin.js']) {
   __coverage__['build/y3d-picker-plugin/y3d-picker-plugin.js'] = {"path":"build/y3d-picker-plugin/y3d-picker-plugin.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":29},"end":{"line":1,"column":48}}},"2":{"name":"Picker","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":18}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":14},"end":{"line":16,"column":25}}},"4":{"name":"(anonymous_4)","line":21,"loc":{"start":{"line":21,"column":7},"end":{"line":21,"column":22}}},"5":{"name":"(anonymous_5)","line":38,"loc":{"start":{"line":38,"column":12},"end":{"line":38,"column":31}}},"6":{"name":"(anonymous_6)","line":48,"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":27}}},"7":{"name":"(anonymous_7)","line":56,"loc":{"start":{"line":56,"column":19},"end":{"line":56,"column":30}}},"8":{"name":"(anonymous_8)","line":89,"loc":{"start":{"line":89,"column":10},"end":{"line":89,"column":21}}},"9":{"name":"(anonymous_9)","line":99,"loc":{"start":{"line":99,"column":21},"end":{"line":99,"column":40}}},"10":{"name":"(anonymous_10)","line":115,"loc":{"start":{"line":115,"column":21},"end":{"line":115,"column":32}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":126,"column":57}},"2":{"start":{"line":3,"column":0},"end":{"line":5,"column":1}},"3":{"start":{"line":4,"column":1},"end":{"line":4,"column":54}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":23}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":21}},"6":{"start":{"line":10,"column":0},"end":{"line":11,"column":2}},"7":{"start":{"line":13,"column":0},"end":{"line":122,"column":3}},"8":{"start":{"line":17,"column":2},"end":{"line":17,"column":46}},"9":{"start":{"line":18,"column":2},"end":{"line":18,"column":54}},"10":{"start":{"line":22,"column":2},"end":{"line":27,"column":9}},"11":{"start":{"line":29,"column":2},"end":{"line":29,"column":30}},"12":{"start":{"line":30,"column":2},"end":{"line":30,"column":79}},"13":{"start":{"line":31,"column":2},"end":{"line":31,"column":32}},"14":{"start":{"line":33,"column":2},"end":{"line":33,"column":86}},"15":{"start":{"line":35,"column":2},"end":{"line":35,"column":27}},"16":{"start":{"line":39,"column":2},"end":{"line":43,"column":40}},"17":{"start":{"line":45,"column":2},"end":{"line":45,"column":107}},"18":{"start":{"line":49,"column":2},"end":{"line":49,"column":22}},"19":{"start":{"line":51,"column":2},"end":{"line":51,"column":30}},"20":{"start":{"line":52,"column":2},"end":{"line":52,"column":21}},"21":{"start":{"line":53,"column":2},"end":{"line":53,"column":32}},"22":{"start":{"line":57,"column":2},"end":{"line":61,"column":40}},"23":{"start":{"line":63,"column":2},"end":{"line":84,"column":3}},"24":{"start":{"line":64,"column":3},"end":{"line":64,"column":31}},"25":{"start":{"line":65,"column":3},"end":{"line":65,"column":47}},"26":{"start":{"line":66,"column":3},"end":{"line":66,"column":37}},"27":{"start":{"line":67,"column":3},"end":{"line":67,"column":29}},"28":{"start":{"line":69,"column":3},"end":{"line":69,"column":52}},"29":{"start":{"line":70,"column":3},"end":{"line":70,"column":120}},"30":{"start":{"line":72,"column":3},"end":{"line":72,"column":64}},"31":{"start":{"line":73,"column":3},"end":{"line":73,"column":95}},"32":{"start":{"line":74,"column":3},"end":{"line":74,"column":56}},"33":{"start":{"line":76,"column":3},"end":{"line":76,"column":45}},"34":{"start":{"line":78,"column":3},"end":{"line":78,"column":61}},"35":{"start":{"line":79,"column":3},"end":{"line":79,"column":112}},"36":{"start":{"line":80,"column":3},"end":{"line":80,"column":118}},"37":{"start":{"line":81,"column":3},"end":{"line":81,"column":49}},"38":{"start":{"line":83,"column":3},"end":{"line":83,"column":38}},"39":{"start":{"line":86,"column":2},"end":{"line":86,"column":60}},"40":{"start":{"line":90,"column":2},"end":{"line":94,"column":39}},"41":{"start":{"line":96,"column":2},"end":{"line":96,"column":21}},"42":{"start":{"line":97,"column":2},"end":{"line":97,"column":26}},"43":{"start":{"line":99,"column":2},"end":{"line":112,"column":5}},"44":{"start":{"line":100,"column":3},"end":{"line":100,"column":44}},"45":{"start":{"line":102,"column":3},"end":{"line":102,"column":31}},"46":{"start":{"line":104,"column":3},"end":{"line":104,"column":89}},"47":{"start":{"line":105,"column":3},"end":{"line":105,"column":89}},"48":{"start":{"line":107,"column":3},"end":{"line":107,"column":58}},"49":{"start":{"line":109,"column":3},"end":{"line":109,"column":32}},"50":{"start":{"line":111,"column":3},"end":{"line":111,"column":25}},"51":{"start":{"line":116,"column":2},"end":{"line":118,"column":26}},"52":{"start":{"line":120,"column":2},"end":{"line":120,"column":53}},"53":{"start":{"line":124,"column":0},"end":{"line":124,"column":38}}},"branchMap":{"1":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":2},"end":{"line":63,"column":2}},{"start":{"line":63,"column":2},"end":{"line":63,"column":2}}]}},"code":["(function () { YUI.add('y3d-picker-plugin', function (Y, NAME) {","","function Picker() {","\tPicker.superclass.constructor.apply(this, arguments);","}","","Picker.NAME = \"picker\";","Picker.NS = \"picker\";","","Picker.ATTRS = {","};","","Y.extend(Picker, Y.Plugin.Base, {","\tframeBuffer: null,","","\tinitializer: function() {","\t\tthis.afterHostMethod(\"add\", this._afterAdd);","\t\tthis.beforeHostMethod(\"render\", this._beforeRender);","\t},","","\tpick: function(x, y) {","\t\tvar instance = this,","\t\t\thost = instance.get('host'),","\t\t\tcontext = host.context,","\t\t\tgeometries = host.get('geometries'),","\t\t\treadout = new Uint8Array(4),","\t\t\tcolor;","","\t\tinstance._bindFrameBuffer();","\t\tcontext.readPixels(x, y, 1, 1, context.RGBA, context.UNSIGNED_BYTE, readout);","\t\tinstance._unbindFrameBuffer();","","\t\tcolor = readout[0].toString(16) + readout[1].toString(16) + readout[2].toString(16);","","\t\treturn geometries[color];","\t},","","\t_afterAdd: function(geometry) {","\t\tvar instance = this,","\t\t\thost = instance.get('host'),","\t\t\tcontext = host.context,","\t\t\tid = geometry.get('id'),","\t\t\tpickerColor = geometry._setColor(id);","","\t\thost._loadBufferData(geometry, context.ARRAY_BUFFER, new Float32Array(pickerColor), 'pickerColorBuffer');","\t},","","\t_beforeRender: function() {","\t\tvar instance = this;","","\t\tinstance._bindFrameBuffer();","\t\tinstance._render();","\t\tinstance._unbindFrameBuffer();","\t},","","\t_bindFrameBuffer: function() {","\t\tvar instance = this,","\t\t\thost = instance.get('host'),","\t\t\tcontext = host.context,","\t\t\tframeBuffer = instance.frameBuffer,","\t\t\theight, renderBuffer, texture, width;","","\t\tif (!frameBuffer) {","\t\t\theight = host.get('height');","\t\t\trenderBuffer = context.createRenderbuffer();","\t\t\ttexture = context.createTexture();","\t\t\twidth = host.get('width');","","\t\t\tcontext.bindTexture(context.TEXTURE_2D, texture);","\t\t\tcontext.texImage2D(context.TEXTURE_2D, 0, context.RGBA, width, height, 0, context.RGBA, context.UNSIGNED_BYTE, null);","","\t\t\tcontext.bindRenderbuffer(context.RENDERBUFFER, renderBuffer);","\t\t\tcontext.renderbufferStorage(context.RENDERBUFFER, context.DEPTH_COMPONENT16, width, height);","\t\t\tcontext.bindRenderbuffer(context.RENDERBUFFER, null);","","\t\t\tframeBuffer = context.createFramebuffer();","","\t\t\tcontext.bindFramebuffer(context.FRAMEBUFFER, frameBuffer);","\t\t\tcontext.framebufferTexture2D(context.FRAMEBUFFER, context.COLOR_ATTACHMENT0, context.TEXTURE_2D, texture, 0);","\t\t\tcontext.framebufferRenderbuffer(context.FRAMEBUFFER, context.DEPTH_ATTACHMENT, context.RENDERBUFFER, renderBuffer);","\t\t\tcontext.bindTexture(context.TEXTURE_2D, null);","","\t\t\tinstance.frameBuffer = frameBuffer;","\t\t}","","\t\tcontext.bindFramebuffer(context.FRAMEBUFFER, frameBuffer);","\t},","","\t_render: function() {","\t\tvar instance = this,","\t\t\thost = instance.get('host'),","\t\t\tcontext = host.context,","\t\t\tprojectionMatrix = host._createProjectionMatrix(),","\t\t\tgeometries = host.get('geometries');","","\t\thost._clearColor();","\t\thost._enableDepthTest();","","\t\tY.each(geometries, function(geometry) {","\t\t\tvar program = host._getProgram(geometry);","","\t\t\tcontext.useProgram(program);","","\t\t\thost._setVertexAttribute(geometry.pickerColorBuffer, program.vertexColorAttribute, 4);","\t\t\thost._setVertexAttribute(geometry.verticesBuffer, program.vertexPositionAttribute, 3);","","\t\t\thost._setUniforms(program, geometry, projectionMatrix);","","\t\t\thost._drawGeometry(geometry);","","\t\t\thost._unbindBuffers();","\t\t});","\t},","","\t_unbindFrameBuffer: function() {","\t\tvar instance = this,","\t\t\thost = instance.get('host'),","\t\t\tcontext = host.context;","","\t\tcontext.bindFramebuffer(context.FRAMEBUFFER, null);","\t}","});","","Y.namespace(\"Plugin\").Picker = Picker;","","}, 'gallery-2013.08.22-21-03', {\"requires\": [\"plugin\"]});","","}());"]};
}
var __cov_HpM1v785RC0XZE0whzAzug = __coverage__['build/y3d-picker-plugin/y3d-picker-plugin.js'];
__cov_HpM1v785RC0XZE0whzAzug.s['1']++;YUI.add('y3d-picker-plugin',function(Y,NAME){__cov_HpM1v785RC0XZE0whzAzug.f['1']++;__cov_HpM1v785RC0XZE0whzAzug.s['2']++;function Picker(){__cov_HpM1v785RC0XZE0whzAzug.f['2']++;__cov_HpM1v785RC0XZE0whzAzug.s['3']++;Picker.superclass.constructor.apply(this,arguments);}__cov_HpM1v785RC0XZE0whzAzug.s['4']++;Picker.NAME='picker';__cov_HpM1v785RC0XZE0whzAzug.s['5']++;Picker.NS='picker';__cov_HpM1v785RC0XZE0whzAzug.s['6']++;Picker.ATTRS={};__cov_HpM1v785RC0XZE0whzAzug.s['7']++;Y.extend(Picker,Y.Plugin.Base,{frameBuffer:null,initializer:function(){__cov_HpM1v785RC0XZE0whzAzug.f['3']++;__cov_HpM1v785RC0XZE0whzAzug.s['8']++;this.afterHostMethod('add',this._afterAdd);__cov_HpM1v785RC0XZE0whzAzug.s['9']++;this.beforeHostMethod('render',this._beforeRender);},pick:function(x,y){__cov_HpM1v785RC0XZE0whzAzug.f['4']++;__cov_HpM1v785RC0XZE0whzAzug.s['10']++;var instance=this,host=instance.get('host'),context=host.context,geometries=host.get('geometries'),readout=new Uint8Array(4),color;__cov_HpM1v785RC0XZE0whzAzug.s['11']++;instance._bindFrameBuffer();__cov_HpM1v785RC0XZE0whzAzug.s['12']++;context.readPixels(x,y,1,1,context.RGBA,context.UNSIGNED_BYTE,readout);__cov_HpM1v785RC0XZE0whzAzug.s['13']++;instance._unbindFrameBuffer();__cov_HpM1v785RC0XZE0whzAzug.s['14']++;color=readout[0].toString(16)+readout[1].toString(16)+readout[2].toString(16);__cov_HpM1v785RC0XZE0whzAzug.s['15']++;return geometries[color];},_afterAdd:function(geometry){__cov_HpM1v785RC0XZE0whzAzug.f['5']++;__cov_HpM1v785RC0XZE0whzAzug.s['16']++;var instance=this,host=instance.get('host'),context=host.context,id=geometry.get('id'),pickerColor=geometry._setColor(id);__cov_HpM1v785RC0XZE0whzAzug.s['17']++;host._loadBufferData(geometry,context.ARRAY_BUFFER,new Float32Array(pickerColor),'pickerColorBuffer');},_beforeRender:function(){__cov_HpM1v785RC0XZE0whzAzug.f['6']++;__cov_HpM1v785RC0XZE0whzAzug.s['18']++;var instance=this;__cov_HpM1v785RC0XZE0whzAzug.s['19']++;instance._bindFrameBuffer();__cov_HpM1v785RC0XZE0whzAzug.s['20']++;instance._render();__cov_HpM1v785RC0XZE0whzAzug.s['21']++;instance._unbindFrameBuffer();},_bindFrameBuffer:function(){__cov_HpM1v785RC0XZE0whzAzug.f['7']++;__cov_HpM1v785RC0XZE0whzAzug.s['22']++;var instance=this,host=instance.get('host'),context=host.context,frameBuffer=instance.frameBuffer,height,renderBuffer,texture,width;__cov_HpM1v785RC0XZE0whzAzug.s['23']++;if(!frameBuffer){__cov_HpM1v785RC0XZE0whzAzug.b['1'][0]++;__cov_HpM1v785RC0XZE0whzAzug.s['24']++;height=host.get('height');__cov_HpM1v785RC0XZE0whzAzug.s['25']++;renderBuffer=context.createRenderbuffer();__cov_HpM1v785RC0XZE0whzAzug.s['26']++;texture=context.createTexture();__cov_HpM1v785RC0XZE0whzAzug.s['27']++;width=host.get('width');__cov_HpM1v785RC0XZE0whzAzug.s['28']++;context.bindTexture(context.TEXTURE_2D,texture);__cov_HpM1v785RC0XZE0whzAzug.s['29']++;context.texImage2D(context.TEXTURE_2D,0,context.RGBA,width,height,0,context.RGBA,context.UNSIGNED_BYTE,null);__cov_HpM1v785RC0XZE0whzAzug.s['30']++;context.bindRenderbuffer(context.RENDERBUFFER,renderBuffer);__cov_HpM1v785RC0XZE0whzAzug.s['31']++;context.renderbufferStorage(context.RENDERBUFFER,context.DEPTH_COMPONENT16,width,height);__cov_HpM1v785RC0XZE0whzAzug.s['32']++;context.bindRenderbuffer(context.RENDERBUFFER,null);__cov_HpM1v785RC0XZE0whzAzug.s['33']++;frameBuffer=context.createFramebuffer();__cov_HpM1v785RC0XZE0whzAzug.s['34']++;context.bindFramebuffer(context.FRAMEBUFFER,frameBuffer);__cov_HpM1v785RC0XZE0whzAzug.s['35']++;context.framebufferTexture2D(context.FRAMEBUFFER,context.COLOR_ATTACHMENT0,context.TEXTURE_2D,texture,0);__cov_HpM1v785RC0XZE0whzAzug.s['36']++;context.framebufferRenderbuffer(context.FRAMEBUFFER,context.DEPTH_ATTACHMENT,context.RENDERBUFFER,renderBuffer);__cov_HpM1v785RC0XZE0whzAzug.s['37']++;context.bindTexture(context.TEXTURE_2D,null);__cov_HpM1v785RC0XZE0whzAzug.s['38']++;instance.frameBuffer=frameBuffer;}else{__cov_HpM1v785RC0XZE0whzAzug.b['1'][1]++;}__cov_HpM1v785RC0XZE0whzAzug.s['39']++;context.bindFramebuffer(context.FRAMEBUFFER,frameBuffer);},_render:function(){__cov_HpM1v785RC0XZE0whzAzug.f['8']++;__cov_HpM1v785RC0XZE0whzAzug.s['40']++;var instance=this,host=instance.get('host'),context=host.context,projectionMatrix=host._createProjectionMatrix(),geometries=host.get('geometries');__cov_HpM1v785RC0XZE0whzAzug.s['41']++;host._clearColor();__cov_HpM1v785RC0XZE0whzAzug.s['42']++;host._enableDepthTest();__cov_HpM1v785RC0XZE0whzAzug.s['43']++;Y.each(geometries,function(geometry){__cov_HpM1v785RC0XZE0whzAzug.f['9']++;__cov_HpM1v785RC0XZE0whzAzug.s['44']++;var program=host._getProgram(geometry);__cov_HpM1v785RC0XZE0whzAzug.s['45']++;context.useProgram(program);__cov_HpM1v785RC0XZE0whzAzug.s['46']++;host._setVertexAttribute(geometry.pickerColorBuffer,program.vertexColorAttribute,4);__cov_HpM1v785RC0XZE0whzAzug.s['47']++;host._setVertexAttribute(geometry.verticesBuffer,program.vertexPositionAttribute,3);__cov_HpM1v785RC0XZE0whzAzug.s['48']++;host._setUniforms(program,geometry,projectionMatrix);__cov_HpM1v785RC0XZE0whzAzug.s['49']++;host._drawGeometry(geometry);__cov_HpM1v785RC0XZE0whzAzug.s['50']++;host._unbindBuffers();});},_unbindFrameBuffer:function(){__cov_HpM1v785RC0XZE0whzAzug.f['10']++;__cov_HpM1v785RC0XZE0whzAzug.s['51']++;var instance=this,host=instance.get('host'),context=host.context;__cov_HpM1v785RC0XZE0whzAzug.s['52']++;context.bindFramebuffer(context.FRAMEBUFFER,null);}});__cov_HpM1v785RC0XZE0whzAzug.s['53']++;Y.namespace('Plugin').Picker=Picker;},'gallery-2013.08.22-21-03',{'requires':['plugin']});
