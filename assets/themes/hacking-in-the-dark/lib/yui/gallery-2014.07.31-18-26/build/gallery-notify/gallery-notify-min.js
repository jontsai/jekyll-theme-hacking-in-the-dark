YUI.add("gallery-notify",function(e,t){var n="init",r="started",i=e.Lang,s="boundingBox",o="contentBox",u="closable",a="default",f="icon",l,c;l=e.Base.create("notify",e.Widget,[e.WidgetParent,e.EventTarget],{CONTENT_TEMPLATE:"<ul/>",initializer:function(){this.publish(n,{broadcast:1}),this.publish(r,{broadcast:1}),this.fire(n),this._buildChildConfig()},bindUI:function(){this.after("addChild",this._updateVisibility,this),this.after("removeChild",this._updateVisibility,this)},syncUI:function(){this._updateVisibility(),this.fire(r)},addMessage:function(e,t,n){var r=e;return t||(t=a),typeof r!="object"&&(r=this._buildChildConfig(e,t)),n&&(r.index=n),this._addMessage(r)},addMessages:function(t){var n=[];return e.Array.each(t,e.bind(function(e){n.push(this._addMessage(e))},this)),new e.ArrayList(n)},closeAll:function(){return this.each(function(e){e.close()}),this},_updateVisibility:function(){this.set("visible",this.size()>0)},_addMessage:function(e){var t=e.index;return this._mixInChildConfig(e),t?this.add(e,t):this.get("prepend")?this.add(e,0):this.add(e)},_buildChildConfig:function(e,t){return{closable:this.get(u),timeout:this.get("timeout"),flag:this.get("flag"),message:e,icon:t}},_mixInChildConfig:function(t){return e.mix(t,{closable:this.get(u),timeout:this.get("timeout"),flag:this.get("flag")})},_getConstructor:function(t){return typeof t=="string"?e.Object.getValue(e,t.split(".")):t}},{ATTRS:{closable:{value:!0,validator:i.isBoolean},defaultChildType:{value:"Notify.Message",setter:"_getConstructor"},flag:{},prepend:{value:!1,validator:i.isBoolean},timeout:{value:8e3}},EVENTS:{INIT:n,STARTED:r}}),c=e.Base.create("notify-message",e.Widget,[e.WidgetChild],{BOUNDING_TEMPLATE:"<li/>",CONTENT_TEMPLATE:"<div/>",CLOSE_TEMPLATE:'<span class="{class}">{label}</span>',closeClass:null,_timer:null,initializer:function(){var e=this.get(s),t=this.get("flag");this._initStrings(),e.setStyles(this.get("initStyle")),this.closeClass===null&&(this.closeClass=this.getClassName("close")),t&&e.addClass(this.getClassName(t))},renderUI:function(){var e=this.get(o),t=this.get(s),n;e.set("text",this.get("message")),this.get(u)&&(t.addClass(this.getClassName(u)),n=this._buildCloseButton(),t.append(n))},bindUI:function(){this._bindHover(),this.get(s).delegate("click",this.close,"."+this.closeClass,this)},syncUI:function(){this.timer=new e.Timer({length:this.get("timeout"),repeatCount:1,callback:e.bind(this.close,this)}),this.get(s).transition(this.get("transitionIn"),e.bind(function(){this.timer.start()},this))},close:function(){this.timer&&(this.timer.stop(),this.timer=null);var t=this.get(s);t.transition(this.get("transitionOut"),e.bind(function(){this.remove(!0)},this))},_bindHover:function(){var t=this.get(s);t.on("mouseenter",e.bind(this._onMouseEnter,this)),t.on("mouseleave",e.bind(this._onMouseLeave,this))},_onMouseEnter:function(){this.timer.pause()},_onMouseLeave:function(){this.timer&&this.timer.resume()},_buildCloseButton:function(){var t=this.get("strings");return e.Node.create(e.Lang.sub(this.CLOSE_TEMPLATE,{"class":this.closeClass,label:t.close}))},_setIconFn:function(e){return this.get(s).replaceClass(this.getClassName(f,this.get(f)||a),this.getClassName(f,e||a)),e},_initStrings:function(){this.set("strings",e.mix(this.get("strings")||{},e.Intl.get("gallery-notify")))}},{ATTRS:{closable:{value:!0,validator:i.isBoolean},flag:{},message:{validator:i.isString},timeout:{value:8e3},icon:{validator:i.isString,setter:"_setIconFn",lazyAdd:!1},initStyle:{value:{opacity:0}},strings:{},transitionIn:{value:{opacity:1}},transitionOut:{value:{opacity:0}}}}),e.Notify=l,e.Notify.Message=c},"gallery-2013.06.26-23-09",{requires:["base","widget","widget-parent","widget-child","intl","event-mouseenter","transition","gallery-timer"],lang:["en"],skinnable:!0});
