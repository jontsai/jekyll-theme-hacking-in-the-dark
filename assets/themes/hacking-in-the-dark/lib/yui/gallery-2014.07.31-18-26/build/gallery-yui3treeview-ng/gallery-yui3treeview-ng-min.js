YUI.add("gallery-yui3treeview-ng",function(b){var e=b.ClassNameManager.getClassName,h="boundingBox",i="contentBox",f="treeview",k="treenode",g="checkboxtreeview",c="checkboxtreenode",a={tree:e(k),content:e(k,"content"),label:e(k,"label"),labelContent:e(k,"label-content"),toggle:e(k,"toggle-control"),collapsed:e(k,"collapsed"),leaf:e(k,"leaf"),lastnode:e(k,"last"),checkbox:e(c,"checkbox")},l={unchecked:10,halfchecked:20,checked:30},j={10:e(c,"checkbox-unchecked"),20:e(c,"checkbox-halfchecked"),30:e(c,"checkbox-checked")},d;d=function(o,m){var q=o.all(m),n=Array(),p;q.each(function(r){p={srcNode:r,boundingBox:r,contentBox:r.one("> ul")};n.push(p);});return n;};b.TreeView=b.Base.create(f,b.Widget,[b.WidgetParent],{CONTENT_TEMPLATE:"<ul></ul>",initializer:function(m){this.publish("nodeToggle",{defaultFn:this._nodeToggleDefaultFn});this.publish("nodeCollapse",{defaultFn:this._nodeCollapseDefaultFn});this.publish("nodeExpand",{defaultFn:this._nodeExpandDefaultFn});this.publish("nodeClick",{defaultFn:this._nodeClickDefaultFn});},_nodeClickDefaultFn:function(m){},_nodeToggleDefaultFn:function(m){if(m.treenode.get("collapsed")){this.fire("nodeExpand",{treenode:m.treenode});}else{this.fire("nodeCollapse",{treenode:m.treenode});}},_nodeCollapseDefaultFn:function(m){m.treenode.collapse();},_nodeExpandDefaultFn:function(m){m.treenode.expand();},_setChildEventHandlers:function(){var m;this.after("addChild",function(n){m=n.child.get("parent");if(n.child.get("isLast")&&m.size()>1){m.item(n.child.get("index")-1)._unmarkLast();}});this.on("removeChild",function(n){m=n.child.get("parent");if((m.size()==1)||n.child.get("index")===0){return;}if(n.child.get("isLast")){m.item(n.child.get("index")-1)._markLast();}});},_onClickEvents:function(o){var p=o.target,n=b.Widget.getByNode(p),m=false;o.preventDefault();n=b.Widget.getByNode(p);if(!n instanceof b.TreeNode){return;}if(n.get("isLeaf")){return;}b.Array.each(p.get("className").split(" "),function(q){switch(q){case a.toggle:m=true;break;case a.labelContent:if(this.get("toggleOnLabelClick")){m=true;}break;}},this);if(m){this.fire("nodeToggle",{treenode:n});}},_onKeyEvents:function(o){var p=o.target,n=b.Widget.getByNode(p),m=o.keyCode,q=n.get("collapsed");if(n.get("isLeaf")){return;}if(((m==39)&&q)||((m==37)&&!q)){this.fire("nodeToggle",{treenode:n});}},bindUI:function(){var m=this.get(h);m.on("click",this._onClickEvents,this);m.on("keypress",this._onKeyEvents,this);m.delegate("click",b.bind(function(o){var n=b.Widget.getByNode(o.target);if(n instanceof b.TreeNode){this.fire("nodeclick",{treenode:n});}},this),"."+a.label);this._setChildEventHandlers();m.plug(b.Plugin.NodeFocusManager,{descendants:".yui3-treenode-label",keys:{next:"down:40",previous:"down:38"},circular:false});}},{NAME:f,ATTRS:{defaultChildType:{value:"TreeNode",readOnly:true},toggleOnLabelClick:{value:true,validator:b.Lang.isBoolean},startCollapsed:{value:true,validator:b.Lang.isBoolean},loadOnDemand:{value:false,validator:b.Lang.isBoolean}},HTML_PARSER:{children:function(m){return d(m,"> li");}}});b.TreeNode=b.Base.create(k,b.Widget,[b.WidgetParent,b.WidgetChild],{_renderFromMarkup:false,CONTENT_TEMPLATE:"<ul></ul>",BOUNDING_TEMPLATE:"<li></li>",TREENODELABEL_TEMPLATE:"<a class={labelClassName} role='treeitem' href='#'></a>",TREENODELABELCONTENT_TEMPLATE:"<span class={labelContentClassName}>{label}</span>",TOGGLECONTROL_TEMPLATE:"<span class={toggleClassName}></span>",bindUI:function(){b.TreeView.prototype._setChildEventHandlers.apply(this,arguments);},renderUI:function(){var o=this.get(h),t,r,q,s,p,n,m;p=b.substitute(this.TOGGLECONTROL_TEMPLATE,{toggleClassName:a.toggle});m=this.get("isLeaf");if(this._renderFromMarkup){t=o.one(":first-child");t.set("role","treeitem");t.addClass(a.label);q=t.removeChild(t.one(":first-child"));q.addClass(a.labelContent);}else{n=this.get("label");r=b.substitute(this.TREENODELABEL_TEMPLATE,{labelClassName:a.label});s=b.substitute(this.TREENODELABELCONTENT_TEMPLATE,{labelContentClassName:a.labelContent,label:n});q=s;t=b.Node.create(r);o.prepend(t);}if(!m){t.appendChild(p).appendChild(q);}else{t.append(q);}o.set("role","presentation");if(!m){if(this.get("root").get("startCollapsed")){o.addClass(a.collapsed);}else{if(this.size()===0){o.addClass(a.collapsed);}}}if(m){o.addClass(a.leaf);}if(this.get("isLast")){this._markLast();}},_markLast:function(){this.get(h).addClass(a.lastnode);},_unmarkLast:function(){this.get(h).removeClass(a.lastnode);},collapse:function(){var m=this.get(h);if(!m.hasClass(a.collapsed)){m.toggleClass(a.collapsed);}},expand:function(){var m=this.get(h);if(m.hasClass(a.collapsed)){m.toggleClass(a.collapsed);}},toggleState:function(){this.get(h).toggleClass(a.collapsed);},path:function(m){var o=Array(),n=this;if(!m){m={};}if(!m.labelAttr){m.labelAttr="label";}while(n&&(n instanceof b.TreeNode)){o.unshift(n.get(m.labelAttr));n=n.get("parent");}if(m.reverse){o=o.reverse();}return o;},_getToggleControlNode:function(){return this.get(h).one("."+a.toggle);},_getLabelContentNode:function(){return this.get(h).one("."+a.labelContent);}},{NAME:k,ATTRS:{defaultChildType:{value:"TreeNode",readOnly:true},label:{validator:b.Lang.isString,value:""},loadOnDemand:{value:false,validator:b.Lang.isBoolean},collapsed:{value:null,getter:function(){return this.get(h).hasClass(a.collapsed);},readOnly:true},clabel:{value:"",validator:b.Lang.isString},nodeId:{value:"",validator:b.Lang.isString},isLeaf:{value:null,getter:function(){return(this.size()>0?false:true)&&(!this.get("loadOnDemand"));},readOnly:true},isLast:{value:null,getter:function(){return(this.get("index")+1==this.get("parent").size());},readOnly:true}},HTML_PARSER:{children:function(m){return d(m,"> ul > li");},label:function(n){var m=n.one("> a > span");if(m!==null){this._renderFromMarkup=true;return m.getContent();}}}});b.CheckBoxTreeView=b.Base.create(g,b.TreeView,[],{initializer:function(m){this.publish("check",{defaultFn:this._checkDefaultFn});},_checkDefaultFn:function(m){m.treenode.toggleCheckedState();},bindUI:function(){var m=this.get(h);
b.CheckBoxTreeView.superclass.bindUI.apply(this,arguments);m.on("click",function(p){var o=b.Widget.getByNode(p.target),n=false;if(o instanceof b.CheckBoxTreeNode){b.Array.each(p.target.get("className").split(" "),function(q){switch(q){case a.checkbox:n=true;break;case a.labelContent:if(this.get("checkOnLabelClick")){n=true;}break;}},this);if(n){this.fire("check",{treenode:o});}}},this);m.on("keypress",function(q){var p=q.target,o=b.Widget.getByNode(p),n=q.keyCode;if(!o instanceof b.CheckBoxTreeNode){return;}if(n==32){this.fire("check",{treenode:o});q.preventDefault();}},this);},getChecked:function(){var m=Array(),o=Array(),p,n;this.each(function(q){if(q.get("checked")==l.checked){m.push(q);}else{if(q.get("checked")==l.halfchecked){o.push(q);}}});n=function(q){if(q.get("checked")==l.checked){m.push(q);}else{if(q.get("checked")==l.halfchecked){o.push(q);}}};while(o.length>0){p=o.pop();p.each(n);}return m;},getCheckedPaths:function(m){var n=this.getChecked(),o=Array();if(!m){m={};}if(!m.labelAttr){m.labelAttr="label";}b.Array.each(n,function(p){o.push(p.path(m));});return o;}},{NAME:g,ATTRS:{defaultChildType:{value:"CheckBoxTreeNode",readOnly:true},checkOnLabelClick:{value:true,validator:b.Lang.isBoolean}}});b.CheckBoxTreeNode=b.Base.create(c,b.TreeNode,[],{initializer:function(){this.publish("childCheckedSateChange",{defaultFn:this._childCheckedSateChangeDefaultFn,bubbles:false});},_childCheckedSateChangeDefaultFn:function(o){var m=0,n=0,p;this.each(function(q){p=q.get("checked");if(p==l.checked){m++;}if(p==l.halfchecked){n++;}});if(m==this.size()){this.set("checked",l.checked);}else{if(m>0||n>0){this.set("checked",l.halfchecked);}else{this.set("checked",l.unchecked);}}if(!this.isRoot()){this.get("parent").fire("childCheckedSateChange");}},bindUI:function(){b.CheckBoxTreeNode.superclass.bindUI.apply(this,arguments);this.on("checkedChange",this._onCheckedChange);},_onCheckedChange:function(m){m.stopPropagation();this._updateCheckedStateUI(m.prevVal,m.newVal);},_updateCheckedStateUI:function(n,o){var m=this._getCheckBoxNode();m.removeClass(j[n]);m.addClass(j[o]);},_getCheckBoxNode:function(){return this.get(h).one("."+a.checkbox);},CHECKBOX_TEMPLATE:"<span class={checkboxClassName}></span>",renderUI:function(){var m,n,o;b.CheckBoxTreeNode.superclass.renderUI.apply(this,arguments);o=b.Node.create(b.substitute(this.CHECKBOX_TEMPLATE,{checkboxClassName:a.checkbox}));n=this._getLabelContentNode();m=n.get("parentNode");n.remove();o.append(n);m.append(o);this._getCheckBoxNode().addClass(j[this.get("checked")]);this.get(i).addClass(a.content);},syncUI:function(){b.CheckBoxTreeNode.superclass.syncUI.apply(this,arguments);this._syncChildren();},toggleCheckedState:function(){if(this.get("checked")==l.checked){this._uncheck();}else{this._check();}this.get("parent").fire("childCheckedSateChange");},_check:function(){this.set("checked",l.checked);this.each(function(m){m._check();});},_uncheck:function(){this.set("checked",l.unchecked);this.each(function(m){m._uncheck();});},_syncChildren:function(){if(this.get("checked")==l.unchecked){this._uncheck();}else{if(this.get("checked")==l.checked){this._check();}else{this.each(function(m){m._syncChildren();});}}}},{NAME:c,ATTRS:{defaultChildType:{value:"CheckBoxTreeNode",readOnly:true},checked:{value:10,setter:function(n){var m=b.Attribute.INVALID_VALUE;if(l[n]!==null){m=l[n];}else{if([10,20,30].indexOf(n)>=0){m=n;}}return m;}}}});},"gallery-2012.08.29-20-10",{skinnable:true,requires:["substitute","widget","widget-parent","widget-child","node-focusmanager","array-extras"]});