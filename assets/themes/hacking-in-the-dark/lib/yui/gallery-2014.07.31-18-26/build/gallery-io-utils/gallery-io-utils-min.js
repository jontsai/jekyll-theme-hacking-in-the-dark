YUI.add("gallery-io-utils",function(e,t){var n="application/json",r="Content-Type";e.io.xhr=function(t,n){return n=n||{},new e.Promise(function(r,i){var s=e.io(t,{method:n.method,data:n.data,headers:n.headers,form:n.form,timeout:n.timeout,on:{success:function(e,t){r(t)},failure:function(e,t){i(t)}}});this.abort=s.abort})},e.Array.each(["get","post","put","delete"],function(t){e.io[t]=function(n,r){return r=r||{},r.method=t.toUpperCase(),e.io.xhr(n,r)}}),e.io.del=e.io["delete"],e.io.postForm=function(t,n,r){return r=r||{},r.method="POST",r.form={id:e.one(n)},e.io.xhr(t,r)},e.Array.each(["script","css"],function(t){e.io[t]=function(n,r){return this._transaction(function(i,s){e.Get[t](n,r,function(e,t){e?s(e):i(t)})})}}),e.io.jsonp=function(t,n){return n=n||{},new e.Promise(function(r,i){var s={on:{success:function(e){r(e)},failure:i,timeout:i}};n.timeout&&(s.timeout=n.timeout),n.format&&(s.format=n.format),e.jsonp(t,s)})},e.io.json=function(t,r){r=r||{},r.headers||(r.headers={}),r.headers.Accept=n;var i=e.io.xhr(t,r);return e.mix(i.then(function(t){return e.JSON.parse(t.responseText,r.reviver)}),{abort:i.abort})},e.Array.each(["get","delete"],function(t){e.io[t+"JSON"]=function(n,r){return r=r||{},r.method=t.toUpperCase(),e.io.json(n,r)}}),e.Array.each(["post","put"],function(t){e.io[t+"JSON"]=function(i,s,o){return o=o||{},o.method=t.toUpperCase(),o.headers||(o.headers={}),o.headers[r]||(o.headers[r]=n),e.when(s,function(t){return o.data=o.headers[r]===n?e.JSON.stringify(t):t,e.io.json(i,o)})}})},"gallery-2014.07.31-18-26",{requires:["io-base","promise"]});
