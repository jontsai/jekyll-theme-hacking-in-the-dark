YUI.add("gallery-md-spinner",function(e,t){"use strict";var n=e.Lang,r="contentBox",i="value",s="Change",o="input",u="inputError",a="up",f="down",l="ui",c="parser",h="formatter",p="min",d="max",v="wraparound",m="wrapped";e.Spinner=e.Base.create("spinner",e.Widget,[e.MakeNode],{renderUI:function(){this.get(r).append(this._makeNode()),this._locateNodes()},_afterBoundingBoxMousedown:function(e){var t=e.target,n,r=!1,s=this.get(i),o=this.get("minorStep");t.hasClass(this._classNames.up)?(this.set(i,s+o),n=1,r=!0):t.hasClass(this._classNames.down)&&(this.set(i,s-o),n=-1,r=!0),r&&this._setMouseDownTimers(n,o)},_defaultCB:function(){return null},_afterDocumentMouseup:function(){this._clearMouseDownTimers()},_onDirectionKey:function(e){e.preventDefault();var t=this.get(i),n=this.get("minorStep"),r=this.get("majorStep");switch(e.charCode){case 38:t+=n;break;case 40:t-=n;break;case 33:t+=r;break;case 34:t-=r}this.set(i,t)},_afterInputChange:function(){var t=this._inputNode,n=this.get(c)(t.get(i));this._validateValue(n)?this.set(i,n):(t.focus(),t.addClass(this._classNames[u]),e.later(1e3,this,function(){t.removeClass(this._classNames[u])}))},parser:function(e){return parseInt(e,10)},formatter:function(e){return e},_setMouseDownTimers:function(t,n){this._mouseDownTimer=e.later(500,this,function(){this._mousePressTimer=e.later(100,this,function(){this.set(i,this.get(i)+t*n)},null,!0)})},_wrap:function(e){var t=this.get(d),n=this.get(p),r=e.newVal;r>t?(r-=t-n+1,this.fire(m,{prevVal:e.newVal,newVal:r})):r<n&&(r+=t-n+1,this.fire(m,{prevVal:e.newVal,newVal:r})),e.newVal=r},_clearMouseDownTimers:function(){this._mouseDownTimer&&(this._mouseDownTimer.cancel(),this._mouseDownTimer=null),this._mousePressTimer&&(this._mousePressTimer.cancel(),this._mousePressTimer=null)},_uiSetValue:function(e,t){if(t===l)return;this._inputNode.set(i,this.get(h)(e))},_uiSetWraparound:function(e){e?this._wrapListener=this.on(i+s,this._wrap,this):this._wrapListener&&this._wrapListener.detach()},_validateValue:function(e){return e>=this.get(p)&&e<=this.get(d)}},{_TEMPLATE:['<input type="text" title="{s input}" class="{c input}">','<button type="button" title="{s up}" class="{c up}"></button>','<button type="button" title="{s down}" class="{c down}"></button>'].join("\n"),_CLASS_NAMES:[o,a,f,u],_EVENTS:{boundingBox:[{type:"key",fn:"_onDirectionKey",args:(e.UA.opera?"press:":"down:")+"38, 40, 33, 34"},"mousedown"],document:"mouseup",input:"change"},ATTRS:{min:{value:0},max:{value:100},value:{value:0,validator:"_validateValue"},minorStep:{value:1},majorStep:{value:10},tabIndex:{value:0},strings:{value:{input:"Press the arrow up/down keys for minor increments, page up/down for major increments.",up:"Increment",down:"Decrement"}},formatter:{valueFn:function(){return this.formatter},validator:n.isFunction},parser:{valueFn:function(){return this.parser},validator:n.isFunction},wraparound:{value:!1,validator:n.isBoolean}},_ATTRS_2_UI:{BIND:[i,v],SYNC:[i,v]},HTML_PARSER:{value:function(e){var t=parseInt(e.get(i),10);return n.isNumber(t)?t:null}}})},"gallery-2013.01.23-21-59",{requires:["base-build","event-key","widget","node-focusmanager","gallery-makenode"],skinnable:!0});
