YUI.add("gallery-facebook-dao",function(e,t){function n(e){this.configuration=e,this._initDataAccess(),this._loadFBComponents()}n.prototype={configuration:{fbAppId:null},listSitePosts:function(e,t){FB.api(e+"/feed",function(e){var n=e,r=n.data.length;for(var i=0;i<n.data.length;i++){var s=n.data[i].from.id;(function(e,i){FB.api(e+"/picture",function(e){var s=n.data[i];r-=1;var o=s.message?s.message:s.story?s.story:null,u={message:o,portrait_image:e.data.url};n.data[i].fb_data=u,r==0&&t(n)})})(s,i)}})},_loadFBComponents:function(){(function(e){var t,n="facebook-jssdk",r=e.getElementsByTagName("script")[0];if(e.getElementById(n))return;t=e.createElement("script"),t.id=n,t.async=!0,t.src="http://connect.facebook.net/en_US/all.js",r.parentNode.insertBefore(t,r)})(document,!1)},_initDataAccess:function(){var e=this;window.fbAsyncInit=function(){e._initFBApi(),e._checkLogin()}},_initFBApi:function(){FB.init({appId:this.configuration.fbAppId,channelUrl:this.configuration.fbChannelFile,status:!0,cookie:!0,xfbml:!0})},_checkLogin:function(){var e=this;FB.getLoginStatus(function(t){if(t.status==="not_authorized"||t.status==="not_logged_in"){e._login();return}e.configuration.onInit(t)})},_login:function(){var e=this;FB.login(function(t){e.configuration.onInit(t)})}},e.FacebookDAO=n},"gallery-2013.04.03-19-53",{requires:["base-build","base"]});
