if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-itsaeditorrenderpromise/gallery-itsaeditorrenderpromise.js']) {
   __coverage__['build/gallery-itsaeditorrenderpromise/gallery-itsaeditorrenderpromise.js'] = {"path":"build/gallery-itsaeditorrenderpromise/gallery-itsaeditorrenderpromise.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":43},"end":{"line":1,"column":62}}},"2":{"name":"(anonymous_2)","line":39,"loc":{"start":{"line":39,"column":43},"end":{"line":39,"column":78}}},"3":{"name":"(anonymous_3)","line":59,"loc":{"start":{"line":59,"column":45},"end":{"line":59,"column":80}}},"4":{"name":"(anonymous_4)","line":89,"loc":{"start":{"line":89,"column":50},"end":{"line":89,"column":85}}},"5":{"name":"(anonymous_5)","line":95,"loc":{"start":{"line":95,"column":31},"end":{"line":95,"column":42}}},"6":{"name":"(anonymous_6)","line":97,"loc":{"start":{"line":97,"column":43},"end":{"line":97,"column":54}}},"7":{"name":"(anonymous_7)","line":99,"loc":{"start":{"line":99,"column":20},"end":{"line":99,"column":31}}},"8":{"name":"(anonymous_8)","line":112,"loc":{"start":{"line":112,"column":25},"end":{"line":112,"column":52}}},"9":{"name":"(anonymous_9)","line":122,"loc":{"start":{"line":122,"column":43},"end":{"line":122,"column":54}}},"10":{"name":"(anonymous_10)","line":125,"loc":{"start":{"line":125,"column":20},"end":{"line":125,"column":31}}},"11":{"name":"(anonymous_11)","line":135,"loc":{"start":{"line":135,"column":20},"end":{"line":135,"column":31}}},"12":{"name":"(anonymous_12)","line":151,"loc":{"start":{"line":151,"column":20},"end":{"line":151,"column":31}}},"13":{"name":"(anonymous_13)","line":182,"loc":{"start":{"line":182,"column":52},"end":{"line":182,"column":87}}},"14":{"name":"(anonymous_14)","line":199,"loc":{"start":{"line":199,"column":39},"end":{"line":199,"column":57}}},"15":{"name":"(anonymous_15)","line":201,"loc":{"start":{"line":201,"column":25},"end":{"line":201,"column":52}}},"16":{"name":"(anonymous_16)","line":213,"loc":{"start":{"line":213,"column":16},"end":{"line":213,"column":27}}},"17":{"name":"(anonymous_17)","line":235,"loc":{"start":{"line":235,"column":44},"end":{"line":235,"column":55}}},"18":{"name":"(anonymous_18)","line":236,"loc":{"start":{"line":236,"column":25},"end":{"line":236,"column":44}}},"19":{"name":"(anonymous_19)","line":254,"loc":{"start":{"line":254,"column":38},"end":{"line":254,"column":56}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":263,"column":98}},"2":{"start":{"line":19,"column":0},"end":{"line":20,"column":56}},"3":{"start":{"line":39,"column":0},"end":{"line":43,"column":2}},"4":{"start":{"line":40,"column":4},"end":{"line":40,"column":24}},"5":{"start":{"line":41,"column":4},"end":{"line":41,"column":75}},"6":{"start":{"line":42,"column":4},"end":{"line":42,"column":20}},"7":{"start":{"line":59,"column":0},"end":{"line":63,"column":2}},"8":{"start":{"line":60,"column":4},"end":{"line":60,"column":24}},"9":{"start":{"line":61,"column":4},"end":{"line":61,"column":77}},"10":{"start":{"line":62,"column":4},"end":{"line":62,"column":20}},"11":{"start":{"line":89,"column":0},"end":{"line":162,"column":2}},"12":{"start":{"line":90,"column":4},"end":{"line":93,"column":49}},"13":{"start":{"line":94,"column":4},"end":{"line":111,"column":5}},"14":{"start":{"line":95,"column":8},"end":{"line":110,"column":10}},"15":{"start":{"line":96,"column":12},"end":{"line":96,"column":46}},"16":{"start":{"line":97,"column":12},"end":{"line":109,"column":15}},"17":{"start":{"line":98,"column":16},"end":{"line":108,"column":18}},"18":{"start":{"line":100,"column":24},"end":{"line":100,"column":51}},"19":{"start":{"line":101,"column":24},"end":{"line":104,"column":25}},"20":{"start":{"line":102,"column":28},"end":{"line":102,"column":52}},"21":{"start":{"line":103,"column":28},"end":{"line":103,"column":49}},"22":{"start":{"line":106,"column":24},"end":{"line":106,"column":84}},"23":{"start":{"line":112,"column":4},"end":{"line":161,"column":7}},"24":{"start":{"line":113,"column":8},"end":{"line":160,"column":9}},"25":{"start":{"line":115,"column":12},"end":{"line":115,"column":30}},"26":{"start":{"line":116,"column":12},"end":{"line":118,"column":13}},"27":{"start":{"line":117,"column":16},"end":{"line":117,"column":39}},"28":{"start":{"line":119,"column":12},"end":{"line":119,"column":22}},"29":{"start":{"line":122,"column":12},"end":{"line":159,"column":15}},"30":{"start":{"line":123,"column":16},"end":{"line":158,"column":18}},"31":{"start":{"line":126,"column":24},"end":{"line":131,"column":25}},"32":{"start":{"line":127,"column":28},"end":{"line":127,"column":61}},"33":{"start":{"line":130,"column":28},"end":{"line":130,"column":93}},"34":{"start":{"line":139,"column":24},"end":{"line":139,"column":47}},"35":{"start":{"line":140,"column":24},"end":{"line":148,"column":25}},"36":{"start":{"line":141,"column":28},"end":{"line":141,"column":67}},"37":{"start":{"line":143,"column":29},"end":{"line":148,"column":25}},"38":{"start":{"line":144,"column":28},"end":{"line":144,"column":66}},"39":{"start":{"line":147,"column":28},"end":{"line":147,"column":40}},"40":{"start":{"line":152,"column":24},"end":{"line":154,"column":25}},"41":{"start":{"line":153,"column":28},"end":{"line":153,"column":51}},"42":{"start":{"line":155,"column":24},"end":{"line":155,"column":34}},"43":{"start":{"line":182,"column":0},"end":{"line":220,"column":2}},"44":{"start":{"line":183,"column":4},"end":{"line":183,"column":28}},"45":{"start":{"line":184,"column":4},"end":{"line":184,"column":29}},"46":{"start":{"line":185,"column":4},"end":{"line":185,"column":67}},"47":{"start":{"line":200,"column":4},"end":{"line":200,"column":24}},"48":{"start":{"line":201,"column":4},"end":{"line":219,"column":7}},"49":{"start":{"line":202,"column":8},"end":{"line":205,"column":10}},"50":{"start":{"line":206,"column":8},"end":{"line":208,"column":9}},"51":{"start":{"line":207,"column":12},"end":{"line":207,"column":22}},"52":{"start":{"line":209,"column":8},"end":{"line":218,"column":9}},"53":{"start":{"line":210,"column":12},"end":{"line":217,"column":14}},"54":{"start":{"line":214,"column":20},"end":{"line":214,"column":117}},"55":{"start":{"line":215,"column":20},"end":{"line":215,"column":52}},"56":{"start":{"line":235,"column":0},"end":{"line":239,"column":2}},"57":{"start":{"line":236,"column":4},"end":{"line":238,"column":7}},"58":{"start":{"line":237,"column":8},"end":{"line":237,"column":18}},"59":{"start":{"line":254,"column":0},"end":{"line":261,"column":2}},"60":{"start":{"line":255,"column":4},"end":{"line":256,"column":23}},"61":{"start":{"line":257,"column":4},"end":{"line":257,"column":22}},"62":{"start":{"line":258,"column":4},"end":{"line":258,"column":55}},"63":{"start":{"line":259,"column":4},"end":{"line":259,"column":60}},"64":{"start":{"line":260,"column":4},"end":{"line":260,"column":42}}},"branchMap":{"1":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":18},"end":{"line":91,"column":25}},{"start":{"line":91,"column":29},"end":{"line":91,"column":44}}]},"2":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":22},"end":{"line":92,"column":29}},{"start":{"line":92,"column":33},"end":{"line":92,"column":52}}]},"3":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":20},"end":{"line":93,"column":27}},{"start":{"line":93,"column":31},"end":{"line":93,"column":48}}]},"4":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":4},"end":{"line":94,"column":4}},{"start":{"line":94,"column":4},"end":{"line":94,"column":4}}]},"5":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":8},"end":{"line":94,"column":17}},{"start":{"line":94,"column":21},"end":{"line":94,"column":42}}]},"6":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":24},"end":{"line":101,"column":24}},{"start":{"line":101,"column":24},"end":{"line":101,"column":24}}]},"7":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":113,"column":8}},{"start":{"line":113,"column":8},"end":{"line":113,"column":8}}]},"8":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":12},"end":{"line":116,"column":12}},{"start":{"line":116,"column":12},"end":{"line":116,"column":12}}]},"9":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":24},"end":{"line":126,"column":24}},{"start":{"line":126,"column":24},"end":{"line":126,"column":24}}]},"10":{"line":139,"type":"binary-expr","locations":[{"start":{"line":139,"column":34},"end":{"line":139,"column":41}},{"start":{"line":139,"column":45},"end":{"line":139,"column":46}}]},"11":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":24},"end":{"line":140,"column":24}},{"start":{"line":140,"column":24},"end":{"line":140,"column":24}}]},"12":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":29},"end":{"line":143,"column":29}},{"start":{"line":143,"column":29},"end":{"line":143,"column":29}}]},"13":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":24},"end":{"line":152,"column":24}},{"start":{"line":152,"column":24},"end":{"line":152,"column":24}}]},"14":{"line":183,"type":"binary-expr","locations":[{"start":{"line":183,"column":14},"end":{"line":183,"column":21}},{"start":{"line":183,"column":25},"end":{"line":183,"column":27}}]},"15":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":8},"end":{"line":206,"column":8}},{"start":{"line":206,"column":8},"end":{"line":206,"column":8}}]},"16":{"line":206,"type":"binary-expr","locations":[{"start":{"line":206,"column":12},"end":{"line":206,"column":26}},{"start":{"line":206,"column":30},"end":{"line":206,"column":54}}]},"17":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":8},"end":{"line":209,"column":8}},{"start":{"line":209,"column":8},"end":{"line":209,"column":8}}]},"18":{"line":211,"type":"binary-expr","locations":[{"start":{"line":211,"column":16},"end":{"line":211,"column":23}},{"start":{"line":211,"column":27},"end":{"line":211,"column":41}}]},"19":{"line":214,"type":"binary-expr","locations":[{"start":{"line":214,"column":83},"end":{"line":214,"column":90}},{"start":{"line":214,"column":94},"end":{"line":214,"column":108}}]}},"code":["(function () { YUI.add('gallery-itsaeditorrenderpromise', function (Y, NAME) {","","'use strict';","/**"," * This module adds some renderPromises to the Y.EditorBase class."," * By using this Promise, you don't need to listen for the 'render'-event, neither look for the value of the attribute 'rendered'."," * It also adds the Promise renderOnAvailablePromise() by which the render-code can be run even if the Node has yet to be inserted in the DOM."," *"," * @module gallery-itsaeditorrenderpromise"," * @extends EditorBase"," * @class Y.EditorBase"," * @since 0.1"," *"," * <i>Copyright (c) 2013 Marco Asbreuk - http://theinternetwizard.net</i>"," * YUI BSD License - http://developer.yahoo.com/yui/license.html"," *","*/","","var DEFAULTTIMEOUT = 20000, // default timeout for renderPromise and readyPromise","    GALLERY_ITSANODEPROMISE = 'gallery-itsanodepromise';","","/**"," * Renderes the editor only when the containerNode (parentNode or boundingBox) gets available in the DOM."," * This way you can execute the render-statement even if the containerNode has yet to be declared."," * Is chainable, but keep in mind that the editor is not rendered, so you can't refer to any of the editors nodes."," * If you want to be sure the editor is really rendered, you should use renderOnAvailablePromise instead."," *"," * @method renderOnAvailable"," * @param [containerNodeid] {String} Node-selector by id. You must include the '#'. If not defined, then the editor will be rendered at once"," * with its own generated node-id."," * <p>"," * NOTE: This argument is in fact the boundingBox, but will also be passed into the 'srcNode' attribute for progressive enhancement."," * </p>"," * @param timeout {int} Timeout in ms, after which the promise will be rejected.<br />"," *                                      If omitted, <b>no timeout</b> will be used.<br />"," * @chainable"," * @since 0.2","*/","Y.EditorBase.prototype.renderOnAvailable = function(containerNodeid, timeout) {","    var instance = this;","    instance.renderOnAvailablePromise(containerNodeid, {timeout: timeout});","    return instance;","};","","/**"," * Same as 'renderOnAvailable', with the exception that rendering is done <b>every time</b> parentNode gets inserted in the DOM,"," *"," * @method renderWhenAvailable"," * @param [containerNodeid] {String} Node-selector by id. You must include the '#'. If not defined, then the editor will be rendered at once"," * with its own generated node-id."," * <p>"," * NOTE: This argument is in fact the boundingBox, but will also be passed into the 'srcNode' attribute for progressive enhancement."," * </p>"," * @param timeout {int} Timeout in ms, after which the promise will be rejected.<br />"," *                                      If omitted, <b>no timeout</b> will be used.<br />"," * @chainable"," * @since 0.3","*/","Y.EditorBase.prototype.renderWhenAvailable = function(containerNodeid, timeout) {","    var instance = this;","    instance.renderWhenAvailablePromise(containerNodeid, {timeout: timeout});","    return instance;","};","","/**"," * Promise which will render the editor only when the containerNode (parentNode or boundingBox) gets available in the DOM."," * This way you can execute the render-statement even if the containerNode has yet to be declared."," * The returned Promise will be resolved once the containerNode is available in the DOM, but this can be changed by the 'promisetype' argument."," *"," * @method renderOnAvailablePromise"," * @param [containerNodeid] {String} Node-selector by id. You must include the '#'. If not defined, then the editor will be rendered at once"," * with its own generated node-id."," * <p>"," * NOTE: This argument is in fact the boundingBox, but will also be passed into the 'srcNode' attribute for progressive enhancement."," * </p>"," * @param [options] {Object}"," * @param [options.timeout] {int} Timeout in ms, after which the promise will be rejected.<br />"," *                                      If omitted, <b>no timeout</b> will be used.<br />"," * @param [options.stayalive=false] {Boolean} Set true when you expect the parentNode to be inserted in the DOM multiple times"," *                                           and you always want to render the editor (over and over again)."," *                                           You can use renderOnAvailablePromise as well which sets this property to true."," *                                           Note: the promise gets resolved the first time the editor is rendered."," * @param [options.promisetype] {String} To make the promise fulfilled at another stage. Possible values are:"," *  null (==onAvailable), 'afterrender' and 'afterready'."," * @return {Y.Promise} Promise that is resolved once srcNode is available in the DOM."," * If both srcNode and timeout are set, the Promise can be rejected in case of a timeout. Promised response --> resolve() OR reject(reason)."," * @since 0.2","*/","Y.EditorBase.prototype.renderOnAvailablePromise = function(containerNodeid, options) {","    var instance = this,","        timeout = options && options.timeout,","        promisetype = options && options.promisetype,","        stayalive = options && options.stayalive;","    if (stayalive && !instance._autorender) {","        instance._autorender = function() {","            instance._noGarbageDestroy = true; // make gallery-itsagarbagecollector-editor not to destroy the instance","            Y.use(GALLERY_ITSANODEPROMISE, function() {","                Y.Node.unavailablePromise(containerNodeid).then(","                    function() {","                        var frame = instance.frame;","                        if (frame) {","                            frame._rendered = false;","                            frame._ready = false;","                        }","                        // looping renderonavailable","                        instance.renderOnAvailablePromise(containerNodeid, options);","                    }","                );","            });","        };","    }","    return new Y.Promise(function (resolve, reject) {","        if (!containerNodeid) {","            // editor can be rendered immediately because it renderes with inside a new boundingBox","            instance.render();","            if (stayalive) {","                instance._autorender();","            }","            resolve();","        }","        else {","            Y.use(GALLERY_ITSANODEPROMISE, function() {","                Y.Node.availablePromise(containerNodeid, timeout)","                .then(","                    function() {","                        if (!instance.get('destroyed')) {","                            instance.render(containerNodeid);","                        }","                        else {","                            throw new Error('editor cannot render: it is already destroyed');","                        }","                    }","                )","                .then(","                    function() {","                        // return a promise or just true, to chain the result","                        // Because renderPromise and readyPromise use DEFAULTTIMEOUT when timeout is undefined,","                        // we might need to set timeout to zero.","                        timeout = timeout || 0;","                        if (promisetype==='afterrender') {","                            return instance.renderPromise(timeout);","                        }","                        else if (promisetype==='afterready') {","                            return instance.readyPromise(timeout);","                        }","                        else {","                            return true;","                        }","                    }","                ).then(","                    function() {","                        if (stayalive) {","                            instance._autorender();","                        }","                        resolve();","                    },","                    reject","                );","            });","        }","    });","};","","/**"," * Same as 'renderOnAvailablePromise', with the exception that rendering is done <b>every time</b> parentNode gets inserted in the DOM."," *"," * @method renderWhenAvailablePromise"," * @param [containerNodeid] {String} Node-selector by id. You must include the '#'. If not defined, then the editor will be rendered at once"," * with its own generated node-id."," * <p>"," * NOTE: This argument is in fact the boundingBox, but will also be passed into the 'srcNode' attribute for progressive enhancement."," * </p>"," * @param [options] {Object}"," * @param [options.timeout] {int} Timeout in ms, after which the promise will be rejected.<br />"," *                                      If omitted, <b>no timeout</b> will be used.<br />"," * @param [options.promisetype] {String} To make the promise fulfilled at another stage. Possible values are:"," *  null (==onAvailable), 'afterrender' and 'afterready'."," * @return {Y.Promise} Promise that is resolved once srcNode is available in the DOM."," * If both srcNode and timeout are set, the Promise can be rejected in case of a timeout. Promised response --> resolve() OR reject(reason)."," * @since 0.3","*/","Y.EditorBase.prototype.renderWhenAvailablePromise = function(containerNodeid, options) {","    options = options || {};","    options.stayalive = true;","    return this.renderOnAvailablePromise(containerNodeid, options);","},","","/**"," * Promise that will be resolved once the editor is rendered."," * By using this Promise, you don't need to listen for the 'render'-event, neither look for the value of the attribute 'rendered'."," *"," * @method renderPromise"," * @param [timeout] {int} Timeout in ms, after which the promise will be rejected. Set to 0 to de-activate.<br />"," *                                      If omitted, a timeout of 20 seconds (20000ms) will be used.<br />"," *                                      The timeout-value can only be set at the first time the Promise is called."," * @return {Y.Promise} promised response --> resolve() OR reject(reason)."," * @since 0.1","*/","Y.EditorBase.prototype.renderPromise = function(timeout) {","    var instance = this;","    return new Y.Promise(function (resolve, reject) {","        instance.after(","            'ready',","            resolve","        );","        if (instance.frame && instance.frame._rendered) {","            resolve();","        }","        if (timeout !== 0) {","            Y.later(","                timeout || DEFAULTTIMEOUT,","                null,","                function() {","                    var errormessage = 'renderPromise is rejected by timeout of '+(timeout || DEFAULTTIMEOUT)+ ' ms';","                    reject(new Error(errormessage));","                }","            );","        }","    });","};","","/**"," * Promise that holds any stuff that should be done before the editor is defined as 'ready'."," * By default this promise is resolved right away. The intention is that it can be overridden in editor's extentions.<br /><br />"," * <b>Notion</b>It is not the intention to make a dircet call an promiseBeforeReady --> use readyPromise () instead,"," * because that promise will be fulfilled when both this promise as well as renderPromise() are fulfilled."," *"," * @method promiseBeforeReady"," * @param [timeout] {int} Timeout in ms, after which the promise will be rejected. Set to 0 to de-activate.<br />"," *                                      If omitted, a timeout of 20 seconds (20000ms) will be used.<br />"," *                                      The timeout-value can only be set at the first time the Promise is called."," * @return {Y.Promise} promised response --> resolve() OR reject(reason)."," * @since 0.2","*/","Y.EditorBase.prototype.promiseBeforeReady = function() {","    return new Y.Promise(function (resolve) {","        resolve();","    });","};","","/**"," * Promise that will be resolved once the editor is defined as 'ready'."," * 'ready' means, that the editor fulfills both renderPromise() and promiseBeforeReady()."," * The latter can be overridden in the extended editorclass with"," * any stuff the editor needs to de before you declare its state as 'ready'."," *"," * @method readyPromise"," * @param [timeout] {int} Timeout in ms, after which the promise will be rejected. Set to 0 to de-activate.<br />"," *                                      If omitted, a timeout of 20 seconds (20000ms) will be used.<br />"," *                                      The timeout-value can only be set at the first time the Promise is called."," * @return {Y.Promise} promised response --> resolve() OR reject(reason)."," * @since 0.2","*/","Y.EditorBase.prototype.readyPromise = function(timeout) {","    var instance = this,","          promiseslist;","    promiseslist = [];","    promiseslist.push(instance.renderPromise(timeout));","    promiseslist.push(instance.promiseBeforeReady(timeout));","    return Y.batch.apply(Y, promiseslist);","};","","}, 'gallery-2013.09.04-21-56', {\"requires\": [\"yui-base\", \"yui-later\", \"editor-base\", \"promise\"]});","","}());"]};
}
var __cov_tY0rbCwZwicm7ntSvJ7uSQ = __coverage__['build/gallery-itsaeditorrenderpromise/gallery-itsaeditorrenderpromise.js'];
__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['1']++;YUI.add('gallery-itsaeditorrenderpromise',function(Y,NAME){'use strict';__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['1']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['2']++;var DEFAULTTIMEOUT=20000,GALLERY_ITSANODEPROMISE='gallery-itsanodepromise';__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['3']++;Y.EditorBase.prototype.renderOnAvailable=function(containerNodeid,timeout){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['2']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['4']++;var instance=this;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['5']++;instance.renderOnAvailablePromise(containerNodeid,{timeout:timeout});__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['6']++;return instance;};__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['7']++;Y.EditorBase.prototype.renderWhenAvailable=function(containerNodeid,timeout){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['3']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['8']++;var instance=this;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['9']++;instance.renderWhenAvailablePromise(containerNodeid,{timeout:timeout});__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['10']++;return instance;};__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['11']++;Y.EditorBase.prototype.renderOnAvailablePromise=function(containerNodeid,options){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['4']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['12']++;var instance=this,timeout=(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['1'][0]++,options)&&(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['1'][1]++,options.timeout),promisetype=(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['2'][0]++,options)&&(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['2'][1]++,options.promisetype),stayalive=(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['3'][0]++,options)&&(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['3'][1]++,options.stayalive);__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['13']++;if((__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['5'][0]++,stayalive)&&(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['5'][1]++,!instance._autorender)){__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['4'][0]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['14']++;instance._autorender=function(){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['5']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['15']++;instance._noGarbageDestroy=true;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['16']++;Y.use(GALLERY_ITSANODEPROMISE,function(){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['6']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['17']++;Y.Node.unavailablePromise(containerNodeid).then(function(){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['7']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['18']++;var frame=instance.frame;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['19']++;if(frame){__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['6'][0]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['20']++;frame._rendered=false;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['21']++;frame._ready=false;}else{__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['6'][1]++;}__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['22']++;instance.renderOnAvailablePromise(containerNodeid,options);});});};}else{__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['4'][1]++;}__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['23']++;return new Y.Promise(function(resolve,reject){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['8']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['24']++;if(!containerNodeid){__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['7'][0]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['25']++;instance.render();__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['26']++;if(stayalive){__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['8'][0]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['27']++;instance._autorender();}else{__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['8'][1]++;}__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['28']++;resolve();}else{__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['7'][1]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['29']++;Y.use(GALLERY_ITSANODEPROMISE,function(){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['9']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['30']++;Y.Node.availablePromise(containerNodeid,timeout).then(function(){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['10']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['31']++;if(!instance.get('destroyed')){__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['9'][0]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['32']++;instance.render(containerNodeid);}else{__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['9'][1]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['33']++;throw new Error('editor cannot render: it is already destroyed');}}).then(function(){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['11']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['34']++;timeout=(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['10'][0]++,timeout)||(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['10'][1]++,0);__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['35']++;if(promisetype==='afterrender'){__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['11'][0]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['36']++;return instance.renderPromise(timeout);}else{__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['11'][1]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['37']++;if(promisetype==='afterready'){__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['12'][0]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['38']++;return instance.readyPromise(timeout);}else{__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['12'][1]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['39']++;return true;}}}).then(function(){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['12']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['40']++;if(stayalive){__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['13'][0]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['41']++;instance._autorender();}else{__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['13'][1]++;}__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['42']++;resolve();},reject);});}});};__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['43']++;Y.EditorBase.prototype.renderWhenAvailablePromise=function(containerNodeid,options){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['13']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['44']++;options=(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['14'][0]++,options)||(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['14'][1]++,{});__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['45']++;options.stayalive=true;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['46']++;return this.renderOnAvailablePromise(containerNodeid,options);},Y.EditorBase.prototype.renderPromise=function(timeout){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['14']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['47']++;var instance=this;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['48']++;return new Y.Promise(function(resolve,reject){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['15']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['49']++;instance.after('ready',resolve);__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['50']++;if((__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['16'][0]++,instance.frame)&&(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['16'][1]++,instance.frame._rendered)){__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['15'][0]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['51']++;resolve();}else{__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['15'][1]++;}__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['52']++;if(timeout!==0){__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['17'][0]++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['53']++;Y.later((__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['18'][0]++,timeout)||(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['18'][1]++,DEFAULTTIMEOUT),null,function(){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['16']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['54']++;var errormessage='renderPromise is rejected by timeout of '+((__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['19'][0]++,timeout)||(__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['19'][1]++,DEFAULTTIMEOUT))+' ms';__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['55']++;reject(new Error(errormessage));});}else{__cov_tY0rbCwZwicm7ntSvJ7uSQ.b['17'][1]++;}});};__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['56']++;Y.EditorBase.prototype.promiseBeforeReady=function(){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['17']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['57']++;return new Y.Promise(function(resolve){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['18']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['58']++;resolve();});};__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['59']++;Y.EditorBase.prototype.readyPromise=function(timeout){__cov_tY0rbCwZwicm7ntSvJ7uSQ.f['19']++;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['60']++;var instance=this,promiseslist;__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['61']++;promiseslist=[];__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['62']++;promiseslist.push(instance.renderPromise(timeout));__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['63']++;promiseslist.push(instance.promiseBeforeReady(timeout));__cov_tY0rbCwZwicm7ntSvJ7uSQ.s['64']++;return Y.batch.apply(Y,promiseslist);};},'gallery-2013.09.04-21-56',{'requires':['yui-base','yui-later','editor-base','promise']});
