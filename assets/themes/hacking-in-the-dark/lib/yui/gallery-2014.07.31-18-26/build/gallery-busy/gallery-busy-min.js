YUI.add("gallery-busy",function(e,t){"use strict";function n(e){n.superclass.constructor.apply(this,arguments)}n.NAME="Busy",n.NS="busy",n.ATTRS={container:{value:null,setter:e.one},selector:{value:null,validator:e.Lang.isString},globalNode:{value:null,setter:e.Node},css:{value:"yui3-gallery-busy",validator:e.Lang.isString}},e.extend(n,e.Base,{initializer:function(t){this.o=e.Node.create('<div style="position:absolute;display:none;visibility:hidden;"></div>'),this.o.set("className",this.get("css")),e.one("body").prepend(this.o),e.delegate("click",function(t){this.isVisible()&&this.hide();var n=t.currentTarget.getData("busy");this.setVisible(n&&!e.Lang.isObject(n)?e.one(n):null,!0)},t.container,t.selector,this),e.on("msa-busy:show",function(e){this.show(e&&e.node)},this),e.Global.on("msa-busy:show",function(e){this.show(e&&e.node)},this),e.Global.on("msa-busy:hide",this.hide,this),e.on("msa-busy:hide",this.hide,this),this.on("cssChange",function(e){this.o.set("className",e.newVal)})},destructor:function(){this.o.remove(!0),this.set("globalNode",null)},isVisible:function(){return this.o.getStyle("visibility")!="hidden"},show:function(e){this.setVisible(e,!0)},hide:function(){this.setVisible(null,!1)},setVisible:function(t,n){var t=t||this.get("globalNode");this.target_region=null,this.o.setStyle("display",n?"":"none"),t&&n&&this.resizeOverlay(t),this.o.setStyle("visibility",n?"":"hidden"),t&&n?(this.timer||(this.timer=e.later(500,this,this.resizeOverlay,t,!0)),e.one("body").addClass("yui3-busyoverlay-browser-hacks")):(this.timer&&(this.timer.cancel(),this.timer=null),e.one("body").removeClass("yui3-busyoverlay-browser-hacks"))},resizeOverlay:function(e){var t=e.get("region");t&&(!this.target_region||t.top!==this.target_region.top||t.bottom!==this.target_region.bottom||t.left!==this.target_region.left||t.right!==this.target_region.right)&&(this.target_region=t,this.o.setXY([t.left,t.top]),this.o.setStyle("width",t.width+"px"),this.o.setStyle("height",t.height+"px"))}}),e.namespace("MSA"),e.MSA.Busy=n},"gallery-2012.12.05-21-01",{skinnable:"true",requires:["base","node-base","node-style","event-tap","event-delegate","node-screen","event-custom"]});
