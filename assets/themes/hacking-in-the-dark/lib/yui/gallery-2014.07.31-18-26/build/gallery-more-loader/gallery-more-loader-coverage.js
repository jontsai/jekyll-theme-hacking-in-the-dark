if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-more-loader/gallery-more-loader.js']) {
   __coverage__['build/gallery-more-loader/gallery-more-loader.js'] = {"path":"build/gallery-more-loader/gallery-more-loader.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":31},"end":{"line":1,"column":50}}},"2":{"name":"MoreLoader","line":39,"loc":{"start":{"line":39,"column":0},"end":{"line":39,"column":28}}},"3":{"name":"(anonymous_3)","line":49,"loc":{"start":{"line":49,"column":14},"end":{"line":49,"column":27}}},"4":{"name":"(anonymous_4)","line":65,"loc":{"start":{"line":65,"column":23},"end":{"line":65,"column":34}}},"5":{"name":"(anonymous_5)","line":80,"loc":{"start":{"line":80,"column":14},"end":{"line":80,"column":24}}},"6":{"name":"(anonymous_6)","line":84,"loc":{"start":{"line":84,"column":29},"end":{"line":84,"column":39}}},"7":{"name":"(anonymous_7)","line":91,"loc":{"start":{"line":91,"column":13},"end":{"line":91,"column":23}}},"8":{"name":"(anonymous_8)","line":95,"loc":{"start":{"line":95,"column":14},"end":{"line":95,"column":27}}},"9":{"name":"(anonymous_9)","line":113,"loc":{"start":{"line":113,"column":17},"end":{"line":113,"column":44}}},"10":{"name":"(anonymous_10)","line":143,"loc":{"start":{"line":143,"column":17},"end":{"line":143,"column":28}}},"11":{"name":"(anonymous_11)","line":197,"loc":{"start":{"line":197,"column":10},"end":{"line":197,"column":33}}},"12":{"name":"(anonymous_12)","line":213,"loc":{"start":{"line":213,"column":13},"end":{"line":213,"column":23}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":307,"column":70}},"2":{"start":{"line":12,"column":0},"end":{"line":37,"column":14}},"3":{"start":{"line":39,"column":0},"end":{"line":41,"column":1}},"4":{"start":{"line":40,"column":4},"end":{"line":40,"column":61}},"5":{"start":{"line":43,"column":0},"end":{"line":43,"column":22}},"6":{"start":{"line":45,"column":0},"end":{"line":303,"column":3}},"7":{"start":{"line":50,"column":3},"end":{"line":51,"column":33}},"8":{"start":{"line":53,"column":3},"end":{"line":53,"column":75}},"9":{"start":{"line":54,"column":3},"end":{"line":54,"column":32}},"10":{"start":{"line":55,"column":3},"end":{"line":55,"column":32}},"11":{"start":{"line":56,"column":3},"end":{"line":56,"column":30}},"12":{"start":{"line":59,"column":3},"end":{"line":59,"column":34}},"13":{"start":{"line":60,"column":3},"end":{"line":60,"column":30}},"14":{"start":{"line":61,"column":3},"end":{"line":61,"column":34}},"15":{"start":{"line":62,"column":3},"end":{"line":62,"column":24}},"16":{"start":{"line":64,"column":3},"end":{"line":70,"column":4}},"17":{"start":{"line":65,"column":4},"end":{"line":69,"column":12}},"18":{"start":{"line":66,"column":5},"end":{"line":68,"column":7}},"19":{"start":{"line":73,"column":3},"end":{"line":74,"column":23}},"20":{"start":{"line":74,"column":4},"end":{"line":74,"column":23}},"21":{"start":{"line":76,"column":3},"end":{"line":77,"column":22}},"22":{"start":{"line":77,"column":4},"end":{"line":77,"column":22}},"23":{"start":{"line":81,"column":3},"end":{"line":82,"column":15}},"24":{"start":{"line":83,"column":3},"end":{"line":89,"column":4}},"25":{"start":{"line":84,"column":4},"end":{"line":88,"column":15}},"26":{"start":{"line":85,"column":5},"end":{"line":87,"column":7}},"27":{"start":{"line":92,"column":3},"end":{"line":93,"column":30}},"28":{"start":{"line":93,"column":4},"end":{"line":93,"column":30}},"29":{"start":{"line":97,"column":3},"end":{"line":98,"column":11}},"30":{"start":{"line":98,"column":4},"end":{"line":98,"column":11}},"31":{"start":{"line":100,"column":3},"end":{"line":100,"column":23}},"32":{"start":{"line":102,"column":3},"end":{"line":102,"column":35}},"33":{"start":{"line":104,"column":3},"end":{"line":111,"column":6}},"34":{"start":{"line":114,"column":3},"end":{"line":123,"column":9}},"35":{"start":{"line":125,"column":3},"end":{"line":134,"column":4}},"36":{"start":{"line":126,"column":4},"end":{"line":133,"column":5}},"37":{"start":{"line":128,"column":5},"end":{"line":128,"column":44}},"38":{"start":{"line":130,"column":5},"end":{"line":132,"column":6}},"39":{"start":{"line":131,"column":6},"end":{"line":131,"column":44}},"40":{"start":{"line":136,"column":3},"end":{"line":136,"column":26}},"41":{"start":{"line":138,"column":3},"end":{"line":138,"column":24}},"42":{"start":{"line":140,"column":3},"end":{"line":140,"column":23}},"43":{"start":{"line":145,"column":3},"end":{"line":145,"column":38}},"44":{"start":{"line":147,"column":3},"end":{"line":147,"column":33}},"45":{"start":{"line":149,"column":3},"end":{"line":185,"column":4}},"46":{"start":{"line":153,"column":4},"end":{"line":154,"column":41}},"47":{"start":{"line":156,"column":4},"end":{"line":156,"column":93}},"48":{"start":{"line":159,"column":4},"end":{"line":163,"column":5}},"49":{"start":{"line":160,"column":5},"end":{"line":160,"column":31}},"50":{"start":{"line":162,"column":5},"end":{"line":162,"column":32}},"51":{"start":{"line":167,"column":4},"end":{"line":173,"column":5}},"52":{"start":{"line":170,"column":5},"end":{"line":170,"column":84}},"53":{"start":{"line":172,"column":5},"end":{"line":172,"column":18}},"54":{"start":{"line":176,"column":4},"end":{"line":184,"column":5}},"55":{"start":{"line":177,"column":5},"end":{"line":183,"column":8}},"56":{"start":{"line":187,"column":3},"end":{"line":188,"column":23}},"57":{"start":{"line":188,"column":4},"end":{"line":188,"column":23}},"58":{"start":{"line":198,"column":3},"end":{"line":201,"column":4}},"59":{"start":{"line":199,"column":4},"end":{"line":199,"column":44}},"60":{"start":{"line":200,"column":4},"end":{"line":200,"column":20}},"61":{"start":{"line":203,"column":3},"end":{"line":209,"column":4}},"62":{"start":{"line":204,"column":4},"end":{"line":208,"column":7}},"63":{"start":{"line":211,"column":3},"end":{"line":211,"column":14}},"64":{"start":{"line":214,"column":3},"end":{"line":214,"column":20}},"65":{"start":{"line":215,"column":3},"end":{"line":215,"column":56}},"66":{"start":{"line":305,"column":0},"end":{"line":305,"column":26}}},"branchMap":{"1":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":3},"end":{"line":64,"column":3}},{"start":{"line":64,"column":3},"end":{"line":64,"column":3}}]},"2":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":3},"end":{"line":73,"column":3}},{"start":{"line":73,"column":3},"end":{"line":73,"column":3}}]},"3":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":6},"end":{"line":73,"column":22}},{"start":{"line":73,"column":26},"end":{"line":73,"column":48}}]},"4":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":3},"end":{"line":76,"column":3}},{"start":{"line":76,"column":3},"end":{"line":76,"column":3}}]},"5":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":3},"end":{"line":83,"column":3}},{"start":{"line":83,"column":3},"end":{"line":83,"column":3}}]},"6":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":6},"end":{"line":83,"column":16}},{"start":{"line":83,"column":20},"end":{"line":83,"column":31}}]},"7":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":3},"end":{"line":92,"column":3}},{"start":{"line":92,"column":3},"end":{"line":92,"column":3}}]},"8":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":3},"end":{"line":97,"column":3}},{"start":{"line":97,"column":3},"end":{"line":97,"column":3}}]},"9":{"line":97,"type":"binary-expr","locations":[{"start":{"line":97,"column":6},"end":{"line":97,"column":18}},{"start":{"line":97,"column":23},"end":{"line":97,"column":37}},{"start":{"line":97,"column":41},"end":{"line":97,"column":65}}]},"10":{"line":115,"type":"cond-expr","locations":[{"start":{"line":115,"column":28},"end":{"line":115,"column":36}},{"start":{"line":115,"column":39},"end":{"line":115,"column":48}}]},"11":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":3},"end":{"line":125,"column":3}},{"start":{"line":125,"column":3},"end":{"line":125,"column":3}}]},"12":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":4},"end":{"line":126,"column":4}},{"start":{"line":126,"column":4},"end":{"line":126,"column":4}}]},"13":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":5},"end":{"line":130,"column":5}},{"start":{"line":130,"column":5},"end":{"line":130,"column":5}}]},"14":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":3},"end":{"line":149,"column":3}},{"start":{"line":149,"column":3},"end":{"line":149,"column":3}}]},"15":{"line":149,"type":"binary-expr","locations":[{"start":{"line":149,"column":7},"end":{"line":149,"column":16}},{"start":{"line":149,"column":20},"end":{"line":149,"column":29}}]},"16":{"line":153,"type":"binary-expr","locations":[{"start":{"line":153,"column":15},"end":{"line":153,"column":37}},{"start":{"line":153,"column":41},"end":{"line":153,"column":57}}]},"17":{"line":156,"type":"cond-expr","locations":[{"start":{"line":156,"column":34},"end":{"line":156,"column":81}},{"start":{"line":156,"column":84},"end":{"line":156,"column":91}}]},"18":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":4},"end":{"line":159,"column":4}},{"start":{"line":159,"column":4},"end":{"line":159,"column":4}}]},"19":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":4},"end":{"line":167,"column":4}},{"start":{"line":167,"column":4},"end":{"line":167,"column":4}}]},"20":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":4},"end":{"line":176,"column":4}},{"start":{"line":176,"column":4},"end":{"line":176,"column":4}}]},"21":{"line":187,"type":"if","locations":[{"start":{"line":187,"column":3},"end":{"line":187,"column":3}},{"start":{"line":187,"column":3},"end":{"line":187,"column":3}}]},"22":{"line":187,"type":"binary-expr","locations":[{"start":{"line":187,"column":6},"end":{"line":187,"column":20}},{"start":{"line":187,"column":24},"end":{"line":187,"column":48}}]},"23":{"line":198,"type":"if","locations":[{"start":{"line":198,"column":3},"end":{"line":198,"column":3}},{"start":{"line":198,"column":3},"end":{"line":198,"column":3}}]},"24":{"line":199,"type":"cond-expr","locations":[{"start":{"line":199,"column":34},"end":{"line":199,"column":37}},{"start":{"line":199,"column":40},"end":{"line":199,"column":43}}]},"25":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":3},"end":{"line":203,"column":3}},{"start":{"line":203,"column":3},"end":{"line":203,"column":3}}]},"26":{"line":215,"type":"binary-expr","locations":[{"start":{"line":215,"column":3},"end":{"line":215,"column":22}},{"start":{"line":215,"column":26},"end":{"line":215,"column":55}}]}},"code":["(function () { YUI.add('gallery-more-loader', function (Y, NAME) {","","/**","* You supply url, start, count and max variables in the container node as data-attributes","","* {start} and {max} are automatically replaced by the appropriate values. {dte} is replaced by the current time in milliseconds at the time of the load","*","* You can load based on a button click, a end of page scroll event (will be supplied later as an extension) or automcatically repeating","* The server content can be returned as HTML. In that case, supply a container attribute to append/prepend to, ","* or as XML or json, in that case, just listen for the load event and process appropriately.","*/","var NME='moreLoader',","SRC = 'container',","/**","* Event generated at the start of the loading process. Could be used to activate a busy screen or disabling the load more button","* url: the actual url used to retrieve content","*/","EVT_START='start',","/**","* Event generated when content is returned from the server","* status: the status of the server response","* content: the returned content from the server after processing optional contentSelector","* responseText: the full responseText from the server","*/","EVT_LOAD='load',","/**","* Event generated when an error occurs in the response. This could be used to update the UI with a network failure message or try again button","* status: the status of the server response","* content: the returned content from the server","* responseText: the full responseText from the server","*/","EVT_ERROR='error',","/**","* Event generated when the last page is reached. Only thrown when count > 0","* You can use this to hide the More button for example","*/","EVT_MAX='max';","","function MoreLoader(config) {","    MoreLoader.superclass.constructor.apply(this, arguments);","}","","MoreLoader.NAME = NME;","","Y.extend(","MoreLoader,","Y.Base,","\t{","\t\tinitializer:function(cfg){","\t\t\tvar src = this.get(SRC),","\t\t\tmoreBtn = this.get('moreBtn');","","\t\t\tthis.publish(EVT_LOAD,  {defaultFn: this._defCompleteFn, broadcast: 2});","\t\t\tthis.publish(EVT_START,  {});","\t\t\tthis.publish(EVT_ERROR,  {});","\t\t\tthis.publish(EVT_MAX,  {});","\t\t\t","\t\t\t//make sure that we're not getting all the data items if start or max is missing","\t\t\tthis.start = this.get('start');","\t\t\tthis.max = this.get('max');","\t\t\tthis.count = this.get('count');","\t\t\tthis.loading = false;","\t\t\t","\t\t\tif(moreBtn){","\t\t\t\tmoreBtn.on('click',function(e){","\t\t\t\t\tthis.loadContent(","\t\t\t\t\t\tthis._getUrl(cfg.url, this.start, this.max)","\t\t\t\t\t);","\t\t\t\t},this);","\t\t\t}","\t\t\t","\t\t\t//Fire a max event immediately upon loading so ui cleanup can be executed","\t\t\tif(this.count === 0 || this.max >= this.count)","\t\t\t\tthis.fire(EVT_MAX);","\t\t\t","\t\t\tif(this.get('autoRepeat') > 0)","\t\t\t\tthis.startTimer();","\t\t\t","\t\t},","\t\tstartTimer: function(){","\t\t\tvar repeat = this.get('autoRepeat') * 1000,","\t\t\tself = this;","\t\t\tif(repeat > 0 && !this.timer){","\t\t\t\tthis.timer = setInterval(function(){","\t\t\t\t\tself.loadContent(","\t\t\t\t\t\tself._getUrl(self.get('url'),self.start,self.max)","\t\t\t\t\t);","\t\t\t\t}, repeat);","\t\t\t}","\t\t},","\t\tstopTimer: function(){","\t\t\tif(this.timer)","\t\t\t\tclearInterval(this.timer);","\t\t},","\t\tloadContent:function(url){","\t\t\t","\t\t\tif(this.loading || (this.count > 0 && this.start >= this.count))","\t\t\t\treturn;","\t\t\t","\t\t\tthis.loading = true;","\t\t\t","\t\t\tthis.fire(EVT_START, {url:url});","\t\t\t","\t\t\tY.io(url,{","\t\t\t\ton:{","\t\t\t\t\tsuccess:this._processResult,","\t\t\t\t\tfailure:this._processResult","\t\t\t\t},","\t\t\t\ttimeour:10000,","\t\t\t\tcontext:this","\t\t\t});","\t\t},","\t\t_processResult:function(transactionid,res){","\t\t\tvar status\t\t= res.status,","\t\t\t\tevent\t\t= status < 300 ? EVT_LOAD : EVT_ERROR,","\t\t\t\tnewContent \t= content = res.responseText,","\t\t\t\tselector \t= this.get('contentSelector'),","\t\t\t\te\t\t\t= {","\t\t\t\t\t\t\t\tstart\t\t: this.start,","\t\t\t\t\t\t\t\toriginal    : content,","\t\t\t\t\t\t\t\tresponseText: res.responseText,","\t\t\t\t\t\t\t\tstatus      : status","\t\t\t\t\t\t\t};","","\t\t\tif(event === EVT_LOAD){","\t\t\t\tif(newContent){","\t\t\t\t\t","\t\t\t\t\tnewContent = Y.Node.create(newContent);","\t\t\t\t\t","\t\t\t\t\tif(selector !== null){","\t\t\t\t\t\tnewContent = newContent.one(selector);","\t\t\t\t\t}","\t\t\t\t}\t","\t\t\t}","\t\t\t","\t\t\te.content = newContent;","\t\t\t","\t\t\tthis.loading = false;","\t\t\t","\t\t\tthis.fire(event, e);","\t\t\t","\t\t},","\t\t_defCompleteFn:function(e){","\t\t\t","\t\t\tthis.start = this.start + this.max;","\t\t\t","\t\t\tvar container = this.get(SRC);","","\t\t\tif (container && e.content) {","\t\t\t","\t\t\t\t//if we insert any content into a Node.create here that is considered invalid, YUI just removes it, e.g. tr.","\t\t\t\t//So we can only animate when we are working with div based nodes","\t\t\t\tvar anim = e.content.one('> div') && this.get('anim'),","\t\t\t\tcontent = e.content.get('innerHTML');","\t\t\t\t","\t\t\t\tcontent = Y.Node.create(anim? '<div style=\"opacity:0;\">' + content + '</div>' : content);","\t\t\t\t//content = Y.Node.create(anim? '<div style=\"opacity:0;\">' + e.content + '</div>' : e.content);","\t\t\t\t","\t\t\t\tif(this.get('append')){","\t\t\t\t\tcontainer.append(content);","\t\t\t\t}else{","\t\t\t\t\tcontainer.prepend(content);","\t\t\t\t}","\t\t\t\t","\t\t\t\t//If we have in-line javascript within the retrieved HTML, it will not be executed by appending the content to the dom","\t\t\t\t//So we need to get all the script elements and evaluate them","\t\t\t\tif(this.get('processJSNodes')){","\t\t\t\t","\t\t\t\t\t//We need to evaluate javascript from the entire page, not just the selected content","\t\t\t\t\tvar script = Y.Node.create(e.original).all('script').get('innerHTML').join(\"\");","\t\t\t\t\t","\t\t\t\t\teval(script);","\t\t\t\t}","","\t\t\t\t","\t\t\t\tif(anim){","\t\t\t\t\tcontent.transition({","\t\t\t\t\t\topacity:{","\t\t\t\t\t\t\teasing: 'ease-in',","\t\t\t\t\t\t\tduration: 0.6,","\t\t\t\t\t\t\tvalue:100","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t}","\t\t\t}","\t\t\t","\t\t\tif(this.count > 0 && this.start >= this.count)","\t\t\t\tthis.fire(EVT_MAX);","\t\t},","\t\t/**","\t\t* Supports url such as http://myurl/{st}/{mx} or http://myurl/?start={st}&max={mx}","\t\t* Parameters that are supported are ","\t\t* {st}","\t\t* {mx}","\t\t* {dte} : current date time in millis","\t\t*/","\t\t_getUrl:function(url,start,max){","\t\t\tif(this.get(\"addPjaxParam\")){","\t\t\t\turl += url.indexOf(\"?\") > -1? \"&\" : \"?\";","\t\t\t\turl += \"pjax=1\";","\t\t\t}","\t\t\t","\t\t\tif(url.indexOf('{st}') > -1){","\t\t\t\treturn Y.Lang.sub(url,{","\t\t\t\t\tst: start,","\t\t\t\t\tmx: max,","\t\t\t\t\tdte: new Date().getMilliseconds()","\t\t\t\t});","\t\t\t}","\t\t\t","\t\t\treturn url;","\t\t},","\t\tdestructor:function(){","\t\t\tthis.stopTimer();","\t\t\tthis.get('moreBtn') && this.get('moreBtn').destroy();","\t\t\t","\t\t}","\t","\t},{","\t\tATTRS:{","\t\t\t/**","\t\t\t* The url supplied to the loader ","\t\t\t* url format options: ","\t\t\t* http://myurl/?start={start}&max={max}","\t\t\t* http://myurl/?start={start}&max={max}&dte={dte}","\t\t\t* http://myurl/?dte={dte}","\t\t\t* http://myurl/","\t\t\t*/","\t\t\turl:null,","\t\t\t/**","\t\t\t* the start value of loading","\t\t\t*/","\t\t\tstart:{","\t\t\t\tvalue:0","\t\t\t},","\t\t\t/**","\t\t\t* The max value for loading. Since we're not counting items when we're loading","\t\t\t* every load is assumed to contain the maximum amount of elements","\t\t\t*/","\t\t\tmax:{","\t\t\t\tvalue:0","\t\t\t},","\t\t\t/**","\t\t\t* The total number of results. If 0, it is assumed that loading is \"endless\" ","\t\t\t* in which case it is recommendable to use a url which supports the dte={dte} parameter which supplies the current time in milliseconds","\t\t\t*/","\t\t\tcount:{","\t\t\t\tvalue:0","\t\t\t},","\t\t\t/**","\t\t\t* Should the retrieved content be appended or prepended","\t\t\t*/","\t\t\tappend:{","\t\t\t\tvalue:true","\t\t\t},","\t\t\t/**","\t\t\t* Allows you to turn off animation, which can be useful in situtions where adding a wrapping div is illegal, such as with tables","\t\t\t*/","\t\t\tanim:{","\t\t\t\tvalue:true","\t\t\t},","\t\t\t/**","\t\t\t* Repeat the loading event automatically every x seconds.","\t\t\t* With this function it is recommended that use a dte variable in the url and process it on the server to avoid duplicate results","\t\t\t*/","\t\t\tautoRepeat:{","\t\t\t\tvalue : 0","\t\t\t},","\t\t\t/**","\t\t\t* Container node to automatically append/prepend retrieved content to.","\t\t\t* If container = null it is assumed you will handle the processing yourself through the supplied events","\t\t\t*/ ","\t\t\tcontainer:{","\t\t\t\tvalue:null,","\t\t\t\tsetter:Y.one","\t\t\t},","\t\t\t/**","\t\t\t* If no moreBtn is supplied, when a user scrolls to the end of the page, more content is loaded, if available","\t\t\t*/","\t\t\tmoreBtn: {","\t\t\t\tvalue:null,","\t\t\t\tsetter:Y.one","\t\t\t},","\t\t\t/**","\t\t\t* Select a specific node in the returned content. The content in this node will be selected to be inserted into the page","\t\t\t*/","\t\t\tcontentSelector:{","\t\t\t\tvalue:null","\t\t\t},","\t\t\t/**","\t\t\t* Evaluates the content of any Javascript nodes found in the retrieved content","\t\t\t*/","\t\t\tprocessJSNodes:{","\t\t\t\tvalue:true","\t\t\t},","\t\t\t/**","\t\t\t* Appends a variable to every request: pjax=1","\t\t\t*/","\t\t\taddPjaxParam:{","\t\t\t\tvalue:true","\t\t\t}","\t\t}","});","","Y.MoreLoader = MoreLoader;","","}, 'gallery-2012.12.05-21-01', {\"requires\": [\"node-base\", \"io-base\", \"transition\"]});","","}());"]};
}
var __cov_m3KmVNaNuk96lYJYDSrL$w = __coverage__['build/gallery-more-loader/gallery-more-loader.js'];
__cov_m3KmVNaNuk96lYJYDSrL$w.s['1']++;YUI.add('gallery-more-loader',function(Y,NAME){__cov_m3KmVNaNuk96lYJYDSrL$w.f['1']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['2']++;var NME='moreLoader',SRC='container',EVT_START='start',EVT_LOAD='load',EVT_ERROR='error',EVT_MAX='max';__cov_m3KmVNaNuk96lYJYDSrL$w.s['3']++;function MoreLoader(config){__cov_m3KmVNaNuk96lYJYDSrL$w.f['2']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['4']++;MoreLoader.superclass.constructor.apply(this,arguments);}__cov_m3KmVNaNuk96lYJYDSrL$w.s['5']++;MoreLoader.NAME=NME;__cov_m3KmVNaNuk96lYJYDSrL$w.s['6']++;Y.extend(MoreLoader,Y.Base,{initializer:function(cfg){__cov_m3KmVNaNuk96lYJYDSrL$w.f['3']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['7']++;var src=this.get(SRC),moreBtn=this.get('moreBtn');__cov_m3KmVNaNuk96lYJYDSrL$w.s['8']++;this.publish(EVT_LOAD,{defaultFn:this._defCompleteFn,broadcast:2});__cov_m3KmVNaNuk96lYJYDSrL$w.s['9']++;this.publish(EVT_START,{});__cov_m3KmVNaNuk96lYJYDSrL$w.s['10']++;this.publish(EVT_ERROR,{});__cov_m3KmVNaNuk96lYJYDSrL$w.s['11']++;this.publish(EVT_MAX,{});__cov_m3KmVNaNuk96lYJYDSrL$w.s['12']++;this.start=this.get('start');__cov_m3KmVNaNuk96lYJYDSrL$w.s['13']++;this.max=this.get('max');__cov_m3KmVNaNuk96lYJYDSrL$w.s['14']++;this.count=this.get('count');__cov_m3KmVNaNuk96lYJYDSrL$w.s['15']++;this.loading=false;__cov_m3KmVNaNuk96lYJYDSrL$w.s['16']++;if(moreBtn){__cov_m3KmVNaNuk96lYJYDSrL$w.b['1'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['17']++;moreBtn.on('click',function(e){__cov_m3KmVNaNuk96lYJYDSrL$w.f['4']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['18']++;this.loadContent(this._getUrl(cfg.url,this.start,this.max));},this);}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['1'][1]++;}__cov_m3KmVNaNuk96lYJYDSrL$w.s['19']++;if((__cov_m3KmVNaNuk96lYJYDSrL$w.b['3'][0]++,this.count===0)||(__cov_m3KmVNaNuk96lYJYDSrL$w.b['3'][1]++,this.max>=this.count)){__cov_m3KmVNaNuk96lYJYDSrL$w.b['2'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['20']++;this.fire(EVT_MAX);}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['2'][1]++;}__cov_m3KmVNaNuk96lYJYDSrL$w.s['21']++;if(this.get('autoRepeat')>0){__cov_m3KmVNaNuk96lYJYDSrL$w.b['4'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['22']++;this.startTimer();}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['4'][1]++;}},startTimer:function(){__cov_m3KmVNaNuk96lYJYDSrL$w.f['5']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['23']++;var repeat=this.get('autoRepeat')*1000,self=this;__cov_m3KmVNaNuk96lYJYDSrL$w.s['24']++;if((__cov_m3KmVNaNuk96lYJYDSrL$w.b['6'][0]++,repeat>0)&&(__cov_m3KmVNaNuk96lYJYDSrL$w.b['6'][1]++,!this.timer)){__cov_m3KmVNaNuk96lYJYDSrL$w.b['5'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['25']++;this.timer=setInterval(function(){__cov_m3KmVNaNuk96lYJYDSrL$w.f['6']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['26']++;self.loadContent(self._getUrl(self.get('url'),self.start,self.max));},repeat);}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['5'][1]++;}},stopTimer:function(){__cov_m3KmVNaNuk96lYJYDSrL$w.f['7']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['27']++;if(this.timer){__cov_m3KmVNaNuk96lYJYDSrL$w.b['7'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['28']++;clearInterval(this.timer);}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['7'][1]++;}},loadContent:function(url){__cov_m3KmVNaNuk96lYJYDSrL$w.f['8']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['29']++;if((__cov_m3KmVNaNuk96lYJYDSrL$w.b['9'][0]++,this.loading)||(__cov_m3KmVNaNuk96lYJYDSrL$w.b['9'][1]++,this.count>0)&&(__cov_m3KmVNaNuk96lYJYDSrL$w.b['9'][2]++,this.start>=this.count)){__cov_m3KmVNaNuk96lYJYDSrL$w.b['8'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['30']++;return;}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['8'][1]++;}__cov_m3KmVNaNuk96lYJYDSrL$w.s['31']++;this.loading=true;__cov_m3KmVNaNuk96lYJYDSrL$w.s['32']++;this.fire(EVT_START,{url:url});__cov_m3KmVNaNuk96lYJYDSrL$w.s['33']++;Y.io(url,{on:{success:this._processResult,failure:this._processResult},timeour:10000,context:this});},_processResult:function(transactionid,res){__cov_m3KmVNaNuk96lYJYDSrL$w.f['9']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['34']++;var status=res.status,event=status<300?(__cov_m3KmVNaNuk96lYJYDSrL$w.b['10'][0]++,EVT_LOAD):(__cov_m3KmVNaNuk96lYJYDSrL$w.b['10'][1]++,EVT_ERROR),newContent=content=res.responseText,selector=this.get('contentSelector'),e={start:this.start,original:content,responseText:res.responseText,status:status};__cov_m3KmVNaNuk96lYJYDSrL$w.s['35']++;if(event===EVT_LOAD){__cov_m3KmVNaNuk96lYJYDSrL$w.b['11'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['36']++;if(newContent){__cov_m3KmVNaNuk96lYJYDSrL$w.b['12'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['37']++;newContent=Y.Node.create(newContent);__cov_m3KmVNaNuk96lYJYDSrL$w.s['38']++;if(selector!==null){__cov_m3KmVNaNuk96lYJYDSrL$w.b['13'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['39']++;newContent=newContent.one(selector);}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['13'][1]++;}}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['12'][1]++;}}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['11'][1]++;}__cov_m3KmVNaNuk96lYJYDSrL$w.s['40']++;e.content=newContent;__cov_m3KmVNaNuk96lYJYDSrL$w.s['41']++;this.loading=false;__cov_m3KmVNaNuk96lYJYDSrL$w.s['42']++;this.fire(event,e);},_defCompleteFn:function(e){__cov_m3KmVNaNuk96lYJYDSrL$w.f['10']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['43']++;this.start=this.start+this.max;__cov_m3KmVNaNuk96lYJYDSrL$w.s['44']++;var container=this.get(SRC);__cov_m3KmVNaNuk96lYJYDSrL$w.s['45']++;if((__cov_m3KmVNaNuk96lYJYDSrL$w.b['15'][0]++,container)&&(__cov_m3KmVNaNuk96lYJYDSrL$w.b['15'][1]++,e.content)){__cov_m3KmVNaNuk96lYJYDSrL$w.b['14'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['46']++;var anim=(__cov_m3KmVNaNuk96lYJYDSrL$w.b['16'][0]++,e.content.one('> div'))&&(__cov_m3KmVNaNuk96lYJYDSrL$w.b['16'][1]++,this.get('anim')),content=e.content.get('innerHTML');__cov_m3KmVNaNuk96lYJYDSrL$w.s['47']++;content=Y.Node.create(anim?(__cov_m3KmVNaNuk96lYJYDSrL$w.b['17'][0]++,'<div style="opacity:0;">'+content+'</div>'):(__cov_m3KmVNaNuk96lYJYDSrL$w.b['17'][1]++,content));__cov_m3KmVNaNuk96lYJYDSrL$w.s['48']++;if(this.get('append')){__cov_m3KmVNaNuk96lYJYDSrL$w.b['18'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['49']++;container.append(content);}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['18'][1]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['50']++;container.prepend(content);}__cov_m3KmVNaNuk96lYJYDSrL$w.s['51']++;if(this.get('processJSNodes')){__cov_m3KmVNaNuk96lYJYDSrL$w.b['19'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['52']++;var script=Y.Node.create(e.original).all('script').get('innerHTML').join('');__cov_m3KmVNaNuk96lYJYDSrL$w.s['53']++;eval(script);}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['19'][1]++;}__cov_m3KmVNaNuk96lYJYDSrL$w.s['54']++;if(anim){__cov_m3KmVNaNuk96lYJYDSrL$w.b['20'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['55']++;content.transition({opacity:{easing:'ease-in',duration:0.6,value:100}});}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['20'][1]++;}}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['14'][1]++;}__cov_m3KmVNaNuk96lYJYDSrL$w.s['56']++;if((__cov_m3KmVNaNuk96lYJYDSrL$w.b['22'][0]++,this.count>0)&&(__cov_m3KmVNaNuk96lYJYDSrL$w.b['22'][1]++,this.start>=this.count)){__cov_m3KmVNaNuk96lYJYDSrL$w.b['21'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['57']++;this.fire(EVT_MAX);}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['21'][1]++;}},_getUrl:function(url,start,max){__cov_m3KmVNaNuk96lYJYDSrL$w.f['11']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['58']++;if(this.get('addPjaxParam')){__cov_m3KmVNaNuk96lYJYDSrL$w.b['23'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['59']++;url+=url.indexOf('?')>-1?(__cov_m3KmVNaNuk96lYJYDSrL$w.b['24'][0]++,'&'):(__cov_m3KmVNaNuk96lYJYDSrL$w.b['24'][1]++,'?');__cov_m3KmVNaNuk96lYJYDSrL$w.s['60']++;url+='pjax=1';}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['23'][1]++;}__cov_m3KmVNaNuk96lYJYDSrL$w.s['61']++;if(url.indexOf('{st}')>-1){__cov_m3KmVNaNuk96lYJYDSrL$w.b['25'][0]++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['62']++;return Y.Lang.sub(url,{st:start,mx:max,dte:new Date().getMilliseconds()});}else{__cov_m3KmVNaNuk96lYJYDSrL$w.b['25'][1]++;}__cov_m3KmVNaNuk96lYJYDSrL$w.s['63']++;return url;},destructor:function(){__cov_m3KmVNaNuk96lYJYDSrL$w.f['12']++;__cov_m3KmVNaNuk96lYJYDSrL$w.s['64']++;this.stopTimer();__cov_m3KmVNaNuk96lYJYDSrL$w.s['65']++;(__cov_m3KmVNaNuk96lYJYDSrL$w.b['26'][0]++,this.get('moreBtn'))&&(__cov_m3KmVNaNuk96lYJYDSrL$w.b['26'][1]++,this.get('moreBtn').destroy());}},{ATTRS:{url:null,start:{value:0},max:{value:0},count:{value:0},append:{value:true},anim:{value:true},autoRepeat:{value:0},container:{value:null,setter:Y.one},moreBtn:{value:null,setter:Y.one},contentSelector:{value:null},processJSNodes:{value:true},addPjaxParam:{value:true}}});__cov_m3KmVNaNuk96lYJYDSrL$w.s['66']++;Y.MoreLoader=MoreLoader;},'gallery-2012.12.05-21-01',{'requires':['node-base','io-base','transition']});
