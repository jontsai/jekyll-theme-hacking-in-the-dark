YUI.add("gallery-nmresizer",function(e,t){e.Nmresizer=e.Base.create("nmresizer",e.Widget,[],{initializer:function(e){},loadAndResize:function(t){if(typeof t.newdiv=="undefined")return;if(typeof t.resizediv=="undefined")return;t.olddiv&&!t.olddiv.match(/^(#|\.)/)&&(t.olddiv="#"+t.olddiv),t.newdiv.match(/^(#|\.)/)||(t.newdiv="#"+t.newdiv),t.resizediv.match(/^(#|\.)/)||(t.resizediv="#"+t.resizediv),t.resizeclass&&!t.resizeclass.match(/^\./)&&(t.resizeclass="."+t.resizeclass),typeof t.animDuration!="undefined"&&this.set("animDuration",t.animDuration),typeof t.maxWidth!="undefined"&&(t.maxWidth=String(t.maxWidth),t.maxWidth.match(/px$/)&&(t.maxWidth=t.maxWidth.replace(/px$/,"")),this.set("maxWidth",t.maxWidth)),typeof t.maxHeight!="undefined"&&(t.maxHeight=String(t.maxHeight),t.maxHeight.match(/px$/)&&(t.maxHeight=t.maxHeight.replace(/px$/,"")),this.set("maxHeight",t.maxHeight)),typeof t.restrainHeight!="undefined"&&(t.restrainHeight=String(t.restrainHeight),t.restrainHeight.match(/px$/)&&(t.restrainHeight=t.restrainHeight.replace(/px$/,"")),this.set("restrainHeight",t.restrainHeight)),typeof t.restrainWidth!="undefined"&&(t.restrainWidth=String(t.restrainWidth),t.restrainWidth.match(/px$/)&&(t.restrainWidth=t.restrainWidth.replace(/px$/,"")),this.set("restrainWidth",t.restrainWidth)),typeof t.offsetWidth!="undefined"&&(t.offsetWidth=String(t.offsetWidth),t.offsetWidth.match(/px$/)&&(t.offsetWidth=t.offsetWidth.replace(/px$/,"")),this.set("offsetWidth",t.offsetWidth)),typeof t.offsetHeight!="undefined"&&(t.offsetHeight=String(t.offsetHeight),t.offsetHeight.match(/px$/)&&(t.offsetHeight=t.offsetHeight.replace(/px$/,"")),this.set("offsetHeight",t.offsetHeight)),t.resizediv=t.resizediv?t.resizediv:t.newdiv,t.oldtabheight=e.one(t.resizediv).getComputedStyle("height"),t.oldtabwidth=e.one(t.resizediv).getComputedStyle("width");if(e.one(t.newdiv+" img")){var n=e.all(t.newdiv+" img").size(),r=0,i=[],s=this;e.all(t.newdiv+" img").each(function(e,o){e.get("src")&&e.get("src").match(/\.(jpg|jpeg|gif|png)$/i)?(i[o]=new Image,i[o].src=e.get("src"),i[o].onload=function(){r++,r==n&&s.doLoadAndResize(t)},i[o].onerror=function(){r++,r==n&&s.doLoadAndResize(t)}):(n--,n||this.doLoadAndResize(t))},this)}else this.doLoadAndResize(t)},doLoadAndResize:function(t){var n=this.get("restrainWidth")?this.get("restrainWidth")+"px":"auto",r=this.get("restrainHeight")?this.get("restrainHeight")+"px":"auto";e.one(t.newdiv).setStyles({display:"block",position:"absolute",left:"-5000px",visibility:"hidden",width:n,height:r}),e.one(t.newdiv).removeClass("displaynone");if(typeof t.noWidthResize=="undefined"||!t.noWidthResize)t.newtabwidth=parseInt(e.one(t.newdiv).get("offsetWidth"))+parseInt(this.get("offsetWidth"))+"px",this.get("maxWidth")&&parseInt(t.newtabwidth,10)>this.get("maxWidth")&&(t.newtabwidth=this.get("maxWidth")+"px");if(typeof t.noHeightResize=="undefined"||!t.noHeightResize)t.newtabheight=parseInt(e.one(t.newdiv).get("offsetHeight"))+parseInt(this.get("offsetHeight"))+"px",this.get("maxHeight")&&parseInt(t.newtabheight,10)>this.get("maxHeight")&&(t.newtabheight=this.get("maxHeight")+"px");t.onStart&&t.onStart(t),e.one(t.newdiv).setStyles({position:"",left:""}),e.one(t.resizediv).setStyles({width:t.oldtabwidth,height:t.oldtabheight}),t.olddiv!==t.newdiv&&e.one(t.olddiv).setStyles({display:"none",width:"",height:""});if(t.oldtabheight==t.newtabheight&&t.oldtabwidth==t.newtabwidth)e.one(t.newdiv).setStyles({display:"block",visibility:"visible"}),t.resizediv!==t.newdiv&&e.one(t.newdiv).setStyles({width:"auto",height:"auto"}),t.onEnd&&t.onEnd(t);else{var i={easing:"ease-out",duration:this.get("animDuration")};typeof t.newtabwidth!="undefined"&&(i.width=t.newtabwidth),typeof t.newtabheight!="undefined"&&(i.height=t.newtabheight),typeof t.resizeclass!="undefined"&&t.resizeclass&&(t.resizediv=t.resizeclass),e.all(t.resizediv).transition(i,function(){e.one(t.newdiv).setStyles({visibility:"visible"}),t.resizediv!==t.newdiv&&e.one(t.newdiv).setStyles({width:"auto",height:"auto"}),t.onEnd&&t.onEnd(t)})}}},{ATTRS:{animDuration:{value:.5},maxHeight:{value:0},maxWidth:{value:0},restrainHeight:{value:0},restrainWidth:{value:0},offsetWidth:{value:0},offsetHeight:{value:0}}})},"gallery-2013.05.10-00-54",{supersedes:[""],requires:["base-build","widget","event-mouseenter","node","transition"],optional:[""]});
