YUI.add("gallery-conway",function(a){(function(e,p){var h=null,f="cellChange",s="grid",m="height",r="initOnly",k="width",o=true,g=e.Array,c=e.Async,d=e.Base,w=e.Lang,b=Math,t=e.each,v=g.filter,j=b.floor,z=g.indexOf,i=w.isArray,y=w.isFunction,q=w.isValue,l=function(A){return i(A)?A:[A];},x=b.max,u=b.min,n=e.soon;e.Conway=d.create(p,d,[],{destructor:function(){delete this._history;},getCell:function(A,B){return this.get(s)[q(B)?A+B*this.get(k):A];},initializer:function(){var D=this,B=D.get(s),A=0,C=D.get(m)*D.get(k);D.publish(f,{defaultFn:D._cellChange});while(A<C){B.push(false);A+=1;}D._history={};},setCell:function(B,G,F){var A,C,E=this,D=E.get(k);if(q(F)){C=B+G*D;}else{C=B;F=G;B=C%D;G=j(C/D);}A=E.get(s)[C];if(A!==F){E.fire(f,{cell:A,height:E.get(m),index:C,toroidal:E.get("toroidal"),width:D,x:B,y:G});}return E;},step:function(G){var H=this,D=H.getAttrs(),K=D.birth,A=D.grid.slice(),J=D.height,F=H._history,I=D.life,C=[],E=D.toroidal,B=D.width;t(F,function(M,L){C.push(function(N){n(function(){N(H._cellStep(A,J,B,L,K,I,E));});});});c.runQueue(C).on("complete",function(L){var M=v(L.value,function(N){if(N){H.fire(f,{cell:N.cell,height:J,index:N.index,toroidal:E,width:B,x:N.x,y:N.y});}return N;});if(y(G)){G(M);}});H._history={};return H;},_cellChange:function(K){var G=this,J=!K.cell,L=K.height,F=G._history,E,C,D,B,A=K.width,I=K.x,H=K.y,M;G.get(s)[K.index]=J;K.cell=J;if(K.toroidal){for(D=H-1;D<=H+1;D+=1){M=(D<0?L-1:D>=L?0:D)*A;for(E=I-1;E<=I+1;E+=1){F[(E<0?A-1:E>=A?0:E)+M]=o;}}}else{C=u(I+1,A-1);B=u(H+1,L-1);for(D=x(H-1,0);D<=B;D+=1){M=D*A;for(E=x(I-1,0);E<=C;E+=1){F[E+M]=o;}}}return G;},_cellStep:function(A,M,B,G,P,K,H){var L=A[G],F,E,D,C,N=0,J=G%B,I=j(G/B),O;if(H){for(D=I-1;D<=I+1;D+=1){O=(D<0?M-1:D>=M?0:D)*B;for(F=J-1;F<=J+1;F+=1){if((F!==J||D!==I)&&A[(F<0?B-1:F>=B?0:F)+O]){N+=1;}}}}else{E=u(J+1,B-1);C=u(I+1,M-1);for(D=x(I-1,0);D<=C;D+=1){O=D*B;for(F=x(J-1,0);F<=E;F+=1){if((F!==J||D!==I)&&A[F+O]){N+=1;}}}}if(L&&z(K,N)===-1||!L&&z(P,N)!==-1){return{cell:L,index:G,x:J,y:I};}return h;}},{ATTRS:{birth:{setter:l,value:[3]},grid:{readOnly:o,value:[]},height:{value:h,writeOnce:r},life:{setter:l,value:[2,3]},toroidal:{value:false},width:{value:h,writeOnce:r}}});}(a,arguments[1]));},"gallery-2012.07.11-21-38",{requires:["array-extras","gallery-async","gallery-soon"],skinnable:false});