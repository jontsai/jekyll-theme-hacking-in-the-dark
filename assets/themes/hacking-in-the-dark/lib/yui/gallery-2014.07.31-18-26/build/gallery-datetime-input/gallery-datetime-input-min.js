YUI.add("gallery-datetime-input",function(e,t){
/*!
 * gallery-datetime-input
 * Copyright (C) 2012 by Markandey <tweet:@markandey>
 * YUI gallery module , that can popup datetime chooser to choose dateime for an input.
 * e.g. code
 * -----------------------------------------
 *         new Y.DateTimeInput({
 *                 inputBox:"#mydatetime"
 *          });
 * ------------------------------------------
 * Code licensed under "Do what ever you want!"
 * http://www.markandey.com/
 */
;var n=[{value:"-12.0",text:"(GMT -12:00) Eniwetok, Kwajalein"},{value:"-11.0",text:"(GMT -11:00) Midway Island, Samoa"},{value:"-10.0",text:"(GMT -10:00) Hawaii"},{value:"-9.0",text:"(GMT -9:00) Alaska"},{value:"-8.0",text:"(GMT -8:00) Pacific Time (US & Canada)"},{value:"-7.0",text:"(GMT -7:00) Mountain Time (US & Canada)"},{value:"-6.0",text:"(GMT -6:00) Central Time (US & Canada), Mexico City"},{value:"-5.0",text:"(GMT -5:00) Eastern Time (US & Canada), Bogota, Lima"},{value:"-4.0",text:"(GMT -4:00) Atlantic Time (Canada), Caracas, La Paz"},{value:"-3.5",text:"(GMT -3:30) Newfoundland"},{value:"-3.0",text:"(GMT -3:00) Brazil, Buenos Aires, Georgetown"},{value:"-2.0",text:"(GMT -2:00) Mid-Atlantic"},{value:"-1.0",text:"(GMT -1:00 hour) Azores, Cape Verde Islands"},{value:"0.0",text:"(GMT) Western Europe Time, London, Lisbon, Casablanca"},{value:"1.0",text:"(GMT +1:00 hour) Brussels, Copenhagen, Madrid, Paris"},{value:"2.0",text:"(GMT +2:00) Kaliningrad, South Africa"},{value:"3.0",text:"(GMT +3:00) Baghdad, Riyadh, Moscow, St. Petersburg"},{value:"3.5",text:"(GMT +3:30) Tehran"},{value:"4.0",text:"(GMT +4:00) Abu Dhabi, Muscat, Baku, Tbilisi"},{value:"4.5",text:"(GMT +4:30) Kabul"},{value:"5.0",text:"(GMT +5:00) Ekaterinburg, Islamabad, Karachi, Tashkent"},{value:"5.5",text:"(GMT +5:30) Bombay, Calcutta, Madras, New Delhi"},{value:"5.75",text:"(GMT +5:45) Kathmandu"},{value:"6.0",text:"(GMT +6:00) Almaty, Dhaka, Colombo"},{value:"7.0",text:"(GMT +7:00) Bangkok, Hanoi, Jakarta"},{value:"8.0",text:"(GMT +8:00) Beijing, Perth, Singapore, Hong Kong"},{value:"9.0",text:"(GMT +9:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk"},{value:"9.5",text:"(GMT +9:30) Adelaide, Darwin"},{value:"10.0",text:"(GMT +10:00) Eastern Australia, Guam, Vladivostok"},{value:"11.0",text:"(GMT +11:00) Magadan, Solomon Islands, New Caledonia"},{value:"12.0",text:"(GMT +12:00) Auckland, Wellington, Fiji, Kamchatka"}],r='<div class="yui3-gallery-datetime-selected-value"></div><div class="yui3-gallery-datetime-calendar"></div><div class="yui3-gallery-datetime-slider-ctrl-wrap"><div class="yui3-gallery-datetime-left-lbl"><label>Hour : </label><span class="yui3-gallery-datetime-sel-hrs">0</span></div><div class="yui3-gallery-datetime-right-slider"><div class="yui3-gallery-datetime-hour-slider"></div></div></div><div class="yui3-gallery-datetime-slider-ctrl-wrap"><div class="yui3-gallery-datetime-left-lbl"><label>Min : </label><span class="yui3-gallery-datetime-sel-min">0</span></div><div class="yui3-gallery-datetime-right-slider"><div class="yui3-gallery-datetime-minute-slider"></div></div></div><div class="yui3-gallery-datetime-slider-ctrl-wrap"><div class="yui3-gallery-datetime-left-lbl-tz"><label>TimeZone: </label></div><div class="yui3-gallery-datetime-right-select"><select class="yui3-gallery-datetime-zoneselect"></select></div></div>',i='<div>Selected: <span class="yui3-gallery-datetime-selected-value">Fri Nov 02 2012 04:36:00 GMT+0530 (IST)</span></div>',s='<div><button class="yui3-gallery-datetime-selected-btn yui3-button notice">Done</button></div>';e.DateTimeInput=e.Base.create("datetime-Input",e.Widget,[e.WidgetPosition,e.WidgetPositionAlign,e.WidgetAutohide],{initializer:function(t){var n=e.one(t.inputBox);if(!n)throw"inputBox can not be null or invalid";this.inputNode=n,this.oldInputNodeValue=n.get("value"),this._bindUI()},_bindUI:function(){var t=this;this.inputNode.on("focus",function(){e.all(".yui3-gallery-datetime-overlay").setStyle("display","none"),t.showUI()}),this.inputNode.on("keyup",function(){t._loadDate&&t.oldInputNodeValue!==t.inputNode.get("value")&&(t._valueParseTimer&&clearTimeout(t._valueParseTimer),t._valueParseTimer=setTimeout(function(){t._loadDate(t.inputNode.get("value")),t._valueParseTimer=null},1e3))})},showUI:function(){if(!this.uiOverlay){var t=new e.Overlay({headerContent:i,bodyContent:r,footerContent:s});t.render(),t.set("align",{node:this.inputNode,points:this.get("alignPoints")}),t.get("srcNode").addClass("yui3-gallery-datetime-overlay"),this.uiOverlay=t,this._initControls(),this._loadDate(this.inputNode.get("value")),this._dumpDate()}this.uiOverlay.set("align",{node:this.inputNode,points:this.get("alignPoints")}),this.uiOverlay.get("srcNode").setStyle("display","block"),this.uiOverlay.set("visible",!0),this._calendar.set("visible",!0)},_initControls:function(){function y(e){var n="{calpart} {hour}:{minute}:00 GMT{tz}",r=v.get("selectedDates")[0]||new Date,s;n=n.replace("{calpart}",r.toDateString()),n=n.replace("{hour}",p(m.get("value"),2)),n=n.replace("{minute}",p(g.get("value"),2)),s=d(a.get("value")),n=n.replace("{tz}",s),t._widgetDate=new Date(n),f.set("innerText",p(m.get("value"),2)),l.set("innerText",p(g.get("value"),2)),i.set("innerText",n),e!==!0&&t.inputNode.set("value",t._widgetDate),t.oldInputNodeValue=t.inputNode.get("value")}function b(e){""+new Date(e)=="Invalid Date"&&(e=""+new Date);var t=new Date(e),n=t.getTimezoneOffset();a.get("options").each(function(e){-1*n/60===e.get("value")*1&&e.set("selected",!0)}),v.deselectDates(),v.selectDates([t]),v.set("date",t),m.set("value",t.getHours()),g.set("value",t.getMinutes()),y(!0)}var t=this,r=this.uiOverlay.get("srcNode"),i=r.one(".yui3-gallery-datetime-selected-value"),s=r.one(".yui3-gallery-datetime-calendar"),o=r.one(".yui3-gallery-datetime-hour-slider"),u=r.one(".yui3-gallery-datetime-minute-slider"),a=r.one(".yui3-gallery-datetime-zoneselect"),f=r.one(".yui3-gallery-datetime-sel-hrs"),l=r.one(".yui3-gallery-datetime-sel-min"),c=r.one(".yui3-gallery-datetime-selected-btn"),h=function(){var t='<option value="{value}">{text}</option>',r="",i;for(i=0;i<n.length;i++)r+=e.substitute(t,n[i]);e.one(a).appendChild(e.Node.create(r))},p=function(e,t,n){e*=1;var r=""+Math.abs(e);while(r.length<t)r="0"+r;return e<0?"-"+r:n?"+"+r:r},d=function(e){var t=e,n,r,i;return n=Math.floor(t),r=t*60%60,i=p(n,2,!0)+p(r,2),i},v,m,g;if(t._controlsInitialized)return;v=(new e.Calendar({contentBox:s,width:"350px",selectionMode:"single",showPrevMonth:!0,showNextMonth:!0,date:new Date})).render(),m=(new e.Slider({min:0,max:23,value:0})).render(o),g=(new e.Slider({min:0,max:59,value:0})).render(u),h(),c.on("click",function(){t.hideUI()}),v.on("selectionChange",function(){y()}),m.on("valueChange",function(){y()}),g.on("valueChange",function(){y()}),e.one(a).on("change",function(){y()}),t._calendar=v,t._sliderHour=m,t._sliderMinute=g,t._timezoneSelectbox=a,t._loadDate=b,t._dumpDate=y,t._controlsInitialized=!0},hideUI:function(){this.uiOverlay&&(this.uiOverlay.set("visible",!1),this._calendar.set("visible",!1))},destructor:function(){this.uiOverlay&&(this.uiOverlay.get("srcNode").remove(),this.uiOverlay.destory())}},{ATTRS:{inputBox:{value:null},visible:{value:!1},alignPoints:{value:[e.WidgetPositionAlign.TL,e.WidgetPositionAlign.BL],setter:function(e){return this.uiOverlay&&this.uiOverlay.set("align",{node:this.inputNode,points:e}),e}},_inputNode:{valueFn:function(){return e.one(this.get("inputBox"))}}}})},"gallery-2012.12.12-21-11",{requires:["yui-base","overlay","cssbutton","event","calendar","slider","widget-position","widget-position-align","widget-autohide"]});
