YUI.add("gallery-stockindicators-3-14-patch",function(e,t){var n=e.Lang.isArray,r=e.config.doc,i=e.ClassNameManager.getClassName,s=i("seriesmarker"),o=function(e){var t={},r,i;for(r in e)e.hasOwnProperty(r)&&(i=e[r],typeof i=="object"&&!n(i)?t[r]=this._copyObject(i):t[r]=i);return t},u=function(e){var t=this.get("graphic"),n,r=this._copyObject(e);return r.type=r.shape,n=t.addShape(r),n.addClass(s),n},a,f,l,c,h;e.CanvasGraphic&&(e.CanvasGraphic.prototype.render=function(t){var n=t||r.body,i=this._node,s,o;return t instanceof e.Node?n=t._node:e.Lang.isString(t)&&(n=e.Selector.query(t,r.body,!0)),s=this.get("width")||parseInt(e.DOM.getComputedStyle(n,"width"),10),o=this.get("height")||parseInt(e.DOM.getComputedStyle(n,"height"),10),n.appendChild(i),i.style.display="block",i.style.position="absolute",i.style.left=this.get("x")+"px",i.style.top=this.get("y")+"px",this.set("width",s),this.set("height",o),this.parentNode=n,this}),e.Axis&&(h=function(t,n,r,i,s){var o,u,a;return e.Lang.isNumber(i)?(o=n-t,u=r/o,a=(i-t)*u,a=s+a):a=NaN,a},e.CategoryAxisBase.prototype._getCoordFromValue=h,e.CategoryAxis.prototype._getCoordFromValue=h,e.CategoryAxis.prototype._getLabelData=function(t,n,r,i,s,o,u,a,f){var l,c,h=[],p=[],d,v,m=this.get("data"),g=o;f=f||m;for(c=0;c<a;c+=1)l=f[c],v=e.Array.indexOf(m,l),e.Lang.isNumber(v)&&v>-1&&(d={},d[n]=t,d[r]=this._getCoordFromValue(i,s,u,v,g),h.push(d),p.push(l));return{points:h,values:p}},c=function(t,n,r,i,s,o){var u,a,f,l=e.Lang.isNumber;return i=parseFloat(i),l(i)?(this.get("scaleType")==="logarithmic"&&t>0&&(t=Math.log(t),n=Math.log(n),i=Math.log(i)),u=n-t,a=r/u,f=(i-t)*a,f=o?s-f:s+f):f=NaN,f},e.NumericAxisBase.prototype._getCoordFromValue=c,e.NumericAxis.prototype._getCoordFromValue=c,e.NumericAxis.prototype._getDataValuesByCount=function(e,t,n){var r=[],i=t,s=e-1,o=n-t,u=o/s,a;for(a=0;a<s;a+=1)r.push(i),i+=u;return r.push(n),r},e.NumericAxis.prototype._getLabelData=function(e,t,n,r,i,s,o,u,a){var f,l,c=[],h=[],p,d=t==="x",v=d?o+s:s;a=a||this._getDataValuesByCount(u,r,i);for(l=0;l<u;l+=1)f=parseFloat(a[l]),f<=i&&f>=r&&(p={},p[t]=e,p[n]=this._getCoordFromValue(r,i,o,f,v,d),c.push(p),h.push(f));return{points:c,values:h}},e.BottomAxisLayout.prototype.positionLabel=function(e,t,n,r){var i=this,s=parseFloat(n.label.offset),o=i.get("bottomTickOffset"),u=n.label,a=0,f=i._labelRotationProps,l=f.rot,c=f.absRot,h=Math.round(t.x),p=Math.round(t.y),d=i._labelWidths[r],v=i._labelHeights[r];u.margin&&u.margin.top&&(a=u.margin.top),l===90?(p-=v/2*l/90,h=h+v/2-v*s):l===-90?(p-=v/2*c/90,h=h-d+v/2-v*s):l>0?(h=h+v/2-v*s,p-=v/2*l/90):l<0?(h=h-d+v/2-v*s,p-=v/2*c/90):h-=d*s,p+=a,p+=o,f.labelWidth=d,f.labelHeight=v,f.x=h,f.y=p,i._rotate(e,f)},e.LeftAxisLayout.prototype.positionLabel=function(e,t,n,r){var i=this,s=parseFloat(n.label.offset),o=i.get("leftTickOffset"),u=this._totalTitleSize,a=t.x+u-o,f=t.y,l=this._labelRotationProps,c=l.rot,h=l.absRot,p=i._maxLabelSize,d=this._labelWidths[r],v=this._labelHeights[r];c===0?(a-=d,f-=v*s):c===90?(a-=d*.5,f=f+d/2-d*s):c===-90?(a-=d*.5,f=f-v+d/2-d*s):(a-=d+v*h/360,f-=v*s),l.labelWidth=d,l.labelHeight=v,l.x=Math.round(p+a),l.y=Math.round(f),this._rotate(e,l)},e.TopAxisLayout.prototype.positionLabel=function(e,t,n,r){var i=this,s=parseFloat(n.label.offset),o=this._totalTitleSize,u=i._maxLabelSize,a=t.x,f=t.y+o+u,l=this._labelRotationProps,c=l.rot,h=l.absRot,p=this._labelWidths[r],d=this._labelHeights[r];c===0?(a-=p*s,f-=d):c===90?(a=a-p+d/2-d*s,f-=d*.5):c===-90?(a=a+d/2-d*s,f-=d*.5):c>0?(a=a-p+d/2-d*s,f-=d-d*c/180):(a=a+d/2-d*s,f-=d-d*h/180),l.x=Math.round(a),l.y=Math.round(f),l.labelWidth=p,l.labelHeight=d,this._rotate(e,l)},e.RightAxisLayout.prototype.positionLabel=function(e,t,n,r){var i=this,s=parseFloat(n.label.offset),o=i.get("rightTickOffset"),u=n.label,a=0,f=t.x,l=t.y,c=this._labelRotationProps,h=c.rot,p=c.absRot,d=this._labelWidths[r],v=this._labelHeights[r];u.margin&&u.margin.left&&(a=u.margin.left),h===0?l-=v*s:h===90?(f-=d*.5,l=l-v+d/2-d*s):h===-90?(l=l+d/2-d*s,f-=d*.5):(l-=v*s,f+=v/2*p/90),f+=a,f+=o,c.labelWidth=d,c.labelHeight=v,c.x=Math.round(f),c.y=Math.round(l),this._rotate(e,c)},a=function(){if(this._drawing){this._callLater=!0;return}this._drawing=!0,this._callLater=!1;if(this._layout){var e=this.get("styles"),t=e.line,n=e.label,r=e.majorTicks,i=r.display!=="none",s,o=0,u=this._layout,a,f,l,c,h,p=this.get("labelFunction"),d=this.get("labelFunctionScope"),v=this.get("labelFormat"),m=this.get("graphic"),g=this.get("path"),y,b,w=this.get("position"),E,S,x,T,N,C,k,L,A,O,M,_=this._labelValuesExplicitlySet?this.get("labelValues"):null,D=w==="left"||w==="right"?"vertical":"horizontal";this._labelWidths=[],this._labelHeights=[],m.set("autoDraw",!1),g.clear(),g.set("stroke",{weight:t.weight,color:t.color,opacity:t.alpha}),this._labelRotationProps=this._getTextRotationProps(n),this._labelRotationProps.transformOrigin=u._getTransformOrigin(this._labelRotationProps.rot),u.setTickOffsets.apply(this),a=this.getLength(),s=this.getTotalMajorUnits(),M=this.getEdgeOffset(s,a),this.set("edgeOffset",M),f=u.getLineStart.apply(this),D==="vertical"?(A="x",O="y"):(A="y",O="x"),E=this._getLabelData(f[A],A,O,this.get("minimum"),this.get("maximum"),M,a-M-M,s,_),T=E.points,S=E.values,s=T.length,this._labelValuesExplicitlySet||this.set("labelValues",S,{src:"internal"}),this.get("hideFirstMajorUnit")&&(N=T.shift(),k=S.shift(),s-=1),this.get("hideLastMajorUnit")&&(C=T.pop(),L=S.pop(),s-=1);if(s<1)this._clearLabelCache();else{this.drawLine(g,f,this.getLineEnd(f));if(i){y=this.get("tickPath"),y.clear(),y.set("stroke",{weight:r.weight,color:r.color,opacity:r.alpha});for(o=0;o<s;o+=1)x=T[o],x&&u.drawTick.apply(this,[y,T[o],r])}this._createLabelCache(),this._maxLabelSize=0,this._totalTitleSize=0,this._titleSize=0,this._setTitle(),b=u.getExplicitlySized.apply(this,[e]);for(o=0;o<s;o+=1)x=T[o],x&&(l=this.getLabel(n),this._labels.push(l),this.get("appendLabelFunction")(l,p.apply(d,[S[o],v])),c=Math.round(l.offsetWidth),h=Math.round(l.offsetHeight),b||this._layout.updateMaxLabelSize
.apply(this,[c,h]),this._labelWidths.push(c),this._labelHeights.push(h));this._clearLabelCache(),this.get("overlapGraph")&&u.offsetNodeForTick.apply(this,[this.get("contentBox")]),u.setCalculatedSize.apply(this),this._titleTextField&&this._layout.positionTitle.apply(this,[this._titleTextField]),s=this._labels.length;for(o=0;o<s;++o)u.positionLabel.apply(this,[this.get("labels")[o],T[o],e,o]);N&&T.unshift(N),C&&T.push(C),k&&S.unshift(k),L&&S.push(L),this._tickPoints=T}}this._drawing=!1,this._callLater?this._drawAxis():(this._updatePathElement(),this.fire("axisRendered"))},f=function(){var t={majorTicks:{display:"inside",length:4,color:"#dad8c9",weight:1,alpha:1},minorTicks:{display:"none",length:2,color:"#dad8c9",weight:1},line:{weight:1,color:"#dad8c9",alpha:1},majorUnit:{determinant:"count",count:11,distance:75},top:"0px",left:"0px",width:"100px",height:"100px",label:{color:"#808080",alpha:1,fontSize:"85%",rotation:0,offset:.5,margin:{top:undefined,right:undefined,bottom:undefined,left:undefined}},title:{color:"#808080",alpha:1,fontSize:"85%",rotation:undefined,margin:{top:undefined,right:undefined,bottom:undefined,left:undefined}},hideOverlappingLabelTicks:!1};return e.merge(e.Renderer.prototype._getDefaultStyles(),t)},l=function(t){var n,i,s=this._labelCache,o={rotation:"rotation",margin:"margin",alpha:"alpha"};s&&s.length>0?i=s.shift():(i=r.createElement("span"),i.className=e.Lang.trim([i.className,"axisLabel"].join(" ")),this.get("contentBox").append(i)),r.createElementNS||i.style.filter&&(i.style.filter=null),i.style.display="block",i.style.whiteSpace="nowrap",i.style.position="absolute";for(n in t)t.hasOwnProperty(n)&&!o.hasOwnProperty(n)&&(i.style[n]=t[n]);return i},e.CategoryAxis.prototype._getDefaultStyles=f,e.NumericAxis.prototype._getDefaultStyles=f,e.CategoryAxis.prototype._drawAxis=a,e.NumericAxis.prototype._drawAxis=a,e.CategoryAxis.prototype.getLabel=l,e.NumericAxis.prototype.getLabel=l),e.MarkerSeries&&(e.MarkerSeries.prototype._copyObject=o,e.MarkerSeries.prototype._createMarker=u,e.MarkerSeries.prototype.drawPlots=function(){if(!this.get("xcoords")||this.get("xcoords").length<1)return;var t=e.Lang.isNumber,r=this._copyObject(this.get("styles").marker),i=r.width,s=r.height,o=this.get("xcoords"),u=this.get("ycoords"),a=0,f=o.length,l=u[0],c,h,p=i/2,d=s/2,v,m,g=null,y=null,b=this.get("graphOrder"),w=this.get("groupMarkers");if(w){v=[],m=[];for(;a<f;++a)v.push(parseFloat(o[a]-p)),m.push(parseFloat(u[a]-d));this._createGroupMarker({xvalues:v,yvalues:m,fill:r.fill,border:r.border,dimensions:{width:i,height:s},graphOrder:b,shape:r.shape});return}n(r.fill.color)&&(g=r.fill.color.concat()),n(r.border.color)&&(y=r.border.color.concat()),this._createMarkerCache();for(;a<f;++a){l=parseFloat(u[a]-d),c=parseFloat(o[a]-p);if(!t(c)||!t(l)){this._markers.push(null);continue}g&&(r.fill.color=g[a%g.length]),y&&(r.border.color=y[a%y.length]),r.x=c,r.y=l,h=this.getMarker(r,b,a)}this._clearMarkerCache()},e.MarkerSeries.prototype.updateMarkerState=function(e,t){if(this._markers&&this._markers[t]){var n,r,i=this._copyObject(this.get("styles").marker),s=this._getState(e),o=this.get("xcoords"),u=this.get("ycoords"),a=this._markers[t],f=s==="off"||!i[s]?i:i[s];f.fill.color=this._getItemColor(f.fill.color,t),f.border.color=this._getItemColor(f.border.color,t),f.stroke=f.border,a.set(f),n=f.width,r=f.height,a.set("x",o[t]-n/2),a.set("y",u[t]-r/2),a.set("visible",this.get("visible")),a.get("graphic")._redraw()}}),e.ColumnSeries&&(e.ColumnSeries.prototype._copyObject=o,e.ColumnSeries.prototype._createMarker=u,e.ColumnSeries.prototype.drawSeries=function(){if(this.get("xcoords").length<1)return;var t=this._copyObject(this.get("styles").marker),n=this.get("graphic"),r,i,s=this.get("xcoords"),o=this.get("ycoords"),u=0,a=s.length,f=o[0],l=this.get("seriesTypeCollection"),c=l?l.length:0,h=0,p=0,d=0,v,m,g=this.get("order"),y=this.get("graphOrder"),b,w,E,S,x,T=null,N=null,C=[],k=[],L,A,O,M,_={width:[],height:[]},D=[],P=[],H=this.get("groupMarkers");e.Lang.isArray(t.fill.color)&&(T=t.fill.color.concat()),e.Lang.isArray(t.border.color)&&(N=t.border.color.concat()),this.get("direction")==="vertical"?(E="height",S="width"):(E="width",S="height"),r=t[E],i=t[S],this._createMarkerCache(),this._maxSize=n.get(E);if(l&&c>1){for(;u<c;++u)m=l[u],h+=m.get("styles").marker[E],g>u&&(d=h);p=a*h,p>this._maxSize&&(v=n.get(E)/p,h*=v,d*=v,r*=v,r=Math.max(r,1),this._maxSize=r)}else h=t[E],p=a*h,p>this._maxSize&&(h=this._maxSize/a,this._maxSize=h);d-=h/2;for(u=0;u<a;++u){L=s[u]-h/2,A=L+h,O=o[u]-h/2,M=O+h,C.push({start:L,end:A}),k.push({start:O,end:M});if(!H&&(isNaN(s[u])||isNaN(o[u]))){this._markers.push(null);continue}x=this._getMarkerDimensions(s[u],o[u],i,d),!isNaN(x.calculatedSize)&&x.calculatedSize>0?(f=x.top,b=x.left,H?(_[E][u]=r,_[S][u]=x.calculatedSize,D.push(b),P.push(f)):(t[E]=r,t[S]=x.calculatedSize,t.x=b,t.y=f,T&&(t.fill.color=T[u%T.length]),N&&(t.border.color=N[u%N.length]),w=this.getMarker(t,y,u))):H||this._markers.push(null)}this.set("xMarkerPlane",C),this.set("yMarkerPlane",k),H?this._createGroupMarker({fill:t.fill,border:t.border,dimensions:_,xvalues:D,yvalues:P,shape:t.shape}):this._clearMarkerCache()},e.ColumnSeries.prototype.updateMarkerState=function(e,t){if(this._markers&&this._markers[t]){var n=this._copyObject(this.get("styles").marker),r,i=this._getState(e),s=this.get("xcoords"),o=this.get("ycoords"),u=this._markers[t],a,f,l=this.get("seriesTypeCollection"),c=l?l.length:0,h=0,p=0,d,v=0,m=[],g=this.get("order"),y;r=i==="off"||!n[i]?this._copyObject(n):this._copyObject(n[i]),r.fill.color=this._getItemColor(r.fill.color,t),r.border.color=this._getItemColor(r.border.color,t),y=this._getMarkerDimensions(s[t],o[t],n.width,p),r.height=y.calculatedSize,r.width=Math.min(this._maxSize,r.width),u.set(r);for(;v<c;++v)m[v]=s[t]+h,f=l[v].get("styles").marker,h+=Math.min(this._maxSize,f.width),g>v&&(p=h),p-=h/2;for(v=0;v<c;++v)a=l[v].get("markers"),a&&(d=a[t],d&&d!==undefined&&d.set("x",m[v]-h/2));u.get("graphic")._redraw
()}}),e.CandlestickSeries&&(e.RangeSeries.prototype._getDefaultStyles=function(){var t={spacing:3};return this._mergeStyles(t,e.RangeSeries.superclass._getDefaultStyles())},e.CandlestickSeries.prototype._calculateMarkerWidth=function(e,t,n){var r=0;while(r<3&&n>-1)n-=1,r=Math.round(e/t-n),r%2===0&&(r-=1);return Math.max(1,r)},e.CandlestickSeries.prototype.drawSeries=function(){var e=this.get("xcoords"),t=this.get("ycoords"),n=this.get("styles"),r=n.padding,i=e.length,s=this.get("width")-(r.left+r.right),o=this.get("ohlckeys"),u=t[o.open],a=t[o.high],f=t[o.low],l=t[o.close],c=this._calculateMarkerWidth(s,i,n.spacing),h=c/2;this._drawMarkers(e,u,a,f,l,i,c,h,n)},e.CandlestickSeries.prototype._drawMarkers=function(t,n,r,i,s,o,u,a,f){var l=this.get("upcandle"),c=this.get("downcandle"),h,p=this.get("wick"),d=f.wick,v=d.width,m,g,y,b,w,E,S,x,T,N,C=f.padding.left,k,L,A=e.Lang.isNumber;l.set(f.upcandle),c.set(f.downcandle),p.set({fill:d.fill,stroke:d.stroke,shapeRendering:d.shapeRendering}),l.clear(),c.clear(),p.clear();for(L=0;L<o;L+=1)m=Math.round(t[L]+C),E=m-a,S=m+a,g=Math.round(n[L]),y=Math.round(r[L]),b=Math.round(i[L]),w=Math.round(s[L]),k=g>w,x=k?w:g,T=k?g:w,N=T-x,h=k?l:c,h&&A(E)&&A(x)&&A(u)&&A(N)&&h.drawRect(E,x,u,N),A(m)&&A(y)&&A(b)&&p.drawRect(m-v/2,y,v,b-y);l.end(),c.end(),p.end(),p.toBack()},e.CandlestickSeries.prototype._getDefaultStyles=function(){var t={upcandle:{shapeRendering:"crispEdges",fill:{color:"#00aa00",alpha:1},stroke:{color:"#000000",alpha:1,weight:0}},downcandle:{shapeRendering:"crispEdges",fill:{color:"#aa0000",alpha:1},stroke:{color:"#000000",alpha:1,weight:0}},wick:{shapeRendering:"crispEdges",width:1,fill:{color:"#000000",alpha:1},stroke:{color:"#000000",alpha:1,weight:0}}};return this._mergeStyles(t,e.CandlestickSeries.superclass._getDefaultStyles())})},"gallery-2014.01.28-00-45");
