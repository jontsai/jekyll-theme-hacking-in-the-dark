YUI.add("gallery-itsapluginpromise",function(e,t){"use strict";function r(){}var n=2e4;e.mix(r.prototype,{hasPlugin:function(e){var t=this,n=t._plugins[e]&&t[e],r=t._promisedplugins&&t._promisedplugins[e];return n||r},hasPluginReady:function(e){var t=this,n=t._plugins[e]&&t[e];return n?t[e].readyPromise().getStatus()==="fulfilled":!1},plugAfterReadyPromise:function(){var e=this,t=arguments,n=t[0],r=n&&n.NS;return e._definePromiseNS(n),e._hostReadyPromise(t[2]).then(function(){e.plug.apply(e,t),e._undefinePromiseNS(n)}).then(function(){return n&&n.readyPromise&&n.readyPromise(t[2])||!0}).then(function(){return e[r]})},plugAfterRenderPromise:function(){var e=this,t=arguments,n=t[0],r=n&&n.NS;return e._definePromiseNS(n),e._hostRenderPromise(t[2]).then(function(){e.plug.apply(e,t),e._undefinePromiseNS(n)}).then(function(){return n&&n.readyPromise&&n.readyPromise(t[2])||!0}).then(function(){return e[r]})},pluginReady:function(t,r){var i=this;return new e.Promise(function(s,o){var u;i[t]?s(i[t]):(u=e.later(50,null,function(){i[t]&&(s(i[t]),u.cancel())},null,!0),r===0||e.later(r||n,null,function(){var e="pluginReady is rejected by timeout of "+(r||n)+" ms";o(new Error(e))}))})},plugPromise:function(){var t=this,n=arguments,r=n[0],i=r&&r.readyPromise;return new e.Promise(function(e,s){t.plug.apply(t,n),i?i(n[2]).then(function(){e(r&&t[r.ns])},s):e(r&&t[r.NS])})},_definePromiseNS:function(e){var t=this;e&&(t._promisedplugins||(t._promisedplugins={}),t._promisedplugins[e]=!0)},_undefinePromiseNS:function(e){var t=this;e&&delete t._promisedplugins[e]},_hostReadyPromise:function(t){var n=this;return n._hostreadypromise||(n._hostreadypromise=new e.Promise(function(r,i){e.Widget&&n instanceof e.Widget?e.use("gallery-itsawidgetrenderpromise",function(){n.readyPromise(t).then(r,i)}):r()})),n._hostreadypromise},_hostRenderPromise:function(t){var n=this;return n._hostrenderpromise||(n._hostrenderpromise=new e.Promise(function(r,i){e.Widget&&n instanceof e.Widget?e.use("gallery-itsawidgetrenderpromise",function(){n.renderPromise(t).then(r,i)}):i(new Error("Host is no widget"))})),n._hostrenderpromise}}),e.Plugin.Host.ITSAPluginPromise=r,e.Base.mix(e.Plugin.Host,[r]),e.Base.mix(e.Node,[r]),e.Plugin.Base.prototype.promiseBeforeReady=function(){return new e.Promise(function(e){e()})},e.Plugin.Base.prototype.readyPromise=function(t){var r=this;return r._readypromise||(r._readypromise=new e.Promise(function(i,s){r.promiseBeforeReady().then(i,s),t!==0&&e.later(t||n,null,function(){var e="readyPromise is rejected by timeout of "+(t||n)+" ms";s(new Error(e))})})),r._readypromise}},"gallery-2013.10.14-07-00",{requires:["yui-base","base-base","base-build","pluginhost-base","plugin","event-delegate","yui-later","promise"]});
