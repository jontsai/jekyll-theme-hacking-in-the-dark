YUI.add("gallery-time-format",function(d){var c=/(\d{4})-?(\d{2})(?:-?(\d{2}))?T(\d{2}):(\d{2})(?::(\d{2}))?(\+\d{2}|Z|)/,b="";function a(f){var g=new Date(null),h=f.match(c),e;if(!h){return b;}h.shift();e=h.pop();g.setFullYear(h.shift(),h.shift()-1,h.shift());if(h[0]){g.setUTCHours(h.shift());}if(h[0]){g.setUTCMinutes(h.shift());}if(h[0]){g.setUTCSeconds(h.shift());}return g;}d.Do.before(function(h,g){var f,e,i;if(d.Lang.isString(h)){h=a(h);}if(!h){throw new Error("time is required");}g=d.Lang.isString(g)?{format:g}:g||{};f=g.relativeDelta||0;i=g.from||new Date();if(d.Lang.isNumber(f)&&f>0&&i-h<=f*1000){e=d.Do.after(function(){d.Do.detach(e);return new d.Do.AlterReturn("relative advice",d.toRelativeTime(h,i));},d.DataType.Date,"format");return new d.Do.Prevent("return relative format instead");}return new d.Do.AlterArgs("altered configs",[h,g]);},d.DataType.Date,"format");},"gallery-2012.08.01-13-16",{requires:["datatype-date","gallery-torelativetime","event-custom-base"],skinnable:false});