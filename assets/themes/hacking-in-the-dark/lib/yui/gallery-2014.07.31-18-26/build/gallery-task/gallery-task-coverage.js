if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-task/gallery-task.js']) {
   __coverage__['build/gallery-task/gallery-task.js'] = {"path":"build/gallery-task/gallery-task.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":24},"end":{"line":1,"column":43}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":9},"end":{"line":33,"column":26}}},"3":{"name":"Task","line":45,"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":21}}},"4":{"name":"(anonymous_4)","line":54,"loc":{"start":{"line":54,"column":33},"end":{"line":54,"column":60}}},"5":{"name":"(anonymous_5)","line":61,"loc":{"start":{"line":61,"column":23},"end":{"line":61,"column":40}}},"6":{"name":"(anonymous_6)","line":76,"loc":{"start":{"line":76,"column":18},"end":{"line":76,"column":35}}},"7":{"name":"(anonymous_7)","line":79,"loc":{"start":{"line":79,"column":16},"end":{"line":79,"column":33}}},"8":{"name":"(anonymous_8)","line":118,"loc":{"start":{"line":118,"column":42},"end":{"line":118,"column":66}}},"9":{"name":"(anonymous_9)","line":145,"loc":{"start":{"line":145,"column":4},"end":{"line":145,"column":28}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":175,"column":58}},"2":{"start":{"line":4,"column":0},"end":{"line":5,"column":36}},"3":{"start":{"line":7,"column":0},"end":{"line":12,"column":1}},"4":{"start":{"line":9,"column":4},"end":{"line":9,"column":28}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":29}},"6":{"start":{"line":33,"column":0},"end":{"line":35,"column":2}},"7":{"start":{"line":34,"column":4},"end":{"line":34,"column":35}},"8":{"start":{"line":45,"column":0},"end":{"line":94,"column":1}},"9":{"start":{"line":46,"column":4},"end":{"line":46,"column":20}},"10":{"start":{"line":54,"column":4},"end":{"line":75,"column":7}},"11":{"start":{"line":61,"column":8},"end":{"line":67,"column":10}},"12":{"start":{"line":62,"column":12},"end":{"line":66,"column":13}},"13":{"start":{"line":63,"column":16},"end":{"line":63,"column":44}},"14":{"start":{"line":65,"column":16},"end":{"line":65,"column":31}},"15":{"start":{"line":74,"column":8},"end":{"line":74,"column":29}},"16":{"start":{"line":76,"column":4},"end":{"line":78,"column":6}},"17":{"start":{"line":77,"column":8},"end":{"line":77,"column":31}},"18":{"start":{"line":79,"column":4},"end":{"line":81,"column":6}},"19":{"start":{"line":80,"column":8},"end":{"line":80,"column":25}},"20":{"start":{"line":88,"column":4},"end":{"line":93,"column":5}},"21":{"start":{"line":89,"column":8},"end":{"line":89,"column":39}},"22":{"start":{"line":90,"column":8},"end":{"line":90,"column":20}},"23":{"start":{"line":92,"column":8},"end":{"line":92,"column":25}},"24":{"start":{"line":118,"column":0},"end":{"line":170,"column":2}},"25":{"start":{"line":119,"column":4},"end":{"line":120,"column":20}},"26":{"start":{"line":122,"column":4},"end":{"line":130,"column":5}},"27":{"start":{"line":124,"column":8},"end":{"line":125,"column":40}},"28":{"start":{"line":129,"column":8},"end":{"line":129,"column":30}},"29":{"start":{"line":132,"column":4},"end":{"line":132,"column":31}},"30":{"start":{"line":136,"column":4},"end":{"line":144,"column":5}},"31":{"start":{"line":137,"column":8},"end":{"line":137,"column":34}},"32":{"start":{"line":140,"column":11},"end":{"line":144,"column":5}},"33":{"start":{"line":141,"column":8},"end":{"line":141,"column":49}},"34":{"start":{"line":143,"column":8},"end":{"line":143,"column":33}},"35":{"start":{"line":146,"column":4},"end":{"line":146,"column":15}},"36":{"start":{"line":148,"column":4},"end":{"line":160,"column":5}},"37":{"start":{"line":150,"column":8},"end":{"line":151,"column":40}},"38":{"start":{"line":154,"column":8},"end":{"line":158,"column":9}},"39":{"start":{"line":155,"column":12},"end":{"line":155,"column":38}},"40":{"start":{"line":157,"column":12},"end":{"line":157,"column":27}},"41":{"start":{"line":159,"column":8},"end":{"line":159,"column":15}},"42":{"start":{"line":161,"column":4},"end":{"line":161,"column":25}},"43":{"start":{"line":165,"column":4},"end":{"line":169,"column":5}},"44":{"start":{"line":166,"column":8},"end":{"line":166,"column":44}},"45":{"start":{"line":168,"column":8},"end":{"line":168,"column":28}},"46":{"start":{"line":172,"column":0},"end":{"line":172,"column":19}}},"branchMap":{"1":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":12},"end":{"line":62,"column":12}},{"start":{"line":62,"column":12},"end":{"line":62,"column":12}}]},"2":{"line":118,"type":"cond-expr","locations":[{"start":{"line":118,"column":42},"end":{"line":145,"column":1}},{"start":{"line":145,"column":4},"end":{"line":170,"column":1}}]},"3":{"line":124,"type":"cond-expr","locations":[{"start":{"line":124,"column":42},"end":{"line":124,"column":66}},{"start":{"line":125,"column":16},"end":{"line":125,"column":39}}]},"4":{"line":136,"type":"if","locations":[{"start":{"line":136,"column":4},"end":{"line":136,"column":4}},{"start":{"line":136,"column":4},"end":{"line":136,"column":4}}]},"5":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":11},"end":{"line":140,"column":11}},{"start":{"line":140,"column":11},"end":{"line":140,"column":11}}]},"6":{"line":150,"type":"cond-expr","locations":[{"start":{"line":150,"column":42},"end":{"line":150,"column":66}},{"start":{"line":151,"column":16},"end":{"line":151,"column":39}}]},"7":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":8},"end":{"line":154,"column":8}},{"start":{"line":154,"column":8},"end":{"line":154,"column":8}}]},"8":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":4},"end":{"line":165,"column":4}},{"start":{"line":165,"column":4},"end":{"line":165,"column":4}}]}},"code":["(function () { YUI.add('gallery-task', function (Y, NAME) {","","/* jshint evil: true */","var supportsES6Syntax = false,","    isPromise = Y.Promise.isPromise;","","try {","    // check if a function with an asterisk is valid syntax by evaluating it","    eval(\"function* f(){}\");","    supportsES6Syntax = true;","} catch (e) {","}","","/**","Wraps a generator function in a Task. Tasks allow you to yield a promise,","effectively treating your promise based code as synchronous.","","@method task","@for YUI","@param {Function} spawn Function that yield generators.","@return {Promise} Promise that gets resolved or rejected based on the result of","                the generator function","@example","<pre><code>","YUI().use('gallery-io-utils', 'gallery-task', function (Y) {","  Y.task(function () {","    var data = yield Y.io.getJSON('/foo.json');","    yield Y.io.postJSON('/bar', {data: data});","  });","});","</pre></code>","**/","Y.task = function (spawn) {","    return new Task(spawn).promise;","};","","/**","This class is not intended to be instantiated by the user, but to be used","internally by `Y.task()`.","","@class task.Task","@constructor","@param {Function} spawn A generator function","**/","function Task(spawn) {","    var self = this;","","    /**","    A promise to be returned by `Y.task()`.","","    @property promise","    @type {Promise}","    **/","    this.promise = new Y.Promise(function (fulfill, reject) {","        /**","        Resolves the exposed promise with the provided value","","        @method resolve","        @param {Any} value Any value","        **/","        self.resolve = function (value) {","            if (Y.Promise.isPromise(value)) {","                value.then(fulfill, reject);","            } else {","                fulfill(value);","            }","        };","        /**","        Rejects the exposed promise with the provided reason","","        @method reject","        @param {Any} reason Any value for the rejection reason. Usually an error.","        **/","        self.reject = reject;","    });","    this.accept = function (value) {","        self.next(null, value);","    };","    this.fail = function (error) {","        self.next(error);","    };","    /**","    The generator instance.","","    @property thread","    @type {Object}","    **/","    try {","        this.thread = spawn.call(this);","        this.next();","    } catch (err) {","        this.reject(err);","    }","}","/**","Step function that gets called every time the generator function yields.","When a promise is yielded, it observes the promise's result. If the promise","is successfully resolved, it calls itself with a null error and the value","of the promise. If the promise was rejected, it calls itself with an error.","","Internally it passes the value or the error to the generator's `throw()`","or `send()` methods, so that the error or value passed to it are the value","taken by the left side of the yield expression:","","<pre><code>","// the value of foo is the value passed as the second parameter","// of task.next()","var foo = yield somePromise;","</code></pre>","","This function rewrites itself for all instances of Task the first time it","is called, being replaced by _nextES6 or _nextFF depending on the platform.","","@method next","@param {Any} [error] An optional error to pass to the generator function","@param {Any} [value] A value to pass to the generator function","**/","Task.prototype.next = supportsES6Syntax ? function (error, value) {","    var result,","        resultValue;","","    try {","        // using arguments.length to allow rejections for falsy reasons","        result = arguments.length === 1 ? this.thread.throw(error) :","                this.thread.send(value);","    } catch (e) {","        // error thrown inside the generator function are turned into","        // rejections for the promise that Y.task() returns","        return this.reject(e);","    }","","    resultValue = result.value;","    ","    // ES6 generators return an object that in the last iteration have a","    // \"done\" property. When done, resolve the promise.","    if (result.done) {","        this.resolve(resultValue);","    // Using isPromise and not Y.when() to prevent speedbumps in Node","    // This may be revisited if there is an async behavior we want to keep","    } else if (isPromise(resultValue)) {","        resultValue.then(this.accept, this.fail);","    } else {","        this.accept(resultValue);","    }","} : function (error, value) {","    var result;","","    try {","        // using arguments.length to allow rejections for falsy reasons","        result = arguments.length === 1 ? this.thread.throw(error) :","                this.thread.send(value);","    } catch (e) {","        // Old Firefox iterators throw an exception when done","        if (e instanceof StopIteration) {","            this.resolve(this.result);","        } else {","            this.reject(e);","        }","        return;","    }","    this.result = result;","","    // Using isPromise and not Y.when() to prevent speedbumps in Node","    // This may be revisited if there is an async behavior we want to keep","    if (isPromise(result)) {","        result.then(this.accept, this.fail);","    } else {","        this.accept(result);","    }","};","","Y.task.Task = Task;","","","}, 'gallery-2013.05.15-21-12', {\"requires\": [\"promise\"]});","","}());"]};
}
var __cov_vT2$cegNugM29SsFSJ1vdg = __coverage__['build/gallery-task/gallery-task.js'];
__cov_vT2$cegNugM29SsFSJ1vdg.s['1']++;YUI.add('gallery-task',function(Y,NAME){__cov_vT2$cegNugM29SsFSJ1vdg.f['1']++;__cov_vT2$cegNugM29SsFSJ1vdg.s['2']++;var supportsES6Syntax=false,isPromise=Y.Promise.isPromise;__cov_vT2$cegNugM29SsFSJ1vdg.s['3']++;try{__cov_vT2$cegNugM29SsFSJ1vdg.s['4']++;eval('function* f(){}');__cov_vT2$cegNugM29SsFSJ1vdg.s['5']++;supportsES6Syntax=true;}catch(e){}__cov_vT2$cegNugM29SsFSJ1vdg.s['6']++;Y.task=function(spawn){__cov_vT2$cegNugM29SsFSJ1vdg.f['2']++;__cov_vT2$cegNugM29SsFSJ1vdg.s['7']++;return new Task(spawn).promise;};__cov_vT2$cegNugM29SsFSJ1vdg.s['8']++;function Task(spawn){__cov_vT2$cegNugM29SsFSJ1vdg.f['3']++;__cov_vT2$cegNugM29SsFSJ1vdg.s['9']++;var self=this;__cov_vT2$cegNugM29SsFSJ1vdg.s['10']++;this.promise=new Y.Promise(function(fulfill,reject){__cov_vT2$cegNugM29SsFSJ1vdg.f['4']++;__cov_vT2$cegNugM29SsFSJ1vdg.s['11']++;self.resolve=function(value){__cov_vT2$cegNugM29SsFSJ1vdg.f['5']++;__cov_vT2$cegNugM29SsFSJ1vdg.s['12']++;if(Y.Promise.isPromise(value)){__cov_vT2$cegNugM29SsFSJ1vdg.b['1'][0]++;__cov_vT2$cegNugM29SsFSJ1vdg.s['13']++;value.then(fulfill,reject);}else{__cov_vT2$cegNugM29SsFSJ1vdg.b['1'][1]++;__cov_vT2$cegNugM29SsFSJ1vdg.s['14']++;fulfill(value);}};__cov_vT2$cegNugM29SsFSJ1vdg.s['15']++;self.reject=reject;});__cov_vT2$cegNugM29SsFSJ1vdg.s['16']++;this.accept=function(value){__cov_vT2$cegNugM29SsFSJ1vdg.f['6']++;__cov_vT2$cegNugM29SsFSJ1vdg.s['17']++;self.next(null,value);};__cov_vT2$cegNugM29SsFSJ1vdg.s['18']++;this.fail=function(error){__cov_vT2$cegNugM29SsFSJ1vdg.f['7']++;__cov_vT2$cegNugM29SsFSJ1vdg.s['19']++;self.next(error);};__cov_vT2$cegNugM29SsFSJ1vdg.s['20']++;try{__cov_vT2$cegNugM29SsFSJ1vdg.s['21']++;this.thread=spawn.call(this);__cov_vT2$cegNugM29SsFSJ1vdg.s['22']++;this.next();}catch(err){__cov_vT2$cegNugM29SsFSJ1vdg.s['23']++;this.reject(err);}}__cov_vT2$cegNugM29SsFSJ1vdg.s['24']++;Task.prototype.next=supportsES6Syntax?(__cov_vT2$cegNugM29SsFSJ1vdg.b['2'][0]++,function(error,value){__cov_vT2$cegNugM29SsFSJ1vdg.f['8']++;__cov_vT2$cegNugM29SsFSJ1vdg.s['25']++;var result,resultValue;__cov_vT2$cegNugM29SsFSJ1vdg.s['26']++;try{__cov_vT2$cegNugM29SsFSJ1vdg.s['27']++;result=arguments.length===1?(__cov_vT2$cegNugM29SsFSJ1vdg.b['3'][0]++,this.thread.throw(error)):(__cov_vT2$cegNugM29SsFSJ1vdg.b['3'][1]++,this.thread.send(value));}catch(e){__cov_vT2$cegNugM29SsFSJ1vdg.s['28']++;return this.reject(e);}__cov_vT2$cegNugM29SsFSJ1vdg.s['29']++;resultValue=result.value;__cov_vT2$cegNugM29SsFSJ1vdg.s['30']++;if(result.done){__cov_vT2$cegNugM29SsFSJ1vdg.b['4'][0]++;__cov_vT2$cegNugM29SsFSJ1vdg.s['31']++;this.resolve(resultValue);}else{__cov_vT2$cegNugM29SsFSJ1vdg.b['4'][1]++;__cov_vT2$cegNugM29SsFSJ1vdg.s['32']++;if(isPromise(resultValue)){__cov_vT2$cegNugM29SsFSJ1vdg.b['5'][0]++;__cov_vT2$cegNugM29SsFSJ1vdg.s['33']++;resultValue.then(this.accept,this.fail);}else{__cov_vT2$cegNugM29SsFSJ1vdg.b['5'][1]++;__cov_vT2$cegNugM29SsFSJ1vdg.s['34']++;this.accept(resultValue);}}}):(__cov_vT2$cegNugM29SsFSJ1vdg.b['2'][1]++,function(error,value){__cov_vT2$cegNugM29SsFSJ1vdg.f['9']++;__cov_vT2$cegNugM29SsFSJ1vdg.s['35']++;var result;__cov_vT2$cegNugM29SsFSJ1vdg.s['36']++;try{__cov_vT2$cegNugM29SsFSJ1vdg.s['37']++;result=arguments.length===1?(__cov_vT2$cegNugM29SsFSJ1vdg.b['6'][0]++,this.thread.throw(error)):(__cov_vT2$cegNugM29SsFSJ1vdg.b['6'][1]++,this.thread.send(value));}catch(e){__cov_vT2$cegNugM29SsFSJ1vdg.s['38']++;if(e instanceof StopIteration){__cov_vT2$cegNugM29SsFSJ1vdg.b['7'][0]++;__cov_vT2$cegNugM29SsFSJ1vdg.s['39']++;this.resolve(this.result);}else{__cov_vT2$cegNugM29SsFSJ1vdg.b['7'][1]++;__cov_vT2$cegNugM29SsFSJ1vdg.s['40']++;this.reject(e);}__cov_vT2$cegNugM29SsFSJ1vdg.s['41']++;return;}__cov_vT2$cegNugM29SsFSJ1vdg.s['42']++;this.result=result;__cov_vT2$cegNugM29SsFSJ1vdg.s['43']++;if(isPromise(result)){__cov_vT2$cegNugM29SsFSJ1vdg.b['8'][0]++;__cov_vT2$cegNugM29SsFSJ1vdg.s['44']++;result.then(this.accept,this.fail);}else{__cov_vT2$cegNugM29SsFSJ1vdg.b['8'][1]++;__cov_vT2$cegNugM29SsFSJ1vdg.s['45']++;this.accept(result);}});__cov_vT2$cegNugM29SsFSJ1vdg.s['46']++;Y.task.Task=Task;},'gallery-2013.05.15-21-12',{'requires':['promise']});
