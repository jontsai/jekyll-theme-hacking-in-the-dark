YUI.add("gallery-sm-menu-plugin",function(e,t){e.namespace("Plugin").Menu=e.Base.create("menuPlugin",e.Menu,[e.Plugin.Base],{initializer:function(t){this._host=t.host,this._hostIsBody=this._host===e.one("body"),this._attachMenuPluginEvents()},destructor:function(){clearTimeout(this._pluginHideTimeout)},reposition:function(t){return e.Menu.prototype.reposition.call(this,t||this._host)},_attachMenuPluginEvents:function(){this.get("showOnClick")&&this.afterHostEvent("click",this._afterHostClick),this.get("showOnContext")&&(this._hostIsBody?this._menuEvents.push(e.one("doc").on("contextmenu",this._onHostContext,this)):this.onHostEvent("contextmenu",this._onHostContext)),this.get("showOnHover")&&this.afterHostEvent({blur:this._afterHostBlur,focus:this._afterHostFocus,mouseenter:this._afterHostMouseEnter,mouseleave:this._afterHostMouseLeave})},_getAncestorTestFn:function(){var e=this.get("container"),t=this._host;return function(n){return n===e||n===t}},_afterHostBlur:function(){this.hide()},_afterHostClick:function(){this.rendered||this.render(),this.toggleVisible({anchorPoint:this._host})},_afterHostFocus:function(){clearTimeout(this._timeouts.menu),this.rendered||this.render(),this.show({anchorPoint:this._host})},_afterHostMouseEnter:function(){clearTimeout(this._timeouts.menu),this.rendered||this.render(),this.show({anchorPoint:this._host})},_afterHostMouseLeave:function(){var e=this;this._timeouts.menu=setTimeout(function(){e.hide()},300)},_onHostContext:function(e){e.preventDefault(),this.rendered||this.render(),this.show({anchorPoint:[e.clientX,e.clientY]})}},{NS:"menu",ATTRS:{showOnClick:{value:!0,writeOnce:"initOnly"},showOnContext:{value:!1,writeOnce:"initOnly"},showOnHover:{value:!1,writeOnce:"initOnly"}}})},"gallery-2013.03.27-22-06",{requires:["event-focus","gallery-sm-menu","node-pluginhost","plugin"]});
