YUI.add("gallery-textarea-counter",function(D){var A=function(E){return D.one(E);},C=function(E,F){var G=this.get(E);if(G){G.set("innerHTML",F);}},B=function(E){E.node=E.host;B.superclass.constructor.call(this,E);};B.NAME="gallery-textarea-counter";B.NS="counter";B.ATTRS={node:{setter:A},wordsNode:{setter:A},charsNode:{setter:A},rowsNode:{setter:A},colsNode:{setter:A},rowCount:{setter:function(E){C.call(this,"rowsNode",E);return E;}},colCount:{setter:function(E){C.call(this,"colsNode",E);return E;}},wordCount:{setter:function(E){C.call(this,"wordsNode",E);return E;}},charCount:{setter:function(E){C.call(this,"charsNode",E);return E;}}};D.extend(B,D.Base,{_handles:null,initializer:function(){this._handles=[];var F=this.get("node"),E=D.bind(this.count,this);this._handles.push(F.on("keyup",E));this._handles.push(F.on("keypress",E));this._handles.push(F.on("mouseup",E));this._handles.push(F.on("focus",E));},count:function(){var T=this.get("node"),O=T.get("value"),F=this.get("wordCount"),K=this.get("charCount"),W=this.get("colCount"),S=this.get("rowCount"),R=0,X=((O.length)?O.length:((T.get("textLength"))?T.get("textLength"):0)),H=T.get("selectionStart"),G=T.get("selectionEnd"),L=0,N=0,P,V,J,M,U,E,I,Q=0;if(X>0){R=O.match(/\b/g);R=((R)?(R.length/2):0);}if(D.UA.ie){if(document.selection){P=document.selection.createRange();V=P.duplicate();V.moveToElementText(T._node);V.setEndPoint("EndToEnd",P);H=V.text.length-P.text.length;G=H+P.text.length;}}J=O.split(/\n/);M=((J)?J.length:1);for(U=0;U<M;U++){if(D.UA.gecko){X++;}Q+=(J[U].length+1);E=(Q-J[U].length-1);I=((J[U].length+1)+E);if((H>=E)&&(H<=I)){L=(U+1);N=((H-E)+1);}}if(D.UA.gecko){X--;}if(H!==G){L=0;N=0;}if(F!==R){this.set("wordCount",R);}if(K!==X){this.set("charCount",X);}if(S!==L){this.set("rowCount",L);}if(W!==N){this.set("colCount",N);}},destructor:function(){if(this._handles){D.each(this._handles,function(E){E.detach();});}}});D.namespace("Plugin");D.Plugin.Counter=B;},"gallery-2009.11.09-19",{requires:["node","event"]});