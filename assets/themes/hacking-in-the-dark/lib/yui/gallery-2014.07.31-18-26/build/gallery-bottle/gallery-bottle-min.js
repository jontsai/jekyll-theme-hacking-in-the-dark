YUI.add("gallery-bottle",function(e,t){var n="btInit",r="btReady",i="btNative",s="btFixed",o="btFocus",u="btSwitcher",a="btActive",f=/^<!--([\s\S]+)-->$/,l="btSyncScreen",c="btSyncContent",h=e.all("html, body"),p=h.item(1),d=e.one(".btRoot")||p.appendChild(e.Node.create('<div class="btRoot"></div>')),v=p.hasClass(n),m=!1,g={hidden:{overflow:"hidden"},scroll:{overflow:"auto",overflowX:"hidden"}},y=[],b={nativeScroll:!0,positionFixed:!1},w=function(t){var n=y.length-1,r,i;m&&!t&&window.scrollTo(0,1),n>=0&&(r=y[n]),i={width:e.Bottle.Device.getBrowserWidth()},b.nativeScroll?r&&(i.height=Math.max(r.node?r.node.get("offsetHeight"):r.height,e.Bottle.Device.getBrowserHeight())):i.height=e.Bottle.Device.getBrowserHeight(),p.setStyles(i)},E=function(t){var n=e.Bottle.ShortCut.getCurrent(),r=e.Bottle.Overlay.getCurrent(),i=e.Bottle.Page.getCurrent();i?(w(!0),i.resize()):e.fire(l),n&&n.scResize(t===!0),r&&r.olResize(t===!0)},S=function(t,n,r,i){r.all(t).each(function(t){new n(e.merge({srcNode:t,render:!0},i))})},x=function(t){var n=t.currentTarget,r=n.getAttribute("data-auto")==="false"?!1:!0;act=!0,n.hasClass(a)?(r&&n.removeClass(a),act=!1):r&&n.addClass(a),e.publish(u),e.fire(u,{event:t,action:act})},T=function(t){var u=e.one("[data-role=page]"),a=e.instanceOf(t,e.Node),f=a?t:p,y;m=t===!0;if(v&&!a)return;a||(u&&h.setStyles(g.hidden),p.addClass(n),v=!0),S("[data-role=viewer]",e.Bottle.Viewer,f,{axis:"x"}),S("[data-role=photogrid]",e.Bottle.PhotoGrid,f),S("[data-role=carousel]",e.Bottle.Carousel,f,{axis:"x"}),S("[data-role=slidetab]",e.Bottle.SlideTab,f),S("[data-role=loader]",e.Bottle.Loader,f),u&&!a&&(w(),y=new e.Bottle.Page({srcNode:u,render:!0}),y.resize(),y.get("nativeScroll")?(e.Bottle.Device.getPositionFixedSupport()&&(b.positionFixed=!0,p.addClass(s)),e.UA.ie>9&&(g.scroll.overflowX="",g.scroll.height="auto"),h.setStyles(g.scroll),p.addClass(i),e.publish(i,{fireOnce:!0}),e.fire(i),e.publish(l)):(b.nativeScroll=!1,w())),f.all("[data-role=shortcut]").each(function(t){new e.Bottle.ShortCut({srcNode:t,visible:!1,disabled:!0,render:d})}),f.all("[data-role=overlay]").each(function(t){new e.Bottle.Overlay({srcNode:t,visible:!1,disabled:!0,render:d})});if(a)return;e.on(e.UA.mobile==="Apple"?"orientationchange":"resize",E,window),e.on(c,E),p.delegate("focus",function(){p.addClass(o)},"input, select, textarea"),p.delegate("blur",function(){p.removeClass(o),E(!0)},"input, select, textarea"),p.delegate("click",x,".btSwitcher"),p.addClass(r).removeClass("btHideSCO").removeClass("btInPlace").removeClass("btHideAll"),e.publish(r,{fireOnce:!0}),e.publish(c),e.fire(r)},N=function(t){var n=t.getHTML();n.match(f)&&(t.setHTML(n.replace(f,"$1")),e.Bottle.init(t))},C=function(e){return b[e]};e.namespace("Bottle").init=T,e.namespace("Bottle").get=C,e.namespace("Bottle").lazyLoad=N,e.namespace("Bottle").nativeScrollPositions=y},"gallery-2013.04.10-22-48",{skinnable:"true",requires:["gallery-bt-shortcut","gallery-bt-overlay","gallery-bt-photogrid","gallery-bt-slidetab","gallery-bt-carousel","gallery-bt-loader","gallery-bt-viewer"]});
