YUI.add("gallery-sm-tree-lazy",function(e,t){var n="error",r="loaded",i="loading";e.namespace("Plugin.Tree").Lazy=e.Base.create("lazyTreePlugin",e.Plugin.Base,[],{initializer:function(e){this._host=e.host,e.load&&(this.load=e.load),!this._host.openNode,this._published={},this._attachEvents()},load:function(e,t){t(new Error("Plugin.Tree.Lazy: Please provide a custom `load` method when instantiating this plugin."))},_attachEvents:function(){this.onHostEvent("open",this._onOpen)},_onOpen:function(e){var t=e.node;if(!t.canHaveChildren||t.state.loaded||t.state.loading)return;this._published[i]||(this._published[i]=this.publish(i,{defaultFn:this._defLoadingFn})),this.fire(i,{node:t})},_defLoadingFn:function(e){var t=e.node,i=this;t.state.loading=!0,this.load(t,function(e){delete t.state.loading;if(e){i.fire(n,{error:e,src:"load"});return}t.state.loaded=!0,i.fire(r,{node:t})})}},{NS:"lazy"})},"gallery-2013.02.07-15-27",{requires:["base-pluginhost","plugin","gallery-sm-tree"]});
