YUI.add("gallery-bt-carousel",function(e,t){var n="bcr_",r={INDEXBOX:n+"indexbox",INDEXITEM:n+"indexitem",INDEXON:n+"on",LEFT:n+"btnl",RIGHT:n+"btnr",SHOWBUTTON:n+"showbtn",BUTTONOFF:n+"off"},i={INDEXBOX:'<ol class="'+r.INDEXBOX+'"></ol>',INDEXITEM:'<li class="'+r.INDEXITEM+'"></li>',LEFT:'<div class="'+r.LEFT+'"></li>',RIGHT:'<div class="'+r.RIGHT+'"></li>'},s=e.Base.create("btcarousel",e.ScrollView,[e.Bottle.SyncScroll,e.zui.Attribute],{initializer:function(){this.set("syncScrollMethod",this._updatePages),this.plug(e.zui.RAScroll)},destructor:function(){this.unsync("selectedIndex",this.pages,"index"),this.unplug(e.zui.RAScroll),this._bcrEventHandlers.detach(),delete this._bcrEventHandlers},renderUI:function(){var t=this.get("indexNode")||this.get("boundingBox"),n=t.appendChild(i.INDEXBOX),r=this.pages.get("total"),s=this.get("contentBox").getData("selected-index")||0,o;this._indexes=[];for(o=0;o<r;o++)this._indexes.push(n.appendChild(i.INDEXITEM));this.unplug(e.Plugin.ScrollViewScrollbars),e.Bottle.Device.getTouchSupport()||this.plug(e.zui.ScrollHelper),this._updatePages(),this.sync("selectedIndex",this.pages,"index"),this.leftButton=t.appendChild(i.LEFT).setHTML(this.get("textLeft")),this.rightButton=t.appendChild(i.RIGHT).setHTML(this.get("textRight")),this._bcrEventHandlers=new e.EventHandle([this.leftButton.on("click",this.pages.prev,this.pages),this.rightButton.on("click",this.pages.next,this.pages)]),e.once("btNative",this._nativeScroll,this),this.set("selectedIndex",s),this._updateButtons(s)},_nativeScroll:function(){this._prevent={move:!1,start:!1,end:!1}},_updateButtons:function(e){this.leftButton&&(this.leftButton.toggleClass(r.BUTTONOFF,e===0),this.rightButton.toggleClass(r.BUTTONOFF,e===this.pages.get("total")-1))},_updatePages:function(){this.get("pageNode").set("offsetWidth",Math.floor(this.get("boundingBox").get("offsetWidth")/this.get("pageItems"))),this._uiDimensionsChange()}},{ATTRS:{pageNode:{value:"> li",writeOnce:!0,lazyAdd:!1,setter:function(e){return this._pageCSS=e,this.get("contentBox").all(e)}},pageItems:{value:1,lazyAdd:!1,writeOnce:!0,validator:e.Lang.isNumber,setter:function(t){var n=Math.max(1,Math.floor(t));return this.plug(e.zui.ScrollSnapper,{selector:this._pageCSS+(n>1?":nth-child("+n+"n+1)":"")}),n}},indexNode:{writeOnce:!0,setter:e.one},textRight:{value:"",writeOnce:!0},textLeft:{value:"",writeOnce:!0},showButtons:{value:!0,lazyAdd:!1,validator:e.Lang.isBoolean,setter:function(e){return this.get("boundingBox").toggleClass(r.SHOWBUTTON,e),e}},selectedIndex:{setter:function(e){var t=this._indexes,n=this.get("selectedIndex"),i=t?t[n]:undefined,s=t?t[e]:undefined;return s&&i!==s?(i&&i.removeClass(r.INDEXON),s.addClass(r.INDEXON),this._updateButtons(e),e*1):n}}},HTML_PARSER:{pageItems:function(e){var t=e.getData("page-items");return t?t*1:1},pageNode:function(t){try{this.setAttrs(e.JSON.parse(t.getData("cfg-scroll")))}catch(n){}return t.getData("page-node")},textLeft:function(e){return e.getData("text-left")||""},textRight:function(e){return e.getData("text-right")||""},indexNode:function(e){return e.getData("index-node")},showButtons:function(e){return e.getData("show-buttons")!=="false"}}});e.namespace("Bottle").Carousel=s},"gallery-2013.04.10-22-48",{requires:["gallery-bt-syncscroll","gallery-zui-rascroll","gallery-zui-scrollsnapper","gallery-zui-attribute","gallery-zui-scrollhelper"]});
