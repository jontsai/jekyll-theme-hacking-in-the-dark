YUI.add("gallery-bootstrap-tabview",function(c){var b=c.namespace("Bootstrap"),d=".",a=c.Lang.sub;b.TabView=c.Base.create("bootstrapTabView",c.TabviewBase,[],{_queries:{tabview:d+"nav-tabs",tabviewList:"> ul",tab:"> ul > li",tabLabel:"> ul > li > a ",tabviewPanel:"> div",tabPanel:"> div > div",selectedTab:"> ul > "+d+"active",selectedPanel:"> div "+d+"active"},_classNames:{tabview:"nav-tabs",tabviewList:"nav-tabs",tabviewPanel:"tab-pane",tab:"nav-tab",selectedTab:"active",selectedPanel:"active"},LIST_TEMPLATE:'<ul class="{tabviewList}"></ul>',PANEL_TEMPLATE:'<div class="{tabviewPanel}"></div>',_afterChildAdded:function(f){this.get("contentBox").focusManager.refresh();},_defListNodeValueFn:function(){return c.Node.create(a(this.LIST_TEMPLATE,this._classNames));},_defPanelNodeValueFn:function(){return c.Node.create(a(this.PANEL_TEMPLATE,this._classNames));},_afterChildRemoved:function(h){var f=h.index,g=this.get("selection");if(!g){g=this.item(f-1)||this.item(0);if(g){g.set("selected",1);}}this.get("contentBox").focusManager.refresh();},_initAria:function(){var e=this.get("contentBox"),f=e.one(this._queries.tabviewList);if(f){f.setAttrs({role:"tablist"});}},bindUI:function(){this.get("contentBox").plug(c.Plugin.NodeFocusManager,{descendants:d+this._classNames.tabLabel,keys:{next:"down:39",previous:"down:37"},circular:true});this.after("render",this._setDefSelection);this.after("addChild",this._afterChildAdded);this.after("removeChild",this._afterChildRemoved);},renderUI:function(){var e=this.get("contentBox");this._renderListBox(e);this._renderPanelBox(e);this._childrenContainer=this.get("listNode");this._renderTabs(e);},initEvents:function(){this._node.delegate(this.tabEventName,this.onTabEvent,this._queries.tab,this);},initClassNames:function(f){var e=this._queries,g=this._classNames;c.Object.each(e,function(j,i){if(g[i]){var h=this.all(j);if(f!==undefined){h=h.item(f);}if(h){h.addClass(g[i]);}}},this._node);this._node.addClass(g.tabview);},onTabEvent:function(i){i.preventDefault();var g=-1,h,f=i.target.get("href");if(f&&f.indexOf("#")>=0){h=this._node.one(f.substr(f.indexOf("#")));g=this._node.all(this._queries.tabPanel).indexOf(h);}if(g===-1){g=this._node.all(this._queries.tab).indexOf(i.currentTarget);}this._select(g);},_select:function(g){var e=this._queries,k=this._classNames,j=this._node,l=j.one(e.selectedTab),i=j.one(e.selectedPanel),h=j.all(e.tab).item(g),f=j.all(e.tabPanel).item(g);if(l){l.removeClass(k.selectedTab);}if(i){i.removeClass(k.selectedPanel);i.removeClass("in");}if(h){h.addClass(k.selectedTab);}if(f){f.addClass(k.selectedPanel);f.addClass("in");}},_setDefSelection:function(e){var f=this.get("selection")||this.item(0);this.some(function(g){if(g.get("selected")){f=g;return true;}});if(f){this.set("selection",f);f.set("selected",1);}},_renderListBox:function(e){var f=this.get("listNode");if(!f.inDoc()){e.append(f);}},_renderPanelBox:function(e){var f=this.get("panelNode");if(!f.inDoc()){e.append(f);}},_renderTabs:function(f){var e=this._queries,j=this._classNames,i=f.all(e.tab),g=this.get("panelNode"),h=(g)?this.get("panelNode").get("children"):null,k=this;if(i){i.addClass(j.tab);f.all(e.tabLabel).addClass(j.tabLabel);f.all(e.tabPanel).addClass(j.tabPanel);i.each(function(n,m){var l=(h)?h.item(m):null;k.add({boundingBox:n,contentBox:n.one(d+j.tabLabel),label:n.one(d+j.tabLabel).get("text"),panelNode:l});});}}},{ATTRS:{defaultChildType:{value:"Tab"},listNode:{setter:function(e){e=c.one(e);if(e){e.addClass(this._classNames.tabviewList);}return e;},valueFn:"_defListNodeValueFn"},panelNode:{setter:function(e){e=c.one(e);if(e){e.addClass(this._classNames.tabviewPanel);}return e;},valueFn:"_defPanelNodeValueFn"},tabIndex:{value:null}},HTML_PARSER:{listNode:function(e){return this.get("contentBox").one(this._queries.tabviewList);},panelNode:function(){return this.get("contentBox").one(this._queries.tabviewPanel);}}});},"gallery-2012.08.22-20-00",{requires:["tabview"]});