YUI.add("gallery-y-common-ractive",function(e,t){function n(e){e.template=e.container.getHTML(),e.container.empty(),e.el=e.container.getDOMNode();var t=e.complete;e.complete=function(){e.container.addClass("ractive-ready"),t?t():null},n.superclass.constructor.call(this,e)}!function(e){"use strict";var t=e.Ractive,n=function(){var e={el:void 0,append:!1,template:void 0,preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],handlebars:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,noCssTransform:!1,debug:!1};return e}(),r={linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)}},i=[],s=Object.prototype.hasOwnProperty,o=function(){var e=Object.prototype.toString;return function(t){return"[object Array]"===e.call(t)}}(),u=function(){var e=Object.prototype.toString;return function(t){return t&&"[object Object]"===e.call(t)}}(),a=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},f=function(e,t,n,r,i){var s,o,u;return e.push(function(){o=e.interpolate}),u=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/,s={number:function(e,t){var n;return i(e)&&i(t)?(e=+e,t=+t,n=t-e,n?function(t){return e+t*n}:function(){return e}):null},array:function(e,t){var r,i,s,u;if(!n(e)||!n(t))return null;for(r=[],i=[],u=s=Math.min(e.length,t.length);u--;)i[u]=o(e[u],t[u]);for(u=s;u<e.length;u+=1)r[u]=e[u];for(u=s;u<t.length;u+=1)r[u]=t[u];return function(e){for(var t=s;t--;)r[t]=i[t](e);return r}},object:function(e,n){var i,s,u,a,f;if(!r(e)||!r(n))return null;i=[],a={},u={};for(f in e)t.call(e,f)&&(t.call(n,f)?(i.push(f),u[f]=o(e[f],n[f])):a[f]=e[f]);for(f in n)t.call(n,f)&&!t.call(e,f)&&(a[f]=n[f]);return s=i.length,function(e){for(var t,n=s;n--;)t=i[n],a[t]=u[t](e);return a}},cssLength:function(e,t){var n,r,i,s,o,a,f,l;return 0!==e&&"string"!=typeof e||0!==t&&"string"!=typeof t?null:(n=u.exec(e),r=u.exec(t),i=n?n[2]:"",s=r?r[2]:"",i&&s&&i!==s?null:(f=i||s,o=n?+n[1]:0,a=r?+r[1]:0,l=a-o,l?function(e){return o+e*l+f}:function(){return o+f}))}}}(i,s,o,u,a),l=function(){var e;return e="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),c={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},h=function(e,t){var n;return n=e?function(e,n){return n&&n!==t.html?document.createElementNS(n,e):document.createElement(e)}:function(e,n){if(n&&n!==t.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(e)}}(l,c),p=function(){var e="object"==typeof document;return e}(),d=function(e){var t;try{Object.defineProperty({},"test",{value:0}),e&&Object.defineProperty(document.createElement("div"),"test",{value:0}),t=Object.defineProperty}catch(n){t=function(e,t,n){e[t]=n.value}}return t}(p),v=function(e,t,n){var r;try{try{Object.defineProperties({},{test:{value:0}})}catch(i){throw i}n&&Object.defineProperties(e("div"),{test:{value:0}}),r=Object.defineProperties}catch(i){r=function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e,r,n[r])}}return r}(h,d,p),m=function(e){return function(t,n,r){var i;if("string"!=typeof n||!e(r))throw new Error("Bad arguments");if(i=+t.get(n)||0,!e(i))throw new Error("Cannot add to a non-numeric value");return t.set(n,i+r)}}(a),g=function(e){return function(t,n){return e(this,t,void 0===n?1:+n)}}(m),y=function(e,t){return null===e&&null===t?!0:"object"==typeof e||"object"==typeof t?!1:e===t},b=function(){function e(e){setTimeout(e,0)}function t(e,t){return function(){for(var n;n=e.shift();)n(t)}}function n(e,t,i,s){var o;if(t===e)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(t instanceof r)t.then(i,s);else if(!t||"object"!=typeof t&&"function"!=typeof t)i(t);else{try{o=t.then}catch(u){return void s(u)}if("function"==typeof o){var a,f,l;f=function(t){a||(a=!0,n(e,t,i,s))},l=function(e){a||(a=!0,s(e))};try{o.call(t,f,l)}catch(u){if(!a)return s(u),void (a=!0)}}else i(t)}}var r,i={},s={},o={};return"function"==typeof b?r=b:(r=function(u){var a,f,l,c,h,p,d=[],v=[],m=i;l=function(n){return function(r){m===i&&(a=r,m=n,f=t(m===s?d:v,a),e(f))}},c=l(s),h=l(o);try{u(c,h)}catch(g){h(g)}return p={then:function(t,s){var o=new r(function(r,u){var a=function(e,t,i){t.push("function"==typeof e?function(t){var i;try{i=e(t),n(o,i,r,u)}catch(s){u(s)}}:i)};a(t,d,r),a(s,v,u),m!==i&&e(f)});return o}},p["catch"]=function(e){return this.then(null,e)},p},r.all=function(e){return new r(function(t,n){var r,i,s,o=[];if(!e.length)return void t(o);for(s=function(i){e[i].then(function(e){o[i]=e,--r||t(o)},n)},r=i=e.length;i--;)s(i)})},r.resolve=function(e){return new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})}),r}(),w=function(){var e=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(t){return(t||"").replace(e,".$1")}}(),E=["o","ms","moz","webkit"],S=function(e){var t;return"undefined"==typeof window?t=null:(!function(e,t,n){var r,i;if(!n.requestAnimationFrame){for(r=0;r<e.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[e[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(e){var n,r,s;return n=Date.now(),r=Math.max(0,16-(n-t)),s=i(function(){e(n+r)},r),t=n+r,s})}}(e,0,window),t=window.requestAnimationFrame),t}(E),x=function(){var e;return e="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance
.now?function(){return window.performance.now()}:function(){return Date.now()}}(),T=function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},N=function(e,t,n){var r,i,s,o,u,a,f="/* Ractive.js component styles */\n",l={},c=[];return t?(e.push(function(){i=e.runloop}),s=document.createElement("style"),s.type="text/css",o=document.getElementsByTagName("head")[0],a=!1,u=s.styleSheet,r={add:function(e){e.css&&(l[e._guid]||(l[e._guid]=0,c.push(e.css),i.scheduleCssUpdate()),l[e._guid]+=1)},remove:function(e){e.css&&(l[e._guid]-=1,l[e._guid]||(n(c,e.css),i.scheduleCssUpdate()))},update:function(){var e;c.length?(e=f+c.join(" "),u?u.cssText=e:s.innerHTML=e,a||o.appendChild(s)):a&&o.removeChild(s)}}):r=null,r}(i,p,T),C=function(e,t){var n,r,i,s,o,u;for(n=[],u=e._rendering?e.fragment.docFrag:e.el,r=u.querySelectorAll('input[type="checkbox"][name="{{'+t+'}}"]'),s=r.length,o=0;s>o;o+=1)i=r[o],(i.hasAttribute("checked")||i.checked)&&n.push(i._ractive.value);return n},k=function(e){do if(e.context)return e.context;while(e=e.parent);return""},L=function(e,t,n){function r(e,t){var n;if("."===t)return e;if(n=e?e.split("."):[],"../"===t.substr(0,3)){for(;"../"===t.substr(0,3);){if(!n.length)throw new Error(i);n.pop(),t=t.substring(3)}return n.push(t),n.join(".")}return e?e+t.replace(/^\.\//,"."):t.replace(/^\.\/?/,"")}var i,s;return i='Could not resolve reference - too many "../" prefixes',s={evaluateWrapped:!0},function(i,o,u){var a,f,l,c;if(o=e(o),"."===o.charAt(0))return r(n(u),o);f=o.split(".")[0];do if(a=u.context,a&&(c=!0,l=i.viewmodel.get(a,s),l&&("object"==typeof l||"function"==typeof l)&&f in l))return a+"."+o;while(u=u.parent);return c||i._parent&&!i.isolated?t.call(i.data,f)?o:void 0!==i.viewmodel.get(o)?o:void 0:o}}(w,s,k),A=function(e){var t,n,r,i,s=[""];for(t=e.length;t--;)for(n=e[t],r=n.split(".");r.length>1;)r.pop(),i=r.join("."),s[i]!==!0&&(s.push(i),s[i]=!0);return s},O=function(){function e(e){var n,r,i,s,o,u;for(n=e.split("."),r=t(n.length),o=[],i=function(e,t){return e?"*":n[t]},s=r.length;s--;)u=r[s].map(i).join("."),o[u]||(o.push(u),o[u]=!0);return o}function t(e){var t,n,i,s,o,u="";if(!r[e]){for(i=[];u.length<e;)u+=1;for(t=parseInt(u,2),s=function(e){return"1"===e},o=0;t>=o;o+=1){for(n=o.toString(2);n.length<e;)n="0"+n;i[o]=Array.prototype.map.call(n,s)}r[e]=i}return r[e]}var n=/[^\.]+$/,r={};return function i(t,r,s,o,u){var a,f,l,c,h,p,d,v;for(a=t._patternObservers.length;a--;)f=t._patternObservers[a],f.regex.test(s)&&f.update(s);o||(v=function(e){if(l=t.viewmodel.depsMap[e])for(a=l.length;a--;)c=l[a],h=n.exec(c)[0],p=s?s+"."+h:h,i(t,c,p)},u?(d=e(s),d.forEach(v)):v(r))}}(),M=function(e){function t(t,r,i){var s;for(t._patternObservers.length&&e(t,r,r,i,!0),s=0;s<t.viewmodel.deps.length;s+=1)n(t,r,s,i)}function n(e,t,n,o){var u,a,f=e.viewmodel.deps[n];f&&(u=e.viewmodel.get(t),a=e.viewmodel.get(t,s),r(f[t],u,a),o||i(e.viewmodel.depsMap[t],e,n))}function r(e,t,n){e&&e.forEach(function(e){return e.setValue(t,n)})}function i(e,t,r,i){var s;if(e)for(s=e.length;s--;)n(t,e[s],r,i)}var s={evaluateWrapped:!0};return t.multiple=function(t,r,i){var s,o,u;if(u=r.length,t._patternObservers.length)for(s=u;s--;)e(t,r[s],r[s],i,!0);for(s=0;s<t.viewmodel.deps.length;s+=1)if(t.viewmodel.deps[s])for(o=u;o--;)n(t,r[o],s,i)},t}(O),_=function(e){var t,n,r,i;return t=function(e,t){var s=[];return s.detachQueue=[],s.remove=r,s.init=i,s._check=n,s._callback=e,s._previous=t,t&&t.push(s),s},n=function(){var e;if(this._ready&&!this.length){for(;e=this.detachQueue.pop();)e.detach();"function"==typeof this._callback&&this._callback(),this._previous&&this._previous.remove(this)}},r=function(t){e(this,t),this._check()},i=function(){this._ready=!0,this._check()},t}(T),D=function(e,t,n,r,i,s,o,u){function a(){var e,n,i,u,a;for(i=x.length;i--;)e=x[i],e.viewmodel.changes.length&&(n=s(e.viewmodel.changes),o.multiple(e,n,!0));for(f();p;){for(p=!1;e=b.pop();)e.update(),e.dirty=!1;for(;e=S.pop();)e();for(;e=g.pop();)e.root.viewmodel.set(e.keypath,r(e.root,e.keypath)),m[e.keypath]=!1;f()}for(;e=w.pop();)e.update();for(;e=E.pop();)e();for(;e=v.pop();)e.locked=!1;for(;e=x.pop();)if(x[e._guid]=!1,e.viewmodel.changes.length){for(u={};a=e.viewmodel.changes.pop();)u[a]=e.viewmodel.get(a);e.fire("change",u)}c&&(t.update(),c=!1)}function f(){var e,t,n;if(y.length)for(e=y.splice(0,y.length);t=e.pop();)t.keypath||(n=i(t.root,t.ref,t.parentFragment),void 0!==n?t.resolve(n):y.push(t))}var l,c,h,p=!1,d=!1,v=[],m={},g=[],y=[],b=[],w=[],E=[],S=[],x=[];return l={start:function(e,t){this.addInstance(e),d||(h=u(t,h))},end:function(){if(d)return void f();d=!0;do a();while(p);d=!1,h.init(),h=h._previous},addInstance:function(e){e&&!x[e._guid]&&(x.push(e),x[x._guid]=!0)},registerTransition:function(e){e._manager=h,h.push(e)},viewUpdate:function(e){p=!0,w.push(e)},lockAttribute:function(e){e.locked=!0,v.push(e)},scheduleCssUpdate:function(){d?c=!0:t.update()},modelUpdate:function(e,t){t?n(b,e):(p=!0,b.push(e))},addCheckboxBinding:function(e){m[e.keypath]||(p=!0,g.push(e),m[e.keypath]=!0)},addUnresolved:function(e){p=!0,y.push(e)},removeUnresolved:function(e){n(y,e)},detachWhenReady:function(e){h.detachQueue.push(e)},afterModelUpdate:function(e){p=!0,S.push(e)},afterViewUpdate:function(e){p=!0,E.push(e)}},e.runloop=l,l}(i,N,T,C,L,A,M,_),P=function(e,t,n){var r=[],i={tick:function(){var s,o,u;for(u=t(),n.start(),s=0;s<r.length;s+=1)o=r[s],o.tick(u)||r.splice(s--,1);n.end(),r.length?e(i.tick):i.running=!1},add:function(t){r.push(t),i.running||(i.running=!0,e(i.tick))},abort:function(e,t){for(var n,i=r.length;i--;)n=r[i],n.root===t&&n.keypath===e&&n.stop()}};return i}(S,x,D),H=function(){var e,t={};return e="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply?function(e,n){if(!n){if(t[e])return;t[e]=!0}console.warn(e)}:function(){}}(),B=function(e,t,n){function r(e,t,n){var r;o(n),r=s(e.defaults.adapt,n.adapt),t.defaults.adapt=r||[]}function i(e,t,n){o(n),t.adapt=s(e.defaults.adapt,n.adapt)||[]}function s
(e,t){return e=u(e),t=u(t),e&&e.length?t&&t.length?(e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t):e.slice():t}function o(n){var r=n.adaptors;r&&t(r)&&(e("The `adaptors` option, to indicate which adaptors should be used with a given Ractive instance, has been deprecated in favour of `adapt`."),n.adapt=s(n.adapt,r),delete n.adaptors)}function u(e){return"string"==typeof e&&(e=[e]),e}var a={name:"adapt",extend:r,init:i,useDefaults:n.hasOwnProperty("adapt")};return a}(H,o,n),j=function(e){for(var t,n,r=Array.prototype.slice,i=r.call(arguments,1);n=i.shift();)for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},F=function(e,t){function n(n){t(this,n),this.useDefaults=e.hasOwnProperty(n.name)}return n.prototype={extend:function(e,t,n){var r,i,s;n=n||{},this.preExtend&&this.preExtend(e,t,n),r=this.getParentValue(e),i=this.getOptionValue(n),s=this.extendValue(t,r,i),this.postExtend&&(s=this.postExtend(t,s)),this.useDefaults&&(t=t.defaults),this.assign(t,s)},init:function(e,t,n){var r,i,s;n=n||{},this.preInit&&this.preInit(e,t,n),r=this.getParentValue(e),i=this.getOptionValue(n),s=this.initValue(t,r,i),this.postInit&&(s=this.postInit(t,s)),this.assign(t,s)},reset:function(e){if(this.resetValue){var t=this.resetValue(e);return t?(this.postInit&&(t=this.postInit(e,t)),e[this.name]=t,!0):void 0}},assign:function(e,t){void 0!=t&&(e[this.name]=t)},getParentValue:function(e){return e?(this.useDefaults&&(e=e.defaults),e[this.name]):void 0},getOptionValue:function(e){return e?e[this.name]:void 0}},function(e){return new n(e)}}(n,j),I=function(e){function t(e,t,n){return"undefined"==typeof n&&(n=t),n}return function(n){return e({name:n,extendValue:t,initValue:t})}}(F),q=function(){function e(e){return e.trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}function t(e){return e.str}var n=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,r=/\/\*.*?\*\//g,i=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g,s=/^@media/;return function(o,u){var a,f;return f=function(e){var n,r,s,o,a,f,l,c,h=[];for(n=[];r=i.exec(e);)n.push({str:r[0],base:r[1],modifiers:r[2]});for(o='[data-rvcguid="'+u+'"]',a=n.map(t),c=n.length;c--;)l=a.slice(),s=n[c],l[c]=s.base+o+s.modifiers||"",f=a.slice(),f[c]=o+" "+f[c],h.push(l.join(" "),f.join(" "));return h.join(", ")},a=o.replace(r,"").replace(n,function(t,n){var r,i;return s.test(n)?t:(r=n.split(",").map(e),i=r.map(f).join(", ")+" ",t.replace(n,i))})}}(),R=function(e,t,n){function r(e,n,r){var s;(s=i(r.css,n)||i(e.css,e))&&t(n,"css",{value:s})}function i(t,n){return t?n.defaults.noCssTransform?t:e(t,n._guid):void 0}var s={name:"css",extend:r,init:function(){},useDefaults:n.hasOwnProperty("css")};return s}(q,d,n),U=function(){var e;try{Object.create(null),e=Object.create}catch(t){e=function(){var e=function(){};return function(t,n){var r;return null===t?{}:(e.prototype=t,r=new e,n&&Object.defineProperties(r,n),r)}}()}return e}(),z=function(e,t){return t&&"function"==typeof t&&/_super/.test(e)?function(){var n,r="_super"in this,i=this._super;return this._super=t,n=e.apply(this,arguments),r&&(this._super=i),n}:e},W=function(e,t,n){function r(e,t,n){return t=o(t),u(t,n)}function i(e,t,n){var r=this.extendValue(e,t,n);return"function"==typeof r&&(r=r.call(e,n)||n),r||{}}function s(e){return this.initValue(e,e.constructor.defaults.data,e.data)}function o(e){if("function"!=typeof e||!Object.keys(e).length)return e;var t={};return a(e,t),u(e,t)}function u(e,t){return"function"==typeof t?c(t,e):"function"==typeof e?l(t,e):f(t,e)}function a(e,t,n){for(var r in e)n&&r in t||(t[r]=e[r])}function f(e,n){return e=e||{},n&&Object.keys(n).length&&(n=t(n),a(e,n),e=n),e}function l(e,t){return function(n){var r;return e&&(r=Object.keys(e),n&&(r=r.filter(function(e){return!(e in n)}))),n=t.call(this,n)||n,r&&r.length&&(n=n||{},r.forEach(function(t){n[t]=e[t]})),n}}function c(e,t){var r;return r="function"!=typeof t?function(e){f(e,t)}:function(e){return t=n(t,function(){},!0),t.call(this,e)||e},n(e,r)}var h=e({name:"data",extendValue:r,initValue:i,resetValue:s});return h}(F,U,z),X=function(e,t){function n(e,t,n){"debug"in n||("debug"in e?n.debug=e.debug:r&&(r.defaults&&r.defaults.debug||r.debug)&&(n.debug=!0))}var r;t.push(function(){r=t.Ractive});var i=e("debug");return i.preExtend=i.preInit=n,i}(I,i),V=function(e,t){function n(e,n,r){return"undefined"!=typeof r&&null!==r?"function"==typeof n?t(r,n):"function"==typeof r?r:void 0:n}var r=e({name:"complete",extendValue:n,initValue:n});return r}(F,z),$=function(e){function t(e,t,n){if(n.magic&&r)throw new Error("Getters and setters (magic mode) are not supported in this browser")}var n,r;try{Object.defineProperty({},"test",{value:0})}catch(i){r=!0}return n=e("magic"),n.preExtend=n.preInit=t,n}(I),J=function(e){return function(t,n){var r,i;return e(t)&&e(n)?t===n?!0:(r=Object.keys(t),i=Object.keys(n),r.length!==i.length?!1:r.every(function(e){return t[e]===n[e]})):!1}}(u),K=function(){var e,t,n;return"undefined"==typeof window&&(n=null),e=window,t=e.document,n={},t||(n=null),Date.now||(Date.now=function(){return+(new Date)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in i)e.call(i,o)&&s.push(o);if(t)for(var u=0;r>u;u++)e.call(i,n[u])&&s.push(n[u]);return s}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;for(void 0===t&&(t=0),0>t&&(t+=this.length),0>t&&(t=0),n=this.length;n>t;t++)if(this.hasOwnProperty(t)&&this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;for(n=0,r=this.length;r>n;n+=1)this.hasOwnProperty
(n)&&e.call(t,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i,s=this,o=[];for(s instanceof String&&(s=s.toString(),i=!0),n=0,r=s.length;r>n;n+=1)(s.hasOwnProperty(n)||i)&&(o[n]=e.call(t,s[n],n,s));return o}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){var n,r,i,s;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(i=this.length,s=!1,arguments.length>1&&(r=t,s=!0),n=0;i>n;n+=1)this.hasOwnProperty(n)?s&&(r=e(r,this[n],n,this)):(r=this[n],s=!0);if(!s)throw new TypeError("Reduce of empty array with no initial value");return r}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n,r,i=[];for(n=0,r=this.length;r>n;n+=1)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)&&(i[i.length]=this[n]);return i}),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(e){var t,n,r,i,s=[].slice;if("function"!=typeof this)throw new TypeError("Function.prototype.bind called on non-function");return t=s.call(arguments,1),n=this,r=function(){},i=function(){var i=this instanceof r&&e?this:e;return n.apply(i,t.concat(s.call(arguments)))},r.prototype=this.prototype,i.prototype=new r,i}),e.addEventListener||!function(e,t){var n,r,i,s,o,u;n=function(e,t){var n,r=this;for(n in e)r[n]=e[n];r.currentTarget=t,r.target=e.srcElement||t,r.timeStamp=+(new Date),r.preventDefault=function(){e.returnValue=!1},r.stopPropagation=function(){e.cancelBubble=!0}},r=function(e,t){var r,i,s=this;r=s.listeners||(s.listeners=[]),i=r.length,r[i]=[t,function(e){t.call(s,new n(e,s))}],s.attachEvent("on"+e,r[i][1])},i=function(e,t){var n,r,i=this;if(i.listeners)for(n=i.listeners,r=n.length;r--;)n[r][0]===t&&i.detachEvent("on"+e,n[r][1])},e.addEventListener=t.addEventListener=r,e.removeEventListener=t.removeEventListener=i,"Element"in e?(e.Element.prototype.addEventListener=r,e.Element.prototype.removeEventListener=i):(u=t.createElement,t.createElement=function(e){var t=u(e);return t.addEventListener=r,t.removeEventListener=i,t},s=t.getElementsByTagName("head")[0],o=t.createElement("style"),s.insertBefore(o,s.firstChild))}(e,t),e.getComputedStyle||(n.getComputedStyle=function(){function e(t,n,r,i){var s,o=n[r],u=parseFloat(o),a=o.split(/\d/)[0];return i=null!=i?i:/%|em/.test(a)&&t.parentElement?e(t.parentElement,t.parentElement.currentStyle,"fontSize",null):16,s="fontSize"==r?i:/width/i.test(r)?t.clientWidth:t.clientHeight,"em"==a?u*i:"in"==a?96*u:"pt"==a?96*u/72:"%"==a?u/100*s:u}function t(e,t){var n="border"==t?"Width":"",r=t+"Top"+n,i=t+"Right"+n,s=t+"Bottom"+n,o=t+"Left"+n;e[t]=(e[r]==e[i]==e[s]==e[o]?[e[r]]:e[r]==e[s]&&e[o]==e[i]?[e[r],e[i]]:e[o]==e[i]?[e[r],e[i],e[s]]:[e[r],e[i],e[s],e[o]]).join(" ")}function n(n){var r,i,s,o;r=n.currentStyle,i=this,s=e(n,r,"fontSize",null);for(o in r)/width|height|margin.|padding.|border.+W/.test(o)&&"auto"!==i[o]?i[o]=e(n,r,o,s)+"px":"styleFloat"===o?i.float=r[o]:i[o]=r[o];return t(i,"margin"),t(i,"padding"),t(i,"border"),i.fontSize=s+"px",i}function r(e){return new n(e)}return n.prototype={constructor:n,getPropertyPriority:function(){},getPropertyValue:function(e){return this[e]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},r}()),n}(),Q=function(e,t,n,r){function i(e,t){var n=this;return o(e,function(e){return e[n.name][t]})}function s(e,t){var n=this;return o(e,function(e){return e[n.name][t]?e:void 0})}function o(e,t){var n,r;return(n=t(e))?n:!e.isolated&&(r=e._parent)?o(r,t):void 0}function u(e,t,n){return t=c(t),h(t,n)}function a(e,t,n){var r=u(e,t,n);return"function"==typeof r&&(e._config[this.name]=r,r=l(e,r)),r}function f(e){var n,r,i=e._config[this.name];if(i)return n=e[this.name],r=l(e,i),t(n,r)?void 0:r}function l(e,t){var n={},r=t.call(e,n,e.data);return p(r,n),n}function c(e){if("function"!=typeof e||!Object.keys(e).length)return e;var t={};return p(e,t),h(e,t)}function h(e,t){return"function"==typeof t?g(t,e):"function"==typeof e?m(t,e):v(t,e)}function p(e,t,n){for(var r in e)n&&r in t||(t[r]=e[r])}function d(e,t){return p(e,t,!0)}function v(e,t){var n={};return e&&p(e,n),t&&d(t,n),n}function m(e,t){return function(n){var r=t.apply(this,arguments)||n;return e&&(r=v(e,r)),r}}function g(e,t){var r;return r="function"!=typeof t?t&&Object.keys(t).length?function(e){p(t,e)}:function(){}:function(e){t=n(t,function(){},!0);var r=t.apply(this,arguments);r&&p(r,e)},n(e,r)}return function(t){t=r(t,{extendValue:u,initValue:a,resetValue:f,find:i,findInstance:s});var n=e(t),o=n.assign.bind(n);return n.assign=function(e,t){o(e,t||{})},n}}(F,J,z,j,K),G=function(){function e(e){var n="var __ractive=this;return("+e.replace(t,function(e,t){return'__ractive.get("'+t+'")'})+")";return new Function(n)}var t=/\$\{([^\}]+)\}/g;return function(t){return"function"==typeof t?{get:t}:"string"==typeof t?{get:e(t)}:("object"==typeof t&&"string"==typeof t.get&&(t={get:e(t.get),set:t.set}),t)}}(),Y=function(e){var t=function(e,t){this.root=e.ractive,this.keypath=t,this.priority=0,this.computation=e,this.root.viewmodel.register(this)};return t.prototype={setValue:function(t){e(t,this.value)||(this.value=t,this.computation.bubble())},teardown:function(){this.root.viewmodel.unregister(this)}},t}(y),Z=function(e,t,n){function r(e,t,r){var i,s,o;for(i=t.length;i--;)s=t[i],r[s.keypath]||(t.splice(i,1),t[s.keypath]=null,s.teardown());for(i=r.length;i--;)o=r[i],t[o]||(s=new n(e,o),t.push(t[o]=s))}var i=function(e,t,n){this.ractive=e,this.key=t,this.getter=n.get,this.setter=n.set,this.watchers=[],this.update()};return i.prototype={set:function(e){if(this.setting)return void (this.value=e);if(!this.setter)throw new Error("Computed properties without setters are read-only in the current version");this.setter.call(this.ractive,e)},compute:function(){var t,n;t=this.ractive,t.viewmodel.capture();try{this.value=this.getter.call(t)}catch(i){t.debug&&e('Failed to compute "'+this.key+'": '+i.message||i),n=!0}return r(this,this.watchers,t.viewmodel
.release()),n?!1:!0},update:function(){this.compute()&&(this.setting=!0,this.ractive.viewmodel.set(this.key,this.value),this.setting=!1),this.dirty=!1},bubble:function(){this.watchers.length<=1?this.update():this.dirty||(t.modelUpdate(this),this.dirty=!0)}},i}(H,D,Y),et=function(e,t){return function(n,r){var i,s;for(i in r)s=e(r[i]),n.viewmodel.computations[i]=new t(n,i,s)}}(G,Z),tt=function(e,t){var n=e({name:"computed",postInit:t});return n}(Q,et),nt={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser"},rt={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,CLOSING_TAG:14,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40,SECTION_IF:50,SECTION_UNLESS:51,SECTION_EACH:52,SECTION_WITH:53},it={expectedExpression:"Expected a JavaScript expression",expectedParen:"Expected closing paren"},st=function(e){var t=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;return function(n){var r;return(r=n.matchPattern(t))?{t:e.NUMBER_LITERAL,v:r}:null}}(rt),ot=function(e){return function(t){var n=t.remaining();return"true"===n.substr(0,4)?(t.pos+=4,{t:e.BOOLEAN_LITERAL,v:"true"}):"false"===n.substr(0,5)?(t.pos+=5,{t:e.BOOLEAN_LITERAL,v:"false"}):null}}(rt),ut=function(){var e,t,n;return e=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,t=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,n=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,function(r){return function(i){var s,o,u,a;for(s=i.pos,o='"',u=!1;!u;)a=i.matchPattern(e)||i.matchPattern(t)||i.matchString(r),a?o+='"'===a?'\\"':"\\'"===a?"'":a:(a=i.matchPattern(n),a?o+="\\u"+("000"+a.charCodeAt(1).toString(16)).slice(-4):u=!0);return o+='"',JSON.parse(o)}}}(),at=function(e){return e('"')}(ut),ft=function(e){return e("'")}(ut),lt=function(e,t,n){return function(r){var i,s;return i=r.pos,r.matchString('"')?(s=n(r),r.matchString('"')?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):r.matchString("'")?(s=t(r),r.matchString("'")?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):null}}(rt,at,ft),ct={name:/^[a-zA-Z_$][a-zA-Z_$0-9]*/},ht=function(e,t,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var s;return(s=e(i))?r.test(s.v)?s.v:'"'+s.v.replace(/"/g,'\\"')+'"':(s=t(i))?s.v:(s=i.matchPattern(n.name))?s:void 0}}(lt,st,ct),pt=function(e,t){return function(n){var r,i,s;return r=n.pos,n.allowWhitespace(),i=t(n),null===i?(n.pos=r,null):(n.allowWhitespace(),n.matchString(":")?(n.allowWhitespace(),s=n.readExpression(),null===s?(n.pos=r,null):{t:e.KEY_VALUE_PAIR,k:i,v:s}):(n.pos=r,null))}}(rt,ht),dt=function(e){return function t(n){var r,i,s,o;return r=n.pos,s=e(n),null===s?null:(i=[s],n.matchString(",")?(o=t(n),o?i.concat(o):(n.pos=r,null)):i)}}(pt),vt=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("{")?(i=t(n),n.allowWhitespace(),n.matchString("}")?{t:e.OBJECT_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(rt,dt),mt=function(e){return function t(n){function r(e){s.push(e)}var i,s,o,u;return i=n.pos,n.allowWhitespace(),o=n.readExpression(),null===o?null:(s=[o],n.allowWhitespace(),n.matchString(",")&&(u=t(n),null===u&&n.error(e.expectedExpression),u.forEach(r)),s)}}(it),gt=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("[")?(i=t(n),n.matchString("]")?{t:e.ARRAY_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(rt,mt),yt=function(e,t,n,r,i){return function(s){var o=e(s)||t(s)||n(s)||r(s)||i(s);return o}}(st,ot,lt,vt,gt),bt=function(e,t){var n,r,i,s;return n=/^\.[a-zA-Z_$0-9]+/,i=function(e){var t=e.matchPattern(r);return t?"."+t:null},r=/^\[(0|[1-9][0-9]*)\]/,s=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,function(r){var o,u,a,f,l,c,h;for(o=r.pos,u="";r.matchString("../");)u+="../";if(u||(f=r.matchString(".")||""),a=r.matchPattern(/^@(?:index|key)/)||r.matchPattern(t.name)||"",!u&&!f&&s.test(a))return{t:e.GLOBAL,v:a};if(l=(u||f)+a,!l)return null;for(;c=r.matchPattern(n)||i(r);)l+=c;return r.matchString("(")&&(h=l.lastIndexOf("."),-1!==h?(l=l.substr(0,h),r.pos=o+l.length):r.pos-=1),{t:e.REFERENCE,n:l.replace(/^this\./,"./").replace(/^this$/,".")}}}(rt,ct),wt=function(e,t){return function(n){var r,i;return r=n.pos,n.matchString("(")?(n.allowWhitespace(),i=n.readExpression(),i||n.error(t.expectedExpression),n.allowWhitespace(),n.matchString(")")||n.error(t.expectedParen),{t:e.BRACKETED,x:i}):null}}(rt,it),Et=function(e,t,n){return function(r){return e(r)||t(r)||n(r)}}(yt,bt,wt),St=function(e,t,n){return function(r){var i,s,o;if(i=r.pos,r.allowWhitespace(),r.matchString(".")){if(r.allowWhitespace(),s=r.matchPattern(n.name))return{t:e.REFINEMENT,n:s};r.error("Expected a property name")}return r.matchString("[")?(r.allowWhitespace(),o=r.readExpression(),o||r.error(t.expectedExpression),r.allowWhitespace(),r.matchString("]")||r.error("Expected ']'"),{t:e.REFINEMENT,x:o}):null}}(rt,it,ct),xt=function(e,t,n,r,i){return function(s){var o,u,a,f;if(u=t(s),!u)return null;for(;u;)if(o=s.pos,a=r(s))u={t:e.MEMBER,x:u,r:a};else{if(!s.matchString("("))break;s.allowWhitespace(),f=n(s),s.allowWhitespace(),s.matchString(")")||s.error(i.expectedParen),u={t:e.INVOCATION,x:u},f&&(u.o=f)}return u}}(rt,Et,mt,St,it),Tt=function(e,t,n){var r,i;return i=function(n,r){return function(i){var s;return i.matchString(n)?(i.allowWhitespace(),s=i.readExpression(),s||i.error(t.expectedExpression),{s:n,o:s,t:e.PREFIX_OPERATOR}):r(i)}},function(){var e,t,s,o,u;for(o="! ~ + - typeof".split(" "),u=n,e=0,t=o.length;t>e;e+=1)s=i(o[e],u),u=s;r=u}(),r}(rt,it,xt),Nt=function(e,t){var n,r;return r=function(t,n){return function(r){var i,s,
o;if(s=n(r),!s)return null;for(;;){if(i=r.pos,r.allowWhitespace(),!r.matchString(t))return r.pos=i,s;if("in"===t&&/[a-zA-Z_$0-9]/.test(r.remaining().charAt(0)))return r.pos=i,s;if(r.allowWhitespace(),o=n(r),!o)return r.pos=i,s;s={t:e.INFIX_OPERATOR,s:t,o:[s,o]}}}},function(){var e,i,s,o,u;for(o="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),u=t,e=0,i=o.length;i>e;e+=1)s=r(o[e],u),u=s;n=u}(),n}(rt,Tt),Ct=function(e,t,n){return function(r){var i,s,o,u;return(s=t(r))?(i=r.pos,r.allowWhitespace(),r.matchString("?")?(r.allowWhitespace(),o=r.readExpression(),o||r.error(n.expectedExpression),r.allowWhitespace(),r.matchString(":")||r.error('Expected ":"'),r.allowWhitespace(),u=r.readExpression(),u||r.error(n.expectedExpression),{t:e.CONDITIONAL,o:[s,o,u]}):(r.pos=i,s)):null}}(rt,Nt,it),kt=function(e,t){function n(e){return JSON.stringify(String(e))}function r(n,i){var s,o;if(n.t===e.REFERENCE&&-1===i.indexOf(n.n)&&i.unshift(n.n),o=n.o||n.m)if(t(o))r(o,i);else for(s=o.length;s--;)r(o[s],i);n.x&&r(n.x,i),n.r&&r(n.r,i),n.v&&r(n.v,i)}function i(t,r,s){var o=function(e){return i(t,e,s)};switch(r.t){case e.BOOLEAN_LITERAL:case e.GLOBAL:case e.NUMBER_LITERAL:return r.v;case e.STRING_LITERAL:return n(r.v);case e.ARRAY_LITERAL:return"["+(r.m?r.m.map(o).join(","):"")+"]";case e.OBJECT_LITERAL:return"{"+(r.m?r.m.map(o).join(","):"")+"}";case e.KEY_VALUE_PAIR:return r.k+":"+i(t,r.v,s);case e.PREFIX_OPERATOR:return("typeof"===r.s?"typeof ":r.s)+i(t,r.o,s);case e.INFIX_OPERATOR:return i(t,r.o[0],s)+("in"===r.s.substr(0,2)?" "+r.s+" ":r.s)+i(t,r.o[1],s);case e.INVOCATION:return i(t,r.x,s)+"("+(r.o?r.o.map(o).join(","):"")+")";case e.BRACKETED:return"("+i(t,r.x,s)+")";case e.MEMBER:return i(t,r.x,s)+i(t,r.r,s);case e.REFINEMENT:return r.n?"."+r.n:"["+i(t,r.x,s)+"]";case e.CONDITIONAL:return i(t,r.o[0],s)+"?"+i(t,r.o[1],s)+":"+i(t,r.o[2],s);case e.REFERENCE:return"${"+s.indexOf(r.n)+"}";default:t.error("Expected legal JavaScript")}}return function(e){var t,n=[];return r(e,n),t={r:n,s:i(this,e,n)}}}(rt,u),Lt=function(e,t,n,r,i){var s,o,u=/^\s+/;return o=function(e){this.name="ParseError",this.message=e},o.prototype=Error.prototype,s=function(e,t){var n,r;for(this.str=e,this.options=t||{},this.pos=0,this.init&&this.init(e,t),n=[];this.pos<this.str.length&&(r=this.read());)n.push(r);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,t):n},s.prototype={read:function(e){var t,n,r,i;for(e||(e=this.converters),t=this.pos,r=e.length,n=0;r>n;n+=1)if(this.pos=t,i=e[n](this))return i;return null},readExpression:function(){return r(this)},flattenExpression:i,getLinePos:function(){var e,t,n,r,i,s;e=this.str.split("\n"),i=-1,r=0;do n=r,i++,t=e[i],r+=t.length+1;while(r<=this.pos);return s=this.pos-n,{line:i+1,ch:s+1,text:t,toJSON:function(){return[this.line,this.ch]},toString:function(){return"line "+this.line+" character "+this.ch+":\n"+this.text+"\n"+this.text.substr(0,this.ch-1).replace(/[\S]/g," ")+"^----"}}},error:function(e){var t,n;throw t=this.getLinePos(),n=e+" at "+t,new o(n)},matchString:function(e){return this.str.substr(this.pos,e.length)===e?(this.pos+=e.length,e):void 0},matchPattern:function(e){var t;return(t=e.exec(this.remaining()))?(this.pos+=t[0].length,t[1]||t[0]):void 0},allowWhitespace:function(){this.matchPattern(u)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},s.extend=function(e){var r,i,o=this;r=function(e,t){s.call(this,e,t)},r.prototype=t(o.prototype);for(i in e)n.call(e,i)&&(r.prototype[i]=e[i]);return r.extend=s.extend,r},e.Parser=s,s}(i,U,s,Ct,kt),At=function(){var e=/^[^\s=]+/,t=/^\s+/;return function(n){var r,i,s;return n.matchString("=")?(r=n.pos,n.allowWhitespace(),(i=n.matchPattern(e))?n.matchPattern(t)?(s=n.matchPattern(e))?(n.allowWhitespace(),n.matchString("=")?[i,s]:(n.pos=r,null)):(n.pos=r,null):null:(n.pos=r,null)):null}}(),Ot=function(e){var t={"#":e.SECTION,"^":e.INVERTED,"/":e.CLOSING,">":e.PARTIAL,"!":e.COMMENT,"&":e.TRIPLE};return function(e){var n=t[e.str.charAt(e.pos)];return n?(e.pos+=1,n):null}}(rt),Mt=function(e,t){function n(t,n){for(var r,i=[];n.t===e.MEMBER&&n.r.t===e.REFINEMENT;)r=n.r,i.unshift(r.x?r.x.t===e.REFERENCE?r.x:t.flattenExpression(r.x):r.n),n=n.x;return n.t!==e.REFERENCE?null:{r:n.n,m:i}}var r,i,s=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,o=/^[0-9][1-9]*$/,u=/(if|unless|with|each|try)\b/;return r={"if":e.SECTION_IF,unless:e.SECTION_UNLESS,"with":e.SECTION_WITH,each:e.SECTION_EACH},i=/^[a-zA_Z$_0-9]+(?:(\.[a-zA_Z$_0-9]+)|(\[[a-zA_Z$_0-9]+\]))*$/,function(a,f){var l,c,h,p,d,v,m,g,y,b,w;if(l=a.pos,h={},f)h.t=e.TRIPLE;else if((v=a.readExpression())&&(h.t=e.INTERPOLATOR,a.allowWhitespace(),a.matchString(a.delimiters[1])?a.pos-=a.delimiters[1].length:(a.pos=l,v=null)),!v)if(p=t(a),h.t=p||e.INTERPOLATOR,p===e.SECTION&&a.handlebars)d=a.matchPattern(u),d&&r[d]&&(h.n=r[d],a.allowWhitespace());else if(p===e.INVERTED)h.t=e.SECTION,h.n=e.SECTION_UNLESS;else if((p===e.COMMENT||p===e.CLOSING)&&(g=a.remaining(),y=g.indexOf(a.delimiters[1]),-1!==y))return h.r=g.substr(0,y),a.pos+=y,h;if(!v&&(a.allowWhitespace(),v=a.readExpression(),g=a.remaining(),b=f?a.tripleDelimiters[1]:a.delimiters[1],g.substr(0,b.length)!==b&&":"!==g.charAt(0))){if(c=a.pos,a.pos=l,g=a.remaining(),y=g.indexOf(a.delimiters[1]),-1!==y)return h.r=g.substr(0,y).trim(),i.test(h.r)||a.error("Expected a legal Mustache reference"),a.pos+=y,h;a.pos=c}if(v){for(;v.t===e.BRACKETED&&v.x;)v=v.x;v.t===e.REFERENCE?h.r=v.n:v.t===e.NUMBER_LITERAL&&o.test(v.v)?h.r=v.v:(w=n(a,v))?h.rx=w:h.x=a.flattenExpression(v)}return(m=a.matchPattern(s))&&(h.i=m),h}}(rt,Ot),_t=function(e,t,n){function r(e){var t=e.tripleDelimiters[0].length>e.delimiters[0].length;return i(e,t)||i(e,!t)}function i(r,i){var o,u,f,l,c,h,p,d,v,m;if(o=r.pos,u=r.getLinePos(),l=i?r.tripleDelimiters:r.delimiters,!r.matchString(l[0]))return null;if(f=t(r))return r.matchString(l[1])?(r[i?"tripleDelimiters":"delimiters"]=f,a):null;if(r.allowWhitespace
(),f=n(r,i),null===f)return r.pos=o,null;if(r.allowWhitespace(),r.matchString(l[1])||r.error("Expected closing delimiter '"+l[1]+"' after reference"),f.t===e.COMMENT&&(f.exclude=!0),f.t===e.SECTION){if(c=[],d=c,r.options.strict||r.handlebars)switch(f.n){case e.SECTION_IF:h="if";break;case e.SECTION_EACH:h="each";break;case e.SECTION_UNLESS:h="unless";break;case e.SECTION_WITH:h="with"}for(;v=r.read();){if(v.t===e.CLOSING){h&&v.r!==h&&r.error("Expected {{/"+h+"}}");break}if(r.handlebars&&v.t===e.INTERPOLATOR&&"else"===v.r)switch(f.n){case e.SECTION_IF:case e.SECTION_EACH:d=p=[];continue;case e.SECTION_UNLESS:r.error("{{else}} not allowed in {{#unless}}");break;case e.SECTION_WITH:r.error("{{else}} not allowed in {{#with}}")}d.push(v)}c.length&&(f.f=c,!f.i&&f.n===e.SECTION_EACH&&(m=s(f.f))&&(f.i=m)),p&&p.length&&(f.l=p)}return r.includeLinePositions&&(f.p=u.toJSON()),f}function s(t){var n,r,i;for(n=t.length;n--;){if(r=t[n],r.t===e.ELEMENT&&r.f&&(i=s(r.f)))return i;if(r.t===e.INTERPOLATOR||r.t===e.TRIPLE||r.t===e.SECTION){if(r.r&&f.test(r.r))return r.r;if(r.x&&(i=o(r.x)))return i;if(r.rx&&(i=u(r.rx)))return i}}}function o(e){var t;for(t=e.r.length;t--;)if(f.test(e.r[t]))return e.r[t]}function u(t){var n,r,i;for(n=t.m.length;n--;){if(i=t.m[n],i.r&&(r=o(i)))return r;if(i.t===e.REFERENCE&&f.test(i.n))return i.n}}var a={t:e.DELIMCHANGE,exclude:!0},f=/^@(?:index|key)$/;return r}(rt,At,Mt),Dt=function(e){var t="<!--",n="-->";return function(r){var i,s,o,u,a;return i=r.getLinePos(),r.matchString(t)?(o=r.remaining(),u=o.indexOf(n),-1===u&&r.error("Illegal HTML - expected closing comment sequence ('-->')"),s=o.substr(0,u),r.pos+=u+3,a={t:e.COMMENT,c:s},r.includeLinePositions&&(a.p=i.toJSON()),a):null}}(rt),Pt=function(){var e=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;return e}(),Ht=function(e,t){var n,r,i;for(n=t.length;n--;){if(r=e.indexOf(t[n]),!r)return 0;-1!==r&&(!i||i>r)&&(i=r)}return i||-1},Bt=function(){function e(e){return e?10===e?32:128>e?e:159>=e?n[e-128]:55296>e?e:57343>=e?65533:65535>=e?e:65533:65533}var t,n,r,i,s;return t={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},n=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],r=new RegExp("&("+Object.keys(t).join("|")+");?","g"),i=/&#x([0-9]+);?/g,s=/&#([0-9]+);?/g,function(n){var o;return o=n.replace(r,function(e,n){return t[n]?String.fromCharCode(t[n]):e}),o=o.replace(i,function(t,n){return String.fromCharCode(e(parseInt(n,16)))}),o=o.replace(s,function(t,n){return String.fromCharCode(e(n))})}}(),jt=function(e,t){return function(n){var r,i,s;return i=n.remaining(),s=n.inside?"</"+n.inside:"<",(r=n.inside&&!n.interpolate[n.inside]?i.indexOf(s):e(i,[s,n.delimiters[0],n.tripleDelimiters[0]]))?(-1===r&&(r=i.length),n.pos+=r,t(i.substr(0,r))):null}}(Ht,Bt),Ft=function(e){var t=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;return function(n){var r;return n.matchString("</")?(r=n.matchPattern(t))?{t:e.CLOSING_TAG,e:r}:(n.pos-=2,void n.error("Illegal closing tag")):null}}(rt),It=function(e,t){function n(e){var t,n,i;return e.allowWhitespace(),(n=e.matchPattern(a))?(t={name:n},i=r(e),i&&(t.value=i),t):null}function r(e){var t,n;return t=e.pos,e.allowWhitespace(),e.matchString("=")?(e.allowWhitespace(),n=o(e,"'")||o(e,'"')||s(e),null===n?(e.pos=t,null):1===n.length&&"string"==typeof n[0]?n[0]:n):(e.pos=t,null)}function i(e){var t,n,r;return t=e.pos,(n=e.matchPattern(f))?(-1!==
(r=n.indexOf(e.delimiters[0]))&&(n=n.substr(0,r),e.pos=t+n.length),n):null}function s(e){var n,r;for(n=[],r=t(e)||i(e);null!==r;)n.push(r),r=t(e)||i(e);return n.length?n:null}function o(e,n){var r,i,s;if(r=e.pos,!e.matchString(n))return null;for(i=[],s=t(e)||u(e,n);null!==s;)i.push(s),s=t(e)||u(e,n);return e.matchString(n)?i:(e.pos=r,null)}function u(t,n){var r,i,s;return r=t.pos,s=t.remaining(),i=e(s,[n,t.delimiters[0],t.delimiters[1]]),-1===i&&t.error("Quoted attribute value must have a closing quote"),i?(t.pos+=i,s.substr(0,i)):null}var a=/^[^\s"'>\/=]+/,f=/^[^\s"'=<>`]+/;return n}(Ht,_t),qt=function(e,t,n){function r(e){var t,r,i;return e.allowWhitespace(),(t=n(e))?(i={key:t},e.allowWhitespace(),e.matchString(":")?(e.allowWhitespace(),(r=e.read())?(i.value=r.v,i):null):null):null}var i,s,o,u,a,f,l;return s={"true":!0,"false":!1,"undefined":void 0,"null":null},o=new RegExp("^(?:"+Object.keys(s).join("|")+")"),u=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,a=/\$\{([^\}]+)\}/g,f=/^\$\{([^\}]+)\}/,l=/^\s*$/,i=e.extend({init:function(e,t){this.values=t.values},postProcess:function(e){return 1===e.length&&l.test(this.leftover)?{value:e[0].v}:null},converters:[function(e){var t;return e.values?(t=e.matchPattern(f),t&&e.values.hasOwnProperty(t)?{v:e.values[t]}:void 0):null},function(e){var t;return(t=e.matchPattern(o))?{v:s[t]}:void 0},function(e){var t;return(t=e.matchPattern(u))?{v:+t}:void 0},function(e){var n,r=t(e);return r&&(n=e.values)?{v:r.v.replace(a,function(e,t){return t in n?n[t]:t})}:r},function(e){var t,n;if(!e.matchString("{"))return null;for(t={};n=r(e);){if(t[n.key]=n.value,e.allowWhitespace(),e.matchString("}"))return{v:t};if(!e.matchString(","))return null}return null},function(e){var t,n;if(!e.matchString("["))return null;for(t=[],e.allowWhitespace();n=e.read();){if(t.push(n.v),e.allowWhitespace(),e.matchString("]"))return{v:t};if(!e.matchString(","))return null;e.allowWhitespace()}return null}]}),function(e,t){var n=new i(e,{values:t});return n.result}}(Lt,lt,ht),Rt=function(e){return function(t){var n,r,i,s,o,u;if("string"==typeof t){if(-1===t.indexOf(":"))return t.trim();t=[t]}for(n={},s=[],o=[];t.length;)if(r=t.shift(),"string"==typeof r){if(i=r.indexOf(":"),-1!==i){i&&s.push(r.substr(0,i)),r.length>i+1&&(o[0]=r.substring(i+1));break}s.push(r)}else s.push(r);return o=o.concat(t),o.length||"string"!=typeof s?(n={n:1===s.length&&"string"==typeof s[0]?s[0]:s},1===o.length&&"string"==typeof o[0]?(u=e("["+o[0]+"]"),n.a=u?u.value:o[0]):n.d=o):n=s,n}}(qt),Ut=function(e,t,n,r,i,s,o,u){function a(n){var r,i,s,a,g,y,b,w,E,S,x,T;if(r=n.pos,i=n.getLinePos(),n.inside)return null;if(!n.matchString("<"))return null;if("/"===n.nextChar())return null;if(s={t:e.ELEMENT},n.includeLinePositions&&(s.p=i.toJSON()),n.matchString("!")&&(s.y=1),s.e=n.matchPattern(l),!s.e)return null;for(c.test(n.nextChar())||n.error("Illegal tag name"),b=function(e,t){var r=t.n||t;d.test(r)&&(n.pos-=r.length,n.error("Cannot use reserved event names (change, reset, teardown, update)")),s.v[e]=t};w=o(n);)(g=v[w.name])?s[g]=u(w.value):(y=p.exec(w.name))?(s.v||(s.v={}),E=u(w.value),b(y[1],E)):n.sanitizeEventAttributes&&h.test(w.name)||(s.a||(s.a={}),s.a[w.name]=w.value||0);if(n.allowWhitespace(),n.matchString("/")&&(S=!0),!n.matchString(">"))return null;if(a=s.e.toLowerCase(),!S&&!t.test(s.e)){for(("script"===a||"style"===a)&&(n.inside=a),x=[];(T=n.read(f))&&T.t!==e.CLOSING&&T.t!==e.CLOSING_TAG;)x.push(T);x.length&&(s.f=x)}return n.inside=null,n.sanitizeElements&&-1!==n.sanitizeElements.indexOf(a)?m:s}var f,l=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,c=/^[\s\n\/>]/,h=/^on/,p=/^on-([a-zA-Z$_][a-zA-Z$_0-9\-]+)$/,d=/^(?:change|reset|teardown|update)$/,v={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},m={exclude:!0};return f=[n,r,a,i,s],a}(rt,Pt,_t,Dt,jt,Ft,It,Rt),zt=function(){var e=/^[ \t\f\r\n]+/,t=/[ \t\f\r\n]+$/;return function(n,r,i){var s;r&&(s=n[0],"string"==typeof s&&(s=s.replace(e,""),s?n[0]=s:n.shift())),i&&(s=n[n.length-1],"string"==typeof s&&(s=s.replace(t,""),s?n[n.length-1]=s:n.pop()))}}(),Wt=function(e){function t(e){return"string"==typeof e}function n(t){return t.t===e.COMMENT||t.t===e.DELIMCHANGE}function r(t){return(t.t===e.SECTION||t.t===e.INVERTED)&&t.f}var i=/^\s*\r?\n/,s=/\r?\n\s*$/;return function(e){var o,u,a,f,l;for(o=1;o<e.length;o+=1)u=e[o],a=e[o-1],f=e[o-2],t(u)&&n(a)&&t(f)&&s.test(f)&&i.test(u)&&(e[o-2]=f.replace(s,"\n"),e[o]=u.replace(i,"")),r(u)&&t(a)&&s.test(a)&&t(u.f[0])&&i.test(u.f[0])&&(e[o-1]=a.replace(s,"\n"),u.f[0]=u.f[0].replace(i,"")),t(u)&&r(a)&&(l=a.f[a.f.length-1],t(l)&&s.test(l)&&i.test(u)&&(a.f[a.f.length-1]=l.replace(s,"\n"),e[o]=u.replace(i,"")));return e}}(rt),Xt=function(e,t,n,r,i,s,o,u){function a(t,n,r,i,s,f){var l,c,p,d,y,b,w,E,S;for(u(t),l=t.length;l--;)c=t[l],c.exclude?t.splice(l,1):n&&c.t===e.COMMENT&&t.splice(l,1);for(o(t,i,s),l=t.length;l--;)if(c=t[l],c.f&&(y=r||c.t===e.ELEMENT&&v.test(c.e),y||(p=t[l-1],d=t[l+1],(!p||"string"==typeof p&&g.test(p))&&(b=!0),(!d||"string"==typeof d&&m.test(d))&&(w=!0)),a(c.f,n,y,b,w,f),c.l&&(a(c.l,n,r,b,w,f),f&&(E={t:4,r:c.r,n:e.SECTION_UNLESS,f:c.l},t.splice(l+1,0,E),delete c.l))),c.a)for(S in c.a)c.a.hasOwnProperty(S)&&"string"!=typeof c.a[S]&&a(c.a[S],n,r,f);for(l=t.length;l--;)"string"==typeof t[l]&&("string"==typeof t[l+1]&&(t[l]=t[l]+t[l+1],t.splice(l+1,1)),r||(t[l]=t[l].replace(h," ")),""===t[l]&&t.splice(l,1))}var f,l,c,h=/[ \t\f\r\n]+/g,p=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,d=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,v=/^(?:pre|script|style|textarea)$/i,m=/^\s+/,g=/\s+$/;return f=t.extend({init:function(e,t){this.delimiters=t.delimiters||["{{","}}"],this.tripleDelimiters=t.tripleDelimiters||["{{{","}}}"],this.interpolate={script:!t.interpolate||t.interpolate.script!==!1,style:!t.interpolate||t.interpolate.style!==!1},t.sanitize===!0&&(t.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title"
.split(" "),eventAttributes:!0}),this.sanitizeElements=t.sanitize&&t.sanitize.elements,this.sanitizeEventAttributes=t.sanitize&&t.sanitize.eventAttributes,this.includeLinePositions=t.includeLinePositions,this.handlebars=t.handlebars},postProcess:function(e,t){return a(e,t.stripComments!==!1,t.preserveWhitespace,!t.preserveWhitespace,!t.preserveWhitespace,t.rewriteElse!==!1),e},converters:[n,r,i,s]}),l=function(e,t){var n;return t=t||{},p.test(e)?c(e,t):(n=new f(e,t),n.leftover&&n.error("Unexpected character"),n.result)},c=function(e,t){var n,r,i,s,o,u;for(i={},n="",r=e;o=p.exec(r);){if(s=o[1],n+=r.substr(0,o.index),r=r.substring(o.index+o[0].length),u=d.exec(r),!u||u[1]!==s)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");i[s]=l(r.substr(0,u.index),t),r=r.substring(u.index+u[0].length)}return{main:l(n,t),partials:i}},l}(rt,Lt,_t,Dt,Ut,jt,zt,Wt),Vt=function(e,t,n,r){function i(e){var t=r(f);return t.parse=function(t,n){return s(t,n||e)},t}function s(t,r){if(!n)throw new Error(e.missingParser);return n(t,r||this.options)}function o(e,n){var r;if(!t){if(n&&n.noThrow)return;throw new Error("Cannot retieve template #"+e+"as Ractive is not running in the client.")}if(u(e)&&(e=e.substring(1)),!(r=document.getElementById(e))){if(n&&n.noThrow)return;throw new Error("Could not find template element with id #"+e)}return r.innerHTML}function u(e){return"#"===e.charAt(0)}function a(e){return"string"!=typeof e}var f={parse:s,fromId:o,isHashedId:u,isParsed:a,createHelper:i};return f}(nt,p,Xt,U),$t=function(e,t){var n=e.map(t);return e.forEach(function(e,t){n[e]=n[t]}),n},Jt=function(e){return function(t){var n=e(t);return n.postInit=function(e,n){e.parseOptions[t]=n},n}}(I),Kt=function(e,t){var n,r;return n=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","handlebars"],r=e(n,function(e){return t(e)})}($t,Jt),Qt=function(e,t,n,r){function i(e,t,n){return"undefined"==typeof n&&(n=t),n}function s(e,t,n){var r=i(e,t,n);if("function"==typeof r){var s=r;r=o(e,s),e._config[this.name]={fn:s,result:r}}return r}function o(e,n){var r=t.createHelper(a(e));return n.call(e,e.data,r)}function u(e){var t,n=e._config.template;if(n&&n.fn)return t=o(e,n.fn),t!==n.result?(n.result=t,t):void 0}function a(e){if(e.parseOptions)return e.parseOptions;var t=e.defaults;if(t)return r.reduce(function(e,n){return e[n.name]=t[n.name],e},{})}function f(e,n){return n?(t.isParsed(n)||(t.isHashedId(n)&&(n=t.fromId(n)),n=t.parse(n,a(e))),n=l(e,n),n&&1===n.length&&"string"==typeof n[0]&&(n=n[0]),n):n}function l(e,t){if(!n(t))return t;e.partials=e.partials||{};for(var r in t.partials)e.partials[r]=t.partials[r];return t.main}var c=e({name:"template",useDefaults:!0,defaultValue:"",extendValue:i,postExtend:f,initValue:s,postInit:f,resetValue:u,processCompound:l});return c}(F,Vt,u,Kt),Gt=function(e){function t(e,t){return r(e.defaults,t)}function n(e,t){return r(e,t)}function r(e,t){var n,r=e.adapt;if(!r||!r.length)return t;if(t&&Object.keys(t).length&&(n=r.length))for(;n--;){var i=r[n];"string"==typeof i&&(r[n]=t[i]||i)}return e.adapt=r,t}var i=e({name:"adaptors",postExtend:t,postInit:n});return i}(Q),Yt=function(e,t){function n(e,n){if(n.eventDefinitions){if(n.events)throw new Error(i+" You cannot specify both options, please use ractive.events.");t(i+" Support will be removed in future versions."),n.events=n.eventDefinitions}}var r=e({name:"events",preExtend:n,preInit:n}),i="ractive.eventDefinitions has been deprecated in favour of ractive.events. ";return r}(Q,H),Zt=function(e,t,n,r){var i,s,o;return i=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],s={adaptors:n,events:r},o=e(i,function(e){return s[e]||t({name:e})})}($t,Q,Gt,Yt),en=function(e,t,n,r,i,s,o,u,a,f,l,c){var h,p,d;return h={data:r,debug:i,complete:o,computed:a,adapt:e,magic:u,template:f,css:n},p=Object.keys(s).filter(function(e){return!c[e]&&!h[e]&&!l[e]}).map(t),d=[].concat(h.debug,h.data,l,p,h.adapt,h.magic,h.complete,h.computed,c,h.template,h.css),d.keys=d.map(function(e){return e.name}),d.keys.forEach(function(e,t){d[e]=d[t],d.keys[e]=!0}),d.parseOptions=l,d.registries=c,d.extend=function(e,t,n){d.forEach(function(r){r.extend(e,t,n)})},d.init=function(e,t,n){d.forEach(function(r){r.init(e,t,n),n[r.name]=t[r.name],t._config&&(t._config.options=n)})},d.reset=function(e){return d.filter(function(t){return t.reset&&t.reset(e)})},d}(B,I,R,W,X,n,V,$,tt,Qt,Kt,Zt),tn=function(e,t,n,r){function i(e){return function(){return e}}var s=function(e,s,o,u){if(e===s)return i(s);if(u){var a=r.registries.interpolators.find(o,u);if(a)return a(e,s)||i(s);t('Missing "'+u+'" interpolator. You may need to download a plugin from [TODO]')}return n.number(e,s)||n.array(e,s)||n.object(e,s)||n.cssLength(e,s)||i(s)};return e.interpolate=s,s}(i,H,f,en),nn=function(e,t,n){var r=function(e){var t;this.startTime=Date.now();for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.interpolator=n(this.from,this.to,this.root,this.interpolator),this.running=!0};return r.prototype={tick:function(){var n,r,i,s,o,u;return u=this.keypath,this.running?(s=Date.now(),n=s-this.startTime,n>=this.duration?(null!==u&&(t.start(this.root),this.root.viewmodel.set(u,this.to),t.end()),this.step&&this.step(1,this.to),this.complete(this.to),o=this.root._animations.indexOf(this),-1===o&&e("Animation was not found"),this.root._animations.splice(o,1),this.running=!1,!1):(r=this.easing?this.easing(n/this.duration):n/this.duration,null!==u&&(i=this.interpolator(r),t.start(this.root),this.root.viewmodel.set(u,i),t.end()),this.step&&this.step(r,i),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&e("Animation was not found"),this.root._animations.splice(t,1)}},r}(H,D,tn),rn=function(e,t,n,r,i){function s(t,s,o,a){var f,l,c,h;return s&&(s=n(s)),null!==s&&(h=t.viewmodel.get(s)),r.abort(s,t),e(h,o)?(a.complete&&a.complete(a.to),u):(a.easing&&(f="function"==typeof a.easing?a.easing:t.
easing[a.easing],"function"!=typeof f&&(f=null)),l=void 0===a.duration?400:a.duration,c=new i({keypath:s,from:h,to:o,root:t,duration:l,easing:f,interpolator:a.interpolator,step:a.step,complete:a.complete}),r.add(c),t._animations.push(c),c)}var o=function(){},u={stop:o};return function(e,n,r){var i,u,a,f,l,c,h,p,d,v,m,g,y,b;if(i=new t(function(e){u=e}),"object"==typeof e){r=n||{},c=r.easing,h=r.duration,l=[],p=r.step,d=r.complete,(p||d)&&(m={},r.step=null,r.complete=null,v=function(e){return function(t,n){m[e]=n}});for(a in e)e.hasOwnProperty(a)&&((p||d)&&(g=v(a),r={easing:c,duration:h},p&&(r.step=g)),r.complete=d?g:o,l.push(s(this,a,e[a],r)));return(p||d)&&(b={easing:c,duration:h},p&&(b.step=function(e){p(e,m)}),d&&i.then(function(e){d(e,m)}),b.complete=u,y=s(this,null,null,b),l.push(y)),{stop:function(){for(var e;e=l.pop();)e.stop();y&&y.stop()}}}return r=r||{},r.complete&&i.then(r.complete),r.complete=u,f=s(this,e,n,r),i.stop=function(){f.stop()},i}}(y,b,w,P,nn),sn=function(e){return function(){return this.el&&e(this.el.__ractive_instances__,this),this.fragment.detach()}}(T),on=function(e){return this.el?this.fragment.find(e):null},un=function(e,t,n){var r,i,s,o,u,a,f,l;if(e){for(i=n("div"),s=["matches","matchesSelector"],l=function(e){return function(t,n){return t[e](n)}},a=s.length;a--&&!r;)if(o=s[a],i[o])r=l(o);else for(f=t.length;f--;)if(u=t[a]+o.substr(0,1).toUpperCase()+o.substring(1),i[u]){r=l(u);break}r||(r=function(e,t){var n,r,s;for(r=e.parentNode,r||(i.innerHTML="",r=i,e=e.cloneNode(),i.appendChild(e)),n=r.querySelectorAll(t),s=n.length;s--;)if(n[s]===e)return!0;return!1})}else r=null;return r}(p,E,h),an=function(e){return function(t,n){var r=this._isComponentQuery?!this.selector||t.name===this.selector:e(t.node,this.selector);return r?(this.push(t.node||t.instance),n||this._makeDirty(),!0):void 0}}(un),fn=function(){var e,t,n;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],t=this.selector,n=e.indexOf(t),-1!==n&&(e.splice(n,1),e[t]=null)},ln=function(){function e(e){var t;return(t=e.parentFragment)?t.owner:e.component&&(t=e.component.parentFragment)?t.owner:void 0}function t(t){var n,r;for(n=[t],r=e(t);r;)n.push(r),r=e(r);return n}return function(e,n){var r,i,s,o,u,a,f,l,c,h;for(r=t(e.component||e._ractive.proxy),i=t(n.component||n._ractive.proxy),s=r[r.length-1],o=i[i.length-1];s&&s===o;)r.pop(),i.pop(),u=s,s=r[r.length-1],o=i[i.length-1];if(s=s.component||s,o=o.component||o,c=s.parentFragment,h=o.parentFragment,c===h)return a=c.items.indexOf(s),f=h.items.indexOf(o),a-f||r.length-i.length;if(l=u.fragments)return a=l.indexOf(c),f=l.indexOf(h),a-f||r.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),cn=function(e){return function(t,n){var r;return t.compareDocumentPosition?(r=t.compareDocumentPosition(n),2&r?1:-1):e(t,n)}}(ln),hn=function(e,t){return function(){this.sort(this._isComponentQuery?t:e),this._dirty=!1}}(cn,ln),pn=function(e){return function(){var t=this;this._dirty||(this._dirty=!0,e.afterViewUpdate(function(){t._sort()}))}}(D),dn=function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e);-1!==t&&this.splice(t,1)},vn=function(e,t,n,r,i,s){return function(o,u,a,f){var l=[];return e(l,{selector:{value:u},live:{value:a},_isComponentQuery:{value:f},_test:{value:t}}),a?(e(l,{cancel:{value:n},_root:{value:o},_sort:{value:r},_makeDirty:{value:i},_remove:{value:s},_dirty:{value:!1,writable:!0}}),l):l}}(v,an,fn,hn,pn,dn),mn=function(e){return function(t,n){var r,i;return this.el?(n=n||{},r=this._liveQueries,(i=r[t])?n&&n.live?i:i.slice():(i=e(this,t,!!n.live,!1),i.live&&(r.push(t),r["_"+t]=i),this.fragment.findAll(t,i),i)):[]}}(vn),gn=function(e){return function(t,n){var r,i;return n=n||{},r=this._liveComponentQueries,(i=r[t])?n&&n.live?i:i.slice():(i=e(this,t,!!n.live,!0),i.live&&(r.push(t),r["_"+t]=i),this.fragment.findAllComponents(t,i),i)}}(vn),yn=function(e){return this.fragment.findComponent(e)},bn=function(e){var t,n,r,i=this._subs[e];if(i)for(t=Array.prototype.slice.call(arguments,1),n=0,r=i.length;r>n;n+=1)i[n].apply(this,t)},wn=function(e){var t={capture:!0};return function(n){return n=e(n),this.viewmodel.get(n,t)}}(w),En=function(e){var t;if(e&&"boolean"!=typeof e)return"undefined"!=typeof window&&document&&e?e.nodeType?e:"string"==typeof e&&(t=document.getElementById(e),!t&&document.querySelector&&(t=document.querySelector(e)),t&&t.nodeType)?t:e[0]&&e[0].nodeType?e[0]:null:null},Sn=function(e){return function(t,n){if(!this.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=e(t),n=e(n)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),n),this.el=t,(t.__ractive_instances__||(t.__ractive_instances__=[])).push(this)}}(En),xn=function(e,t){var n,r,i,s;return n={},r=0,i=e.map(function(e,i){var o,u,a;u=r,a=t.length;do{if(o=t.indexOf(e,u),-1===o)return s=!0,-1;u=o+1}while(n[o]&&a>u);return o===r&&(r+=1),o!==i&&(s=!0),n[o]=!0,o}),i.unchanged=!s,i},Tn=function(e,t){return function(n,r,i,s){var o;n.viewmodel.changes.push(r),o=function(t){t.type===e.REFERENCE?t.update():t.keypath===r&&t.type===e.SECTION&&!t.inverted&&t.docFrag?t.merge(i):t.update()},n.viewmodel.deps.forEach(function(e){var t=e[r];t&&t.forEach(o)}),s||t(n,r+".length",!0)}}(rt,M),Nn=function(e,t,n,r,i,s){function o(e){return JSON.stringify(e)}function u(e){if(e===!0)return o;if("string"==typeof e)return a[e]||(a[e]=function(t){return t[e]}),a[e];if("function"==typeof e)return e;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}var a={};return function(o,a,f){var l,c,h,p,d,v,m,g;if(l=this.get(o),!n(l)||!n(a))return this.set(o,a,f&&f.complete);if(d=l.length===a.
length,f&&f.compare){p=u(f.compare);try{c=l.map(p),h=a.map(p)}catch(y){if(this.debug)throw y;t("Merge operation: comparison failed. Falling back to identity checking"),c=l,h=a}}else c=l,h=a;return v=i(c,h),m=new r(function(e){g=e}),e.start(this,g),this.viewmodel.set(o,a,!0),s(this,o,v,d),e.end(),f&&f.complete&&m.then(f.complete),m}}(D,H,o,b,xn,Tn),Cn=function(e,t){var n=function(e,t,n,r){this.root=e,this.keypath=t,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.priority=0,this.context=r&&r.context?r.context:e};return n.prototype={init:function(e){this.value=this.root.viewmodel.get(this.keypath),e!==!1&&this.update()},setValue:function(n){var r=this;t(n,this.oldValue)||(this.value=n,this.defer&&this.ready?e.afterViewUpdate(function(){return r.update()}):e.afterModelUpdate(function(){return r.update()}))},update:function(){if(!this.updating){this.updating=!0;try{this.callback.call(this.context,this.value,this.oldValue,this.keypath)}catch(e){if(this.debug||this.root.debug)throw e}this.oldValue=this.value,this.updating=!1}}},n}(D,y),kn=function(e){return function(t,n){function r(n,r){var i,s,o;i=t.viewmodel.wrapped[r]?t.viewmodel.wrapped[r].get():t.get(r);for(s in i)!i.hasOwnProperty(s)||"_ractive"===s&&e(i)||(o=r?r+"."+s:s,n.push(o));return n}function i(e){return function(t){return t?t+"."+e:e}}var s,o,u;for(s=n.split("."),u=[""];o=s.shift();)"*"===o?u=u.reduce(r,[]):""===u[0]?u[0]=o:u=u.map(i(o));return u}}(o),Ln=function(e){return function(t,n){var r,i;return r=e(t,n),i={},r.forEach(function(e){i[e]=t.get(e)}),i}}(kn),An=function(e,t,n,r){var i,s=/\*/,o=Array.prototype.slice;return i=function(e,t,n,r){this.root=e,this.callback=n,this.defer=r.defer,this.debug=r.debug,this.keypath=t,this.regex=new RegExp("^"+t.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=r&&r.context?r.context:e},i.prototype={init:function(e){var t,n;if(t=r(this.root,this.keypath),e!==!1)for(n in t)t.hasOwnProperty(n)&&this.update(n);else this.values=t},update:function(t){var i,o;if(s.test(t)){i=r(this.root,t);for(t in i)i.hasOwnProperty(t)&&this.update(t)}else if(!(".length"===t.substr(-7)&&(o=this.root.viewmodel.get(t.substr(0,t.length-7)),n(o)&&o._ractive&&o._ractive.setting)))return this.defer&&this.ready?void e.addObserver(this.getProxy(t)):void this.reallyUpdate(t)},reallyUpdate:function(e){var n,r,i;if(n=this.root.viewmodel.get(e),this.updating)return void (this.values[e]=n);if(this.updating=!0,!t(n,this.values[e])||!this.ready){r=o.call(this.regex.exec(e),1),i=[n,this.values[e],e].concat(r);try{this.callback.apply(this.context,i)}catch(s){if(this.debug||this.root.debug)throw s}this.values[e]=n}this.updating=!1},getProxy:function(e){var t=this;return this.proxies[e]||(this.proxies[e]={update:function(){t.reallyUpdate(e)}}),this.proxies[e]}},i}(D,y,o,Ln),On=function(e,t,n){var r=/\*/,i={};return function(s,o,u,a){var f,l;return o=e(o),a=a||i,r.test(o)?(f=new n(s,o,u,a),s._patternObservers.push(f),l=!0):f=new t(s,o,u,a),s.viewmodel.register(f),f.init(a.init),f.ready=!0,{cancel:function(){var e;l&&(e=s._patternObservers.indexOf(f),-1!==e&&s._patternObservers.splice(e,1)),s.viewmodel.unregister(f)}}}}(w,Cn,An),Mn=function(e,t){return function(n,r,i){var s,o,u,a;if(e(n)){i=r,o=n,s=[];for(n in o)o.hasOwnProperty(n)&&(r=o[n],s.push(this.observe(n,r,i)));return{cancel:function(){for(;s.length;)s.pop().cancel()}}}if("function"==typeof n)return i=r,r=n,n="",t(this,n,r,i);if(u=n.split(" "),1===u.length)return t(this,n,r,i);for(s=[],a=u.length;a--;)n=u[a],n&&s.push(t(this,n,r,i));return{cancel:function(){for(;s.length;)s.pop().cancel()}}}}(u,On),_n=function(e){return e.trim()},Dn=function(e){return""!==e},Pn=function(e,t){return function(n,r){var i,s=this;if(n)i=n.split(" ").map(e).filter(t),i.forEach(function(e){var t,n;(t=s._subs[e])&&(r?(n=t.indexOf(r),-1!==n&&t.splice(n,1)):s._subs[e]=[])});else for(n in this._subs)delete this._subs[n]}}(_n,Dn),Hn=function(e,t){return function(n,r){var i,s,o,u=this,a=this;if("object"==typeof n){i=[];for(s in n)n.hasOwnProperty(s)&&i.push(this.on(s,n[s]));return{cancel:function(){for(var e;e=i.pop();)e.cancel()}}}return o=n.split(" ").map(e).filter(t),o.forEach(function(e){(u._subs[e]||(u._subs[e]=[])).push(r)}),{cancel:function(){a.off(n,r)}}}}(_n,Dn),Bn=function(e,t,n,r){function i(e){e.init&&e.init(e._config.options),e._childInitQueue.splice(0).forEach(i)}return function(s,o){var u,a,f;if(this._rendering=!0,u=new n(function(e){a=e}),e.start(this,a),this.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");return s=r(s)||this.el,o=r(o)||this.anchor,this.el=s,this.anchor=o,this.constructor.css&&t.add(this.constructor),s&&((f=s.__ractive_instances__)?f.push(this):s.__ractive_instances__=[this],o?s.insertBefore(this.fragment.render(),o):s.appendChild(this.fragment.render())),this._parent&&this._parent._rendering?this._parent._childInitQueue.push(this):i(this),delete this._rendering,e.end(),this.rendered=!0,u}}(D,N,b,En),jn=function(){this.dirtyValue=this.dirtyArgs=!0,this.inited&&this.owner.bubble&&this.owner.bubble()},Fn=function(){var e;return 1===this.items.length?this.items[0].detach():(e=document.createDocumentFragment(),this.items.forEach(function(t){e.appendChild(t.detach())}),e)},In=function(e){return function(t){var n,r,i,s,o;if(this.nodes){for(r=this.nodes.length,n=0;r>n;n+=1)if(s=this.nodes[n],1===s.nodeType){if(e(s,t))return s;if(o=s.querySelector(t))return o}return null}if(this.items){for(r=this.items.length,n=0;r>n;n+=1)if(i=this.items[n],i.find&&(o=i.find(t)))return o;return null}}}(un),qn=function(e){return function(t,n){var r,i,s,o,u,a,f;if(this.nodes){for(i=this.nodes.length,r=0;i>r;r+=1)if(o=this.nodes[r],1===o.nodeType&&(e(o,t)&&n.push(o),u=o.querySelectorAll(t)))for(a=u.length,f=0;a>f;f+=1)n.push(u[f])}else if(this.items)for(i=this.items.length,r=0;i>r;r+=1)s=this.items[r],s.findAll&&s.findAll(t,n);return n
}}(un),Rn=function(e,t){var n,r,i;if(this.items)for(r=this.items.length,n=0;r>n;n+=1)i=this.items[n],i.findAllComponents&&i.findAllComponents(e,t);return t},Un=function(e){var t,n,r,i;if(this.items){for(t=this.items.length,n=0;t>n;n+=1)if(r=this.items[n],r.findComponent&&(i=r.findComponent(e)))return i;return null}},zn=function(e){var t=e.index;return this.items[t+1]?this.items[t+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},Wn=function(){return this.items&&this.items[0]?this.items[0].firstNode():this.nodes?this.nodes[0]||null:null},Xn=function(){var e=this;do if(e.pElement)return e.pElement.node;while(e=e.parent);return this.root.el},Vn=function(e,t){function n(e,t,r,i){return i=i||0,e.map(function(e){var s,o,u;return e.text?e.text:e.fragments?e.fragments.map(function(e){return n(e.items,t,r,i)}).join(""):(s=r+"-"+i++,u=(o=e.root.viewmodel.wrapped[e.keypath])?o.value:e.value,t[s]=u,"${"+s+"}")}).join("")}var r={};return function(i){var s,o,u,a,f,l,c,h,p;return i=i||r,s=i.args,o=s||i.parse,c=s?"argsList":"value",h=s?"dirtyArgs":"dirtyValue",(this[h]||!this.hasOwnProperty(c))&&(1===this.items.length&&this.items[0].type===e.INTERPOLATOR?(u=this.items[0].value,void 0!==u&&(p=s?[u]:u)):(o&&(a={},f=n(this.items,a,this.root._guid),l=t(s?"["+f+"]":f,a)),p=l?l.value:s?[this.toString()]:this.toString()),this[c]=p,this[h]=!1),this[c]}}(rt,qt),$n=function(){var e=/</g,t=/>/g;return function(n){return n.replace(e,"&lt;").replace(t,"&gt;")}}(),Jn=function(){},Kn=function(e){return e&&e.parentNode&&e.parentNode.removeChild(e),e},Qn=function(e){return function(){return e(this.node)}}(Kn),Gn=function(e,t,n,r){var i=function(t){this.type=e.TEXT,this.text=t.template};return i.prototype={detach:r,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},teardown:n,toString:function(e){return e?t(this.text):this.text},unrender:function(e){return e?this.detach():void 0}},i}(rt,$n,Jn,Qn),Yn=function(e){return function(){this.keypath?this.root.viewmodel.unregister(this):e.removeUnresolved(this)}}(D),Zn=function(e){var t=function(t,n,r,i){this.root=t,this.ref=n,this.parentFragment=r,this.resolve=i,e.addUnresolved(this)};return t.prototype={teardown:function(){e.removeUnresolved(this)}},t}(D),er=function(e,t,n){function r(e,t,r){var i,o,u;if(!s.test(e.toString()))return n(e,"_nowrap",{value:!0}),e;if(!e["_"+t._guid]){n(e,"_"+t._guid,{value:function(){var n,r,i,s;if(t.viewmodel.capture(),r=e.apply(t,arguments),n=t.viewmodel.release(),n.length)for(i=o.length;i--;)s=o[i],s.updateSoftDependencies(n);return r},writable:!0});for(i in e)e.hasOwnProperty(i)&&(e["_"+t._guid][i]=e[i]);e["_"+t._guid+"_evaluators"]=[]}return o=e["_"+t._guid+"_evaluators"],u=o.indexOf(r),-1===u&&o.push(r),e["_"+t._guid]}var i,s;return s=/this/,i=function(t,n,i,s,o){var u;this.evaluator=i,this.keypath=n,this.root=t,this.argNum=s,this.type=e.REFERENCE,this.priority=o,u=t.get(n),"function"!=typeof u||u._nowrap||(u=r(u,t,i)),this.value=i.values[s]=u,t.viewmodel.register(this)},i.prototype={setValue:function(e){"function"!=typeof e||e._nowrap||(e=r(e,this.root,this.evaluator)),t(e,this.value)||(this.evaluator.values[this.argNum]=e,this.evaluator.bubble(),this.value=e)},invalidate:function(){this.setValue(this.root.viewmodel.get(this.keypath))},teardown:function(){this.root.viewmodel.unregister(this)}},i}(rt,y,d),tr=function(e){var t=function(e,t,n){this.root=e,this.keypath=t,this.priority=n.priority,this.evaluator=n,e.viewmodel.register(this)};return t.prototype={setValue:function(t){e(t,this.value)||(this.evaluator.bubble(),this.value=t)},teardown:function(){this.root.viewmodel.unregister(this)}},t}(y),nr=function(e,t,n,r,i,s){function o(e,t){var n,r;if(e=e.replace(/\$\{([0-9]+)\}/g,"_$1"),a[e])return a[e];for(r=[];t--;)r[t]="_"+t;return n=new Function(r.join(","),"return("+e+")"),a[e]=n,n}var u,a={};return u=function(e,t,n,r,s,u){var a=this;a.root=e,a.uniqueString=n,a.keypath=t,a.priority=u,a.fn=o(r,s.length),a.values=[],a.refs=[],a.dependants=0,s.forEach(function(t,n){t&&(t.indexRef?a.values[n]=t.value:a.refs.push(new i(e,t.keypath,a,n,u)))})},u.prototype={wake:function(){this.awake=!0},sleep:function(){this.awake=!1,e.modelUpdate(this,!0)},bubble:function(){!this.dirty&&this.awake&&(this.dirty=!0,e.modelUpdate(this))},getValue:function(){var e;try{e=this.fn.apply(null,this.values)}catch(n){this.root.debug&&t('Error evaluating "'+this.uniqueString+'": '+n.message||n),e=void 0}return e},update:function(){var e=this.getValue();return n(e,this.value)||(this.value=e,this.root.viewmodel.clearCache(this.keypath),this.root.viewmodel.adapt(this.keypath,e,!0),r(this.root,this.keypath)),this},teardown:function(){for(;this.refs.length;)this.refs.pop().teardown();this.root.viewmodel.clearCache(this.keypath),this.root.viewmodel.evaluators[this.keypath]=null},invalidate:function(){this.refs.forEach(function(e){return e.invalidate()}),this.root.viewmodel.clearCache(this.keypath),this.value=this.getValue()},updateSoftDependencies:function(e){var t,n,r;for(this.softRefs||(this.softRefs=[]),t=this.softRefs.length;t--;)r=this.softRefs[t],e[r.keypath]||(this.softRefs.splice(t,1),this.softRefs[r.keypath]=!1,r.teardown());for(t=e.length;t--;)n=e[t],this.softRefs[n]||(r=new s(this.root,n,this),this.softRefs.push(r),this.softRefs[n]=!0)}},u}(D,H,y,M,er,tr),rr=function(e,t){return e.substr(0,t.length+1)===t+"."},ir=function(e){return function(t,n,r){return t===n?r:e(t,n)?t.replace(n+".",r+"."):void 0}}(rr),sr=function(e,t,n,r,i){function s(e,t){return e.replace(/\$\{([0-9]+)\}/g,function(e,n){return t[n]?t[n].value||t[n].keypath:"undefined"})}function o(e){return"${"+e.replace(/[\.\[\]]/g,"-")+"}"}var u=function(r,i,s,o){var u,a,f,l=this;return u=r.root,this.root=u,this.callback=o,this.owner=r,this.str=s.s,this.args=f=[],this.unresolved=[],this.pending=0,a=i.indexRefs,s.r&&s.r.length?(s.r.forEach(function(r,s){var o
,c,h;return a&&void 0!==(o=a[r])?void (f[s]={indexRef:r,value:o}):(c=t(u,r,i))?void (f[s]={keypath:c}):(f[s]=null,l.pending+=1,h=new n(u,r,i,function(t){l.resolve(s,t),e(l.unresolved,h)}),void l.unresolved.push(h))}),this.ready=!0,void this.bubble()):(this.resolved=this.ready=!0,void this.bubble())};return u.prototype={bubble:function(){this.ready&&(this.uniqueString=s(this.str,this.args),this.keypath=o(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},teardown:function(){for(var e;e=this.unresolved.pop();)e.teardown()},resolve:function(e,t){this.args[e]={keypath:t},this.bubble(),this.resolved=!--this.pending},createEvaluator:function(){var e=this.root.viewmodel.evaluators[this.keypath];e?e.invalidate():(e=new r(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority),this.root.viewmodel.evaluators[this.keypath]=e,e.update())},rebind:function(e,t,n,r){var s;this.args.forEach(function(o){var u;o&&(o.keypath&&(u=i(o.keypath,n,r))?(o.keypath=u,s=!0):o.indexRef&&o.indexRef===e&&(o.value=t,s=!0))}),s&&this.bubble()}},u}(T,L,Zn,nr,ir),or=function(e,t,n,r,i){var s=function(s,u,a){var f,l,c,h,p,d=this;return f=s.root,l=s.parentFragment,this.ref=u.r,this.root=s.root,this.mustache=s,this.priority=s.priority,this.callback=a,this.pending=0,this.unresolved=[],p=this.members=[],this.indexRefMembers=[],this.keypathObservers=[],this.expressionResolvers=[],u.m.forEach(function(u,a){var v,m,g,y,b,w;return"string"==typeof u?void (d.members[a]=u):u.t===e.REFERENCE?(v=u.n,m=l.indexRefs,m&&void 0!==(g=m[v])?(p[a]=g,void d.indexRefMembers.push({ref:v,index:a})):(h=!0,(c=n(f,v,l))?(y=new o(f,c,s.priority,d,a),void d.keypathObservers.push(y)):(p[a]=void 0,d.pending+=1,b=new r(f,v,l,function(e){d.resolve(a,e),t(d.unresolved,b)}),d.unresolved.push(b),null))):(h=!0,d.pending+=1,w=new i(d,l,u,function(e){d.resolve(a,e),t(d.unresolved,w)}),void d.unresolved.push(w))}),h?(this.ready=!0,void this.bubble()):(c=this.getKeypath(),void a(c))};s.prototype={getKeypath:function(){return this.ref+"."+this.members.join(".")},bubble:function(){this.ready&&!this.pending&&this.callback(this.getKeypath())},resolve:function(e,t){var n=new o(this.root,t,this.mustache.priority,this,e);this.keypathObservers.push(n),this.resolved=!--this.pending,this.bubble()},teardown:function(){for(var e;e=this.unresolved.pop();)e.teardown()},rebind:function(e,t){var n,r,i;for(r=this.indexRefMembers.length;r--;)i=this.indexRefMembers[r],i.ref===e&&(n=!0,this.members[i.index]=t);n&&this.bubble()}};var o=function(e,t,n,r,i){this.root=e,this.keypath=t,this.priority=n,this.resolver=r,this.index=i,e.viewmodel.register(this),this.setValue(e.viewmodel.get(t))};return o.prototype={setValue:function(e){var t=this.resolver;t.members[this.index]=e,t.bubble()},teardown:function(){this.root.viewmodel.unregister(this)}},s}(rt,T,L,Zn,sr),ur=function(e,t,n,r,i){return function(s,o){function u(e){s.resolve(e)}function a(e){var r=n(s.root,e,s.parentFragment);void 0!==r?u(r):(s.ref=e,t.addUnresolved(s))}var f,l,c,h,p;h=o.parentFragment,p=o.template,s.root=h.root,s.parentFragment=h,s.pElement=h.pElement,s.template=o.template,s.index=o.index||0,s.priority=h.priority,s.type=o.template.t,(f=p.r)&&(l=h.indexRefs,l&&void 0!==(c=l[f])?(s.indexRef=f,s.setValue(c)):a(f)),o.template.x&&(s.resolver=new i(s,h,o.template.x,u)),o.template.rx&&(s.resolver=new r(s,o.template.rx,a)),s.template.n!==e.SECTION_UNLESS||s.hasOwnProperty("value")||s.setValue(void 0)}}(rt,D,L,or,sr),ar=function(e){var t;e!==this.keypath&&(this.registered&&(this.root.viewmodel.unregister(this),t=this.parentFragment&&this.parentFragment.owner&&this.parentFragment.owner.element?this.parentFragment.owner.element:this,t.rebind(null,null,this.keypath,e),e===this.keypath)||(this.keypath=e,this.root.viewmodel.register(this),this.setValue(this.root.viewmodel.get(e))))},fr=function(e){return function(t,n,r,i){var s;this.fragments&&this.fragments.forEach(function(e){return e.rebind(t,n,r,i)}),this.resolver&&this.resolver.rebind(t,n,r,i),this.keypath?(s=e(this.keypath,r,i),s&&this.resolve(s)):void 0!==t&&this.indexRef===t&&this.setValue(n)}}(ir),lr=function(e,t,n){return{init:e,resolve:t,rebind:n}}(ur,ar,fr),cr=function(e,t,n,r,i,s,o){var u=function(t){this.type=e.INTERPOLATOR,s.init(this,t)};return u.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:s.resolve,rebind:s.rebind,detach:o,teardown:i,render:function(){return this.node||(this.node=document.createTextNode(void 0!=this.value?this.value:"")),this.node},unrender:function(e){e&&r(this.node)},setValue:function(e){var n;(n=this.root.viewmodel.wrapped[this.keypath])&&(e=n.get()),e!==this.value&&(this.value=e,this.parentFragment.bubble(),this.node&&t.viewUpdate(this))},firstNode:function(){return this.node},toString:function(e){var t=void 0!=this.value?""+this.value:"";return e?n(t):t}},u}(rt,D,$n,Kn,Yn,lr,Qn),hr=function(){this.parentFragment.bubble()},pr=function(){var e;return 1===this.fragments.length?this.fragments[0].detach():(e=document.createDocumentFragment(),this.fragments.forEach(function(t){e.appendChild(t.detach())}),e)},dr=function(e){var t,n,r;for(n=this.fragments.length,t=0;n>t;t+=1)if(r=this.fragments[t].find(e))return r;return null},vr=function(e,t){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAll(e,t)},mr=function(e,t){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAllComponents(e,t)},gr=function(e){var t,n,r;for(n=this.fragments.length,t=0;n>t;t+=1)if(r=this.fragments[t].findComponent(e))return r;return null},yr=function(e){return this.fragments[e.index+1]?this.fragments[e.index+1].firstNode():this.parentFragment.findNextNode(this)},br=function(){return this.fragments[0]?this.fragments[0].firstNode():this.parentFragment.findNextNode(this)},wr=function(e){var t;return e.push(function(){t=e.Fragment}),function(e){var n,r,i,s,o,u,a,f,l=this;if(n=this.parentFragment,o=[],e.forEach(function(e,t){var n,i,s,u;return e===t?void (
o[e]=l.fragments[t]):(n=l.fragments[t],void 0===r&&(r=t),-1===e?(n.unrender(!0),void n.teardown()):(i=e-t,s=l.keypath+"."+t,u=l.keypath+"."+e,n.rebind(l.template.i,e,s,u),void (o[e]=n)))}),void 0===r&&(r=this.length),this.length=this.fragments.length=s=this.root.get(this.keypath).length,s!==r){for(u={template:this.template.f,root:this.root,owner:this},this.template.i&&(u.indexRef=this.template.i),i=r;s>i;i+=1)(a=o[i])?this.docFrag.appendChild(a.detach(!1)):(u.context=this.keypath+"."+i,u.index=i,a=new t(u),this.docFrag.appendChild(a.render())),this.fragments[i]=a;f=n.findNextNode(this),this.parentFragment.getNode().insertBefore(this.docFrag,f)}}}(i),Er=function(){var e;return e=this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,e},Sr=function(e,t,n,r,i){function s(r,i){var s={template:r.template.f,root:r.root,pElement:r.parentFragment.pElement,owner:r};if(r.template.n)switch(r.template.n){case e.SECTION_IF:return f(r,i,!1,s);case e.SECTION_UNLESS:return f(r,i,!0,s);case e.SECTION_WITH:return a(r,s);case e.SECTION_EACH:if(n(i))return u(r,i,s)}return t(i)?o(r,i,s):n(i)||"function"==typeof i?r.template.i?u(r,i,s):a(r,s):f(r,i,!1,s)}function o(e,t,n){var r,i,s,o;if(i=t.length,i===e.length)return!1;if(i<e.length)o=e.fragments.splice(i,e.length-i),o.forEach(l);else if(i>e.length)for(r=e.length;i>r;r+=1)n.context=e.keypath+"."+r,n.index=r,e.template.i&&(n.indexRef=e.template.i),s=new c(n),e.unrenderedFragments.push(e.fragments[r]=s);return e.length=i,!0}function u(e,t,n){var r,i,s,o,u;for(s=e.hasKey||(e.hasKey={}),i=e.fragments.length;i--;)o=e.fragments[i],o.index in t||(u=!0,l(e.fragments[i]),e.fragments.splice(i,1),s[o.index]=!1);for(r in t)s[r]||(u=!0,n.context=e.keypath+"."+r,n.index=r,e.template.i&&(n.indexRef=e.template.i),o=new c(n),e.unrenderedFragments.push(o),e.fragments.push(o),s[r]=!0);return e.length=e.fragments.length,u}function a(e,t){var n;return e.length?void 0:(t.context=e.keypath,t.index=0,n=new c(t),e.unrenderedFragments.push(e.fragments[0]=n),e.length=1,!0)}function f(e,n,r,i){var s,o,u;if(o=t(n)&&0===n.length,s=r?o||!n:n&&!o){if(!e.length)return i.index=0,u=new c(i),e.unrenderedFragments.push(e.fragments[0]=u),e.length=1,!0;if(e.length>1)return e.fragments.splice(1).forEach(l),!0}else if(e.length)return e.fragments.splice(0).forEach(l),e.length=0,!0}function l(e){e.rendered&&e.unrender(!0),e.teardown()}var c;return i.push(function(){c=i.Fragment}),function(e){var t;(t=this.root.viewmodel.wrapped[this.keypath])&&(e=t.get()),s(this,e)&&(this.bubble(),this.rendered&&r.viewUpdate(this)),this.value=e}}(rt,o,u,D,i),xr=function(e,t){function n(e){e.unrender(!0),e.teardown()}function r(t,n,r){var i,o,u;for(i={template:t.template.f,root:t.root,pElement:t.pElement,owner:t,indexRef:t.template.i},u=n;r>u;u+=1)i.context=t.keypath+"."+u,i.index=u,o=new s(i),t.unrenderedFragments.push(t.fragments[u]=o);t.insertionPoint=t.fragments[r]?t.fragments[r].firstNode():t.parentFragment.findNextNode(t),e.viewUpdate(t)}function i(e,t,n,r){var i,s,o,u,a;for(o=e.template.i,i=t;n>i;i+=1)s=e.fragments[i],u=e.keypath+"."+(i-r),a=e.keypath+"."+i,s.index=i,s.rebind(o,i,u,a)}var s;return t.push(function(){s=t.Fragment}),function(e){var t,s,o,u,a,f=this;if(t=e.balance){if(s=e.rangeStart,f.length+=t,0>t)return f.fragments.splice(s,-t).forEach(n),void i(f,s,f.length,t);o=s+e.removed,u=s+e.added,a=[o,0],a.length+=t,f.fragments.splice.apply(f.fragments,a),i(f,u,f.length,t),r(f,o,u)}}}(D,i),Tr=function(e){return function(){this.fragments.splice(0).forEach(function(e){return e.teardown()}),e.call(this)}}(Yn),Nr=function(e){var t,n,r;for(t="",n=0,r=this.length,n=0;r>n;n+=1)t+=this.fragments[n].toString(e);return t},Cr=function(e){this.fragments.forEach(function(t){return t.unrender(e)})},kr=function(){var e,t,n;if(this.unrenderedFragments.length){for(;e=this.unrenderedFragments.shift();)this.docFrag.appendChild(e.render());this.rendered&&(t=this.insertionPoint||this.parentFragment.findNextNode(this),n=this.parentFragment.getNode(),n.insertBefore(this.docFrag,t),this.insertionPoint=null)}},Lr=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=function(n){this.type=e.SECTION,this.inverted=!!n.template.n,this.pElement=n.pElement,this.fragments=[],this.unrenderedFragments=[],this.length=0,t.init(this,n)};return y.prototype={bubble:n,detach:r,find:i,findAll:s,findAllComponents:o,findComponent:u,findNextNode:a,firstNode:f,merge:l,rebind:t.rebind,render:c,resolve:t.resolve,setValue:h,splice:p,teardown:d,toString:v,unrender:m,update:g},y}(rt,lr,hr,pr,dr,vr,mr,gr,yr,br,wr,Er,Sr,xr,Tr,Nr,Cr,kr),Ar=function(){var e,t;if(this.docFrag){for(e=this.nodes.length,t=0;e>t;t+=1)this.docFrag.appendChild(this.nodes[t]);return this.docFrag}},Or=function(e){return function(t){var n,r,i,s;for(r=this.nodes.length,n=0;r>n;n+=1)if(i=this.nodes[n],1===i.nodeType){if(e(i,t))return i;if(s=i.querySelector(t))return s}return null}}(un),Mr=function(e){return function(t,n){var r,i,s,o,u,a;for(i=this.nodes.length,r=0;i>r;r+=1)if(s=this.nodes[r],1===s.nodeType&&(e(s,t)&&n.push(s),o=s.querySelectorAll(t)))for(u=o.length,a=0;u>a;a+=1)n.push(o[a])}}(un),_r=function(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},Dr=function(e,t){function n(e){return s[e]||(s[e]=t(e))}var r,i,s={};try{t("table").innerHTML="foo"}catch(o){r=!0,i={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}return function(t,s,o){var u,a,f=[];if(t)for(r&&(a=i[s.tagName])?(u=n("DIV"),u.innerHTML=a[0]+t+a[1],u=u.querySelector(".x")):s.namespaceURI===e.svg?(u=n("DIV"),u.innerHTML='<svg class="x">'+t+"</svg>",u=u.querySelector(".x")):(u=n(s.tagName),u.innerHTML=t);u.firstChild;)f.push(u.firstChild),o.appendChild(u.firstChild);return f}}(c,h),Pr=function(){var e="option[selected]";return function(t){var n,r,i;t&&"select"===t.name&&t.binding&&
(t.getAttribute("multiple")?(n=t.findAll(e),i=n.map(function(e){return e.value})):(r=t.find(e))&&(i=r.value),void 0!==i&&t.binding.setValue(i),t.bubble())}}(),Hr=function(e,t){return function(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=e(this.value,this.parentFragment.getNode(),this.docFrag),t(this.pElement),this.rendered=!0,this.docFrag}}(Dr,Pr),Br=function(e){return function(t){var n;(n=this.root.viewmodel.wrapped[this.keypath])&&(t=n.get()),t!==this.value&&(this.value=t,this.parentFragment.bubble(),this.rendered&&e.viewUpdate(this))}}(D),jr=function(){return void 0!=this.value?this.value:""},Fr=function(e){return function(t){this.rendered&&t&&(this.nodes.forEach(e),this.rendered=!1)}}(Kn),Ir=function(e,t){return function(){var n,r;if(this.rendered){for(;this.nodes&&this.nodes.length;)n=this.nodes.pop(),n.parentNode.removeChild(n);r=this.parentFragment.getNode(),this.nodes=e(this.value,r,this.docFrag),r.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),t(this.pElement)}}}(Dr,Pr),qr=function(e,t,n,r,i,s,o,u,a,f,l,c){var h=function(n){this.type=e.TRIPLE,t.init(this,n)};return h.prototype={detach:n,find:r,findAll:i,firstNode:s,rebind:t.rebind,render:o,resolve:t.resolve,setValue:u,teardown:c,toString:a,unrender:f,update:l},h}(rt,lr,Ar,Or,Mr,_r,Hr,Br,jr,Fr,Ir,Yn),Rr=function(){this.parentFragment.bubble()},Ur=function(e,t){return function(){var n;if(this.node)return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node;if(this.cssDetachQueue.length){for(e.start();n===this.cssDetachQueue.pop();)t.remove(n);e.end()}}}(D,N),zr=function(e){return function(t){return e(this.node,t)?this.node:this.fragment&&this.fragment.find?this.fragment.find(t):void 0}}(un),Wr=function(e,t){t._test(this,!0)&&t.live&&(this.liveQueries||(this.liveQueries=[])).push(t),this.fragment&&this.fragment.findAll(e,t)},Xr=function(e,t){this.fragment&&this.fragment.findAllComponents(e,t)},Vr=function(e){return this.fragment?this.fragment.findComponent(e):void 0},$r=function(){return null},Jr=function(){return this.node},Kr=function(e){return this.attributes&&this.attributes[e]?this.attributes[e].value:void 0},Qr=function(){var e,t,n,r;return e="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),t="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),n=function(e){for(var t={},n=e.length;n--;)t[e[n].toLowerCase()]=e[n];return t},r=n(e.concat(t)),function(e){var t=e.toLowerCase();return r[t]||t}}(),Gr=function(e){var t={svg:e.svg,foreignObject:e.html};return function(n,r){return n.a&&n.a.xmlns?n.a.xmlns:t[n.e]||r&&r.namespace||e.html}}(c),Yr=function(e){return function(){var t=this.fragment.getValue();t!==this.value&&(this.value=t,"value"===this.name&&this.node&&(this.node._ractive.value=t),this.rendered&&e.viewUpdate(this))}}(D),Zr=function(e,t){return function(n,r){var i,s;if(i=r.indexOf(":"),-1===i||(s=r.substr(0,i),"xmlns"===s))n.name=n.element.namespace!==e.html?t(r):r;else if(r=r.substring(i+1),n.name=t(r),n.namespace=e[s.toLowerCase()],!n.namespace)throw'Unknown namespace ("'+s+'")'}}(c,Qr),ei=function(e){return function(t){var n,r;return n=t.fragment.items,1===n.length&&(r=n[0],r.type===e.INTERPOLATOR&&(r.keypath||r.ref))?r:void 0}}(rt),ti=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(n,r){var i;!n.pNode||n.namespace||r.pNode.namespaceURI&&r.pNode.namespaceURI!==e.html||(i=t[n.name]||n.name,void 0!==r.pNode[i]&&(n.propertyName=i),("boolean"==typeof r.pNode[i]||"value"===i)&&(n.useProperty=!0))}}(c),ni=function(e,t,n,r,i){var s;return i.push(function(){s=i.Fragment}),function(i){return this.type=e.ATTRIBUTE,this.element=i.element,this.root=i.root,t(this,i.name),i.value&&"string"!=typeof i.value?(this.parentFragment=this.element.parentFragment,this.fragment=new s({template:i.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=n(this),this.isBindable=!!this.interpolator,r(this,i),void (this.ready=!0)):void (this.value=i.value||!0)}}(rt,Zr,ei,ti,i),ri=function(e,t,n,r){this.fragment&&(this.fragment.rebind(e,t,n,r),this.twoway&&this.updateBindings())},ii=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv"
,ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(n){var r;this.node=n,n.namespaceURI&&n.namespaceURI!==e.html||(r=t[this.name]||this.name,void 0!==n[r]&&(this.propertyName=r),("boolean"==typeof n[r]||"value"===r)&&(this.useProperty=!0),"value"===r&&(this.useProperty=!0,n._ractive.value=this.value)),this.rendered=!0,this.update()}}(c),si=function(){var e;if(this.boundEvents)for(e=this.boundEvents.length;e--;)this.node.removeEventListener(this.boundEvents[e],this.updateModel,!1);this.fragment&&this.fragment.teardown()},oi=function(){function e(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var t=/allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|draggable|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|spellcheck|translate|trueSpeed|typeMustMatch|visible/;return function(){var n,r;if(null===this.value)return this.name;if("value"!==this.name||"select"!==this.element.name)return"name"===this.name&&"input"===this.element.name&&(r=this.interpolator)?"name={{"+(r.keypath||r.ref)+"}}":t.test(this.name)?this.fragment?this.fragment.getValue()?this.name:null:this.value?this.name:null:(n=e(this.fragment?this.fragment.toString():this.value),this.name+(n?'="'+n+'"':""))}}(),ui=function(){var e,t,n,r,i=this.value;if(!this.locked)for(this.node._ractive.value=i,e=this.node.options,r=e.length;r--;)if(t=e[r],n=t._ractive?t._ractive.value:t.value,n==i){t.selected=!0;break}},ai=function(e){return function(){var t,n,r,i,s=this.value;for(e(s)||(s=[s]),t=this.node.options,n=t.length;n--;)r=t[n],i=r._ractive?r._ractive.value:r.value,r.selected=-1!==s.indexOf(i)}}(o),fi=function(){var e,t;e=this.node,t=this.value,e.checked=t==e._ractive.value},li=function(e){return function(){var t,n;t=this.node,n=this.value,t.checked=e(n)?-1!==n.indexOf(t._ractive.value):n==t._ractive.value}}(o),ci=function(){var e,t;e=this.node,t=this.value,void 0===t&&(t=""),e.className=t},hi=function(){var e,t;e=this.node,t=this.value,void 0!==t&&(this.root.nodes[t]=void 0),this.root.nodes[t]=e,e.id=t},pi=function(){var e,t;e=this.node,t=this.value,void 0===t&&(t=""),e.style.setAttribute("cssText",t)},di=function(){var e,t;e=this.node,t=this.value,void 0===t&&(t=""),this.locked||(e.innerHTML=t)},vi=function(){var e,t;e=this.node,t=this.value,e._ractive.value=t,this.locked||(e.value=void 0==t?"":t)},mi=function(){this.locked||(this.node[this.propertyName]=this.value)},gi=function(){var e,t;e=this.node,t=this.value,this.namespace?e.setAttributeNS(this.namespace,this.name,t):e.setAttribute(this.name,t)},yi=function(e,t,n,r,i,s,o,u,a,f,l,c,h){return function(){var p,d,v;p=this.name,d=this.element,v=this.node,"id"===p?this.update=u:"select"===d.name&&"value"===p?this.update=v.multiple?r:n:"input"===d.name&&"file"===v.type&&"value"===p?this.update=t:this.twoway&&"name"===p?"radio"===v.type?this.update=i:"checkbox"===v.type&&(this.update=s):this.update="style"===p&&v.style.setAttribute?a:"class"!==p||v.namespaceURI&&v.namespaceURI!==e.html?v.getAttribute("contenteditable")&&"value"===this.name?f:"value"===p?l:this.useProperty?c:h:o,this.update()}}(c,Jn,ui,ai,fi,li,ci,hi,pi,di,vi,mi,gi),bi=function(){this.keypath=this.interpolator.keypath||this.interpolator.ref,"name"===this.propertyName&&(this.node.name="{{"+this.keypath+"}}")},wi=function(e,t,n,r,i,s,o,u){var a=function(e){this.init(e)};return a.prototype={bubble:e,init:t,rebind:n,render:r,teardown:i,toString:s,update:o,updateBindings:u},a}(Yr,ni,ri,ii,si,oi,yi,bi),Ei=function(e){return function(t,n){var r,i,s=[];for(r in n)n.hasOwnProperty(r)&&(i=new e({element:t,name:r,value:n[r],root:t.root}),s.push(s[r]=i));return s}}(wi),Si=function(e,t,n,r){var i=function(e){var n;return this.element=e,this.root=e.root,this.attribute=e.attributes[this.name||"value"],n=this.attribute.interpolator,n.keypath&&"${"===n.keypath.substr?(t("Two-way binding does not work with expressions: "+n.keypath),!1):(n.keypath||n.resolve(n.ref),this.keypath=this.attribute.interpolator.keypath,void (void 0===this.root.viewmodel.get(this.keypath)&&this.getInitialValue&&this.root.viewmodel.set(this.keypath,this.getInitialValue())))};return i.prototype={handleChange:function(){e.lockAttribute(this.attribute),e.start(this.root),this.root.viewmodel.set(this.keypath,this.getValue()),e.end()},rebind:function(e,t,n,r){var i;this.keypath.substr(0,n.length)===n&&(i=this.root._twowayBindings[this.keypath],i.splice(i.indexOf(this),1),this.keypath=this.keypath.replace(n,r),i=this.root._twowayBindings[this.keypath]||(this.root._twowayBindings[this.keypath]=[]),i.push(this))}},i.extend=function(e){var t,s=this;return t=function(e){i.call(this,e),this.init&&this.init()},t.prototype=n(s.prototype),r(t.prototype,e),t.extend=i.extend,t},i}(D,H,U,j),xi=function(){this._ractive.binding.handleChange()},Ti=function(e,t){var n=e.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var e=this.element.node;e.addEventListener("change",t,!1),this.root.lazy||(e.addEventListener("input",t,!1),e.attachEvent&&e.addEventListener("keyup",t,!1))},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("input",t,!1),e.removeEventListener("keyup",t,!1)},getValue:function(){return this.element.node.innerHTML}});return n}(Si,xi),Ni=function(e,t,n){var r=t.extend({name:"name",init:function(){this.radioName=!0},render:function(){var t,r=this,i=this.element.node;i.name="{{"+this.keypath+"}}",i.addEventListener("change",n,!1),i.attachEvent&&i.addEventListener("click",n,!1),t=this.root.viewmodel.get(this.keypath),void 0!==t?i.checked=t==i._ractive.value:e.afterModelUpdate
(function(){return r.handleChange()})},unrender:function(){var e=this.element.node;e.removeEventListener("change",n,!1),e.removeEventListener("click",n,!1)},getValue:function(){var e=this.element.node;return e._ractive?e._ractive.value:e.value},handleChange:function(){var e=this.element.node;e.checked&&t.prototype.handleChange.call(this)},rebind:function(e,n,r,i){t.prototype.rebind.call(this,e,n,r,i),this.element.node.name="{{"+this.keypath+"}}"}});return r}(D,Si,xi),Ci=function(e,t,n,r){var i=n.extend({name:"name",init:function(){this.checkboxName=!0,this.isChecked=this.element.getAttribute("checked"),this.siblings=this.root._checkboxNameBindings[this.keypath]||(this.root._checkboxNameBindings[this.keypath]=[]),this.siblings.push(this)},teardown:function(){t(this.siblings,this)},render:function(){var t,n,i=this.element.node;this.element.node.name="{{"+this.keypath+"}}",i.addEventListener("change",r,!1),i.attachEvent&&i.addEventListener("click",r,!1),t=this.root.viewmodel.get(this.keypath),void 0!==t?(n=-1!==t.indexOf(i._ractive.value),i.checked=n):e.addCheckboxBinding(this)},unrender:function(){var e=this.element.node;e.removeEventListener("change",r,!1),e.removeEventListener("click",r,!1)},changed:function(){return this.element.node.checked!==!!this.checked},handleChange:function(){var t=[];this.isChecked=this.element.node.checked,this.siblings.forEach(function(e){e.isChecked&&t.push(e.element.getAttribute("value"))}),e.start(this.root),this.root.viewmodel.set(this.keypath,t),e.end()},getValue:function(){throw new Error("This code should not execute!")}});return i}(D,T,Si,xi),ki=function(e,t){var n=e.extend({name:"checked",render:function(){var e=this.element.node;e.addEventListener("change",t,!1),e.attachEvent&&e.addEventListener("click",t,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("click",t,!1)},getValue:function(){return this.element.node.checked}});return n}(Si,xi),Li=function(e,t,n){var r=t.extend({getInitialValue:function(){var e,t,n=this.element.options;if(t=e=n.length,e){for(;t--;)if(n[t].getAttribute("selected"))return n[t].getAttribute("value");for(;t++<e;)if(!n[t].getAttribute("disabled"))return n[t].getAttribute("value")}},render:function(){this.element.node.addEventListener("change",n,!1)},unrender:function(){this.element.node.removeEventListener("change",n,!1)},setValue:function(e){this.root.viewmodel.set(this.keypath,e)},getValue:function(){var e,t,n,r,i;for(e=this.element.node.options,n=e.length,t=0;n>t;t+=1)if(r=e[t],e[t].selected)return i=r._ractive?r._ractive.value:r.value},dirty:function(){var t=this;this._dirty||(this._dirty=!0,void 0===this.attribute.value&&e.afterModelUpdate(function(){t.root.viewmodel.set(t.keypath,t.getInitialValue())}))}});return r}(D,Si,xi),Ai=function(e){return function(t,n){var r;if(!e(t)||!e(n))return!1;if(t.length!==n.length)return!1;for(r=t.length;r--;)if(t[r]!==n[r])return!1;return!0}}(o),Oi=function(e,t,n){var r=t.extend({getInitialValue:function(){return this.element.options.filter(function(e){return e.getAttribute("selected")}).map(function(e){return e.getAttribute("value")})},render:function(){var e;this.element.node.addEventListener("change",n,!1),e=this.root.viewmodel.get(this.keypath),void 0===e&&this.handleChange()},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var e,t,n,r,i,s;for(e=[],t=this.element.node.options,r=t.length,n=0;r>n;n+=1)i=t[n],i.selected&&(s=i._ractive?i._ractive.value:i.value,e.push(s));return e},handleChange:function(){var n,r,i;return n=this.attribute,r=n.value,i=this.getValue(),void 0!==r&&e(i,r)||t.prototype.handleChange.call(this),this},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}});return r}(Ai,Li,xi),Mi=function(e,t){var n=e.extend({render:function(){this.element.node.addEventListener("change",t,!1)},unrender:function(){this.element.node.removeEventListener("change",t,!1)},getValue:function(){return this.element.node.files}});return n}(Si,xi),_i=function(e,t){function n(){var e;t.call(this),e=this._ractive.root.viewmodel.get(this._ractive.binding.keypath,i),this.value=void 0==e?"":e}var r,i;return i={evaluateWrapped:!0},r=e.extend({getInitialValue:function(){return""},render:function(){var e=this.element.node;e.addEventListener("change",t,!1),this.root.lazy||(e.addEventListener("input",t,!1),e.attachEvent&&e.addEventListener("keyup",t,!1)),e.addEventListener("blur",n,!1)},getValue:function(){var e=this.element.node.value;return e},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("input",t,!1),e.removeEventListener("keyup",t,!1),e.removeEventListener("blur",n,!1)}})}(Si,xi),Di=function(e){return e.extend({getInitialValue:function(){return void 0},getValue:function(){var e=parseFloat(this.element.node.value);return isNaN(e)?void 0:e}})}(_i),Pi=function(e,t,n,r,i,s,o,u,a){function f(e){return e&&e.isBindable}return function(l){var c,h,p=l.attributes;return l.binding&&(l.binding.teardown(),l.binding=null),l.getAttribute("contenteditable")&&f(p.value)?h=e:"input"===l.name?(c=l.getAttribute("type"),"radio"===c||"checkbox"===c?(f(p.name)&&(h="radio"===c?t:n),f(p.checked)&&(h=r)):"file"===c&&f(p.value)?h=o:f(p.value)&&(h="number"===c||"range"===c?u:a)):"select"===l.name&&f(p.value)?h=l.getAttribute("multiple")?s:i:"textarea"===l.name&&f(p.value)&&(h=a),h?new h(l):void 0}}(Ti,Ni,Ci,ki,Li,Oi,Mi,Di,_i),Hi=function(e){this.root.fire(this.action.toString().trim(),e)},Bi=function(e){function t(e){this.root.fire.apply(this.root,[this.action.toString().trim(),e].concat(this.params))}function n(e){var t=this.dynamicParams.getValue(i);"string"==typeof t&&(t=t.substr(1,t.length-2)),this.root.fire.apply(this.root,[this.action.toString().trim(),e].concat(t))}var r,i={args:!0};return e.push(function(){r=e.Fragment}),function(e,i,s){var o;this.element=e,this.root=e.root,this.name=
i,this.proxies=[],o=s.n||s,"string"!=typeof o&&(o=new r({template:o,root:this.root,owner:this.element})),this.action=o,s.d?(this.dynamicParams=new r({template:s.d,root:this.root,owner:this.element}),this.fire=n):s.a&&(this.params=s.a,this.fire=t)}}(i),ji=function(e,t,n,r){"string"!=typeof this.action&&this.action.rebind(e,t,n,r),this.dynamicParams&&this.dynamicParams.rebind(e,t,n,r)},Fi=function(e,t){function n(e){var t,n;t=this._ractive,n=t.events[e.type],n.fire({node:this,original:e,index:t.index,keypath:t.keypath,context:t.root.get(t.keypath)})}function r(e){return s[e]||(s[e]=function(t){var n=t.node._ractive;t.index=n.index,t.keypath=n.keypath,t.context=n.root.get(n.keypath),n.events[e].fire(t)}),s[e]}var i={},s={};return function(){var s,o=this.name;this.node=this.element.node,(s=t.registries.events.find(this.root,o))?this.custom=s(this.node,r(o)):("on"+o in this.node||window&&"on"+o in window||i[o]||(e('Missing "'+this.name+'" event. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#events'),i[o]=!0),this.node.addEventListener(o,n,!1)),this.node._ractive.events[o]=this}}(H,en),Ii=function(){"string"!=typeof this.action&&this.action.teardown(),this.dynamicParams&&this.dynamicParams.teardown()},qi=function(){},Ri=function(e,t,n,r,i,s){var o=function(e,t,n){this.init(e,t,n)};return o.prototype={fire:e,init:t,rebind:n,render:r,teardown:i,unrender:s},o}(Hi,Bi,ji,Fi,Ii,qi),Ui=function(e){return function(t,n){var r,i,s,o,u=[];for(i in n)if(n.hasOwnProperty(i))for(s=i.split("-"),r=s.length;r--;)o=new e(t,s[r],n[i]),u.push(o);return u}}(Ri),zi=function(e,t,n){var r,i,s;return t.push(function(){r=t.Fragment}),i={args:!0},s=function(t,s){var o,u,a,f,l=this;if(l.element=t,l.root=o=t.root,u=s.n||s,"string"!=typeof u&&(a=new r({template:u,root:o,owner:t}),u=a.toString(),a.teardown()),s.a?l.params=s.a:s.d&&(l.fragment=new r({template:s.d,root:o,owner:t}),l.params=l.fragment.getValue(i),l.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,l.params=this.getValue(i),l.ready&&l.update()}),l.fn=n.registries.decorators.find(o,u),!l.fn){if(f='Missing "'+u+'" decorator. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#decorators',o.debug)throw new Error(f);e(f)}},s.prototype={init:function(){var e,t,n,r=this;if(e=r.element.node,r.params?(n=[e].concat(r.params),t=r.fn.apply(r.root,n)):t=r.fn.call(r.root,e),!t||!t.teardown)throw new Error("Decorator definition must return an object with a teardown method");r.actual=t,r.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},teardown:function(e){this.actual.teardown(),!e&&this.fragment&&this.fragment.teardown()}},s}(H,i,en),Wi=function(e,t,n){var r,i={};return n.push(function(){r=n.Fragment}),function(n,s){var o,u,a,f,l=this;if(l.element=n,l.root=o=n.root,u=s.n||s,"string"!=typeof u&&(a=new r({template:u,root:o,owner:n}),u=a.toString(),a.teardown()),l.name=u,s.a?l.params=s.a:s.d&&(a=new r({template:s.d,root:o,owner:n}),l.params=a.getValue(i),a.teardown()),l._fn=t.registries.transitions.find(o,u),!l._fn){if(f='Missing "'+u+'" transition. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#transitions',o.debug)throw new Error(f);return void e(f)}}}(H,en,i),Xi=function(e,t,n){var r,i,s;return e?(i={},s=n("div").style,r=function(e){var n,r,o;if(!i[e])if(void 0!==s[e])i[e]=e;else for(o=e.charAt(0).toUpperCase()+e.substring(1),n=t.length;n--;)if(r=t[n],void 0!==s[r+o]){i[e]=r+o;break}return i[e]}):r=null,r}(p,E,h),Vi=function(e,t,n,r){var i,s;return t?(s=window.getComputedStyle||e.getComputedStyle,i=function(e){var t,i,s,o,u;if(t=window.getComputedStyle(this.node),"string"==typeof e)return u=t[r(e)],"0px"===u&&(u=0),u;if(!n(e))throw new Error("Transition#getStyle must be passed a string, or an array of strings representing CSS properties");for(i={},s=e.length;s--;)o=e[s],u=t[r(o)],"0px"===u&&(u=0),i[o]=u;return i}):i=null,i}(K,p,o,Xi),$i=function(e){return function(t,n){var r;if("string"==typeof t)this.node.style[e(t)]=n;else for(r in t)t.hasOwnProperty(r)&&(this.node.style[e(r)]=t[r]);return this}}(Xi),Ji=function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})},Ki=function(e,t,n){function r(e){return e}var i=function(i){var s;this.duration=i.duration,this.step=i.step,this.complete=i.complete,"string"==typeof i.easing?(s=i.root.easing[i.easing],s||(e('Missing easing function ("'+i.easing+'"). You may need to download a plugin from [TODO]'),s=r)):s="function"==typeof i.easing?i.easing:r,this.easing=s,this.start=t(),this.end=this.start+this.duration,this.running=!0,n.add(this)};return i.prototype={tick:function(e){var t,n;return this.running?e>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(t=e-this.start,n=this.easing(t/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}},i}(H,x,P),Qi=function(e){var t=new RegExp("^-(?:"+e.join("|")+")-");return function(e){return e.replace(t,"")}}(E),Gi=function(e){var t=new RegExp("^(?:"+e.join("|")+")([A-Z])");return function(e){var n;return e?(t.test(e)&&(e="-"+e),n=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})):""}}(E),Yi=function(e,t,n,r,i,s,o,u,a){var f,l,c,h,p,d,v,m,g={},y={};return e?(l=n("div").style,function(){void 0!==l.transition?(c="transition",h="transitionend",p=!0):void 0!==l.webkitTransition?(c="webkitTransition",h="webkitTransitionEnd",p=!0):p=!1}(),c&&(d=c+"Duration",v=c+"Property",m=c+"TimingFunction"),f=function(e,n,f,l,c,p){setTimeout(function(){var b,w,E,S;S=function(){w&&E&&p()},b=e.node.namespaceURI+e.node.tagName,e.node.style[v]=l.map(o).map(a).join(","),e.node.style[m]=a(f.easing||"linear"),e.node.style[d]=f.duration/1e3+"s",c=function(t){var n;n=l.indexOf(r(u(t.propertyName))),-1!==n&&l.splice(n,1),l.length||(e.root.fire(e.name+":end"),e.node.removeEventListener(h,c,!1),E=!0,S())},e.node.addEventListener(h,c,!1),setTimeout
(function(){for(var u,a,p,d,v=l.length,m=[];v--;)d=l[v],u=b+d,g[u]?e.node.style[o(d)]=n[d]:a=e.getStyle(d),void 0===g[u]&&(e.node.style[o(d)]=n[d],g[u]=e.getStyle(d)!=n[d],y[u]=!g[u]),y[u]&&(p=l.indexOf(d),-1===p?t("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):l.splice(p,1),e.node.style[o(d)]=a,m.push({name:o(d),interpolator:i(a,n[d])}));m.length?new s({root:e.root,duration:f.duration,easing:r(f.easing),step:function(t){var n,r;for(r=m.length;r--;)n=m[r],e.node.style[n.name]=n.interpolator(t)},complete:function(){w=!0,S()}}):w=!0,l.length||(e.node.removeEventListener(h,c,!1),E=!0,S())},0)},f.delay||0)}):f=null,f}(p,H,h,Ji,tn,Ki,Xi,Qi,Gi),Zi=function(e,t,n,r,i,s){var o,u;return t?(u=window.getComputedStyle||e.getComputedStyle,o=function(e,t,o,u){var a,f=this;"string"==typeof e?(a={},a[e]=t):(a=e,u=o,o=t),o||(n('The "'+f.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),o=f,u=f.complete);var l=new r(function(e){var t,n,r,u,l,c,h,p;if(!o.duration)return f.setStyle(a),void e();for(t=Object.keys(a),n=[],r=window.getComputedStyle(f.node),l={},h=t.length;h--;)p=t[h],u=r[i(p)],"0px"===u&&(u=0),u!=a[p]&&(n.push(p),f.node.style[i(p)]=u);return n.length?void s(f,a,o,n,c,e):void e()});return u&&(n("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)"),l.then(u)),l}):o=null,o}(K,p,H,b,Xi,Yi),es=function(e,t){var n;for(n in t)!t.hasOwnProperty(n)||n in e||(e[n]=t[n]);return e},ts=function(e){return function(t,n){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),e(t,n)}}(es),ns=function(){function e(e,t){t?e.setAttribute("style",t):(e.getAttribute("style"),e.removeAttribute("style"))}return function(t){var n,r,i=this;return n=i.node=i.element.node,r=n.getAttribute("style"),i.isIntro=!!t,i.complete=function(t){!t&&i.isIntro&&e(n,r),n._ractive.transition=null,i._manager.remove(i)},i._fn?void i._fn.apply(i.root,[i].concat(i.params)):void i.complete()}}(),rs=function(e,t,n,r,i,s,o){var u,a,f;return o.push(function(){u=o.Fragment}),a={args:!0},f=function(e,t){this.init(e,t)},f.prototype={init:e,start:s,getStyle:t,setStyle:n,animateStyle:r,processParams:i},f}(Wi,Vi,$i,Zi,ts,ns,i),is=function(e){for(var t=[],n=e.length;n--;)t[n]=e[n];return t},ss=function(e,t){function n(e,t){for(var n=e.length;n--;)if(e[n]==t)return!0}return function(r){var i,s,o,u,a,f,l;if(i=r.node)if(u=e(i.options),s=r.getAttribute("value"),o=r.getAttribute("multiple"),void 0!==s)u.forEach(function(e){var t,r;t=e._ractive?e._ractive.value:e.value,r=o?n(s,t):s==t,r&&(l=!0),e.selected=r}),l||(u[0]&&(u[0].selected=!0),r.binding&&(s=o?[]:u[0]?u[0]._ractive?u[0]._ractive.value:u[0].value:void 0,r.root.viewmodel.set(r.binding.keypath,s)));else if(r.binding){if(o)a=u.reduce(function(e,t){return t.selected&&e.push(t.value),e},[]);else for(f=u.length;f--;)if(u[f].selected){a=u[f].value;break}t.lockAttribute(r.attributes.value),r.root.viewmodel.set(r.binding.keypath)}}}(is,D),os=function(e,t){return function(){var n=this;this.dirty||(this.dirty=!0,e.afterViewUpdate(function(){n.dirty=!1,t(n)})),this.parentFragment.bubble()}}(D,ss),us=function(e){do if("select"===e.name)return e;while(e=e.parent)},as=function(e){return function(t,n){t.select=e(t.parent),t.select.options.push(t),t.select.binding&&t.select.binding.dirty(),n.a||(n.a={}),n.a.value||n.a.hasOwnProperty("disabled")||(n.a.value=n.f),"selected"in n.a&&void 0!==t.select.getAttribute("value")&&delete n.a.selected}}(us),fs=function(e,t,n,r,i,s,o,u,a,f,l,c){var h;return c.push(function(){h=c.Fragment}),function(c){var p,d,v,m,g,y;this.type=e.ELEMENT,p=this.parentFragment=c.parentFragment,d=this.template=c.template,this.parent=c.pElement||p.pElement,this.root=m=p.root,this.index=c.index,this.cssDetachQueue=[],this.namespace=r(d,this.parent),this.name=v!==t.html?n(d.e):d.e,"option"===this.name&&l(this,d),"select"===this.name&&(this.options=[],this.bubble=f),this.attributes=i(this,d.a),d.f&&(this.fragment=new h({template:d.f,root:m,owner:this,pElement:this})),m.twoway&&(g=s(this,d.a))&&(this.binding=g,y=this.root._twowayBindings[g.keypath]||(this.root._twowayBindings[g.keypath]=[]),y.push(g)),d.v&&(this.eventHandlers=o(this,d.v)),d.o&&(this.decorator=new u(this,d.o)),d.t0&&(this.intro=this.outro=new a(this,d.t0)),d.t1&&(this.intro=new a(this,d.t1)),d.t2&&(this.outro=new a(this,d.t2))}}(rt,c,Qr,Gr,Ei,Pi,Ui,zi,rs,os,as,i),ls=function(e){return function(t,n){return t===n||e(t,n)}}(rr),cs=function(e,t){return function(n,r,i,s){var o=n[r];o&&!e(o,s)&&e(o,i)&&(n[r]=t(o,i,s))}}(ls,ir),hs=function(e){return function(t,n,r,i){function s(e){e.rebind(t,n,r,i)}var o,u,a,f;if(this.attributes&&this.attributes.forEach(s),this.eventHandlers&&this.eventHandlers.forEach(s),this.binding&&s(this.binding),this.fragment&&s(this.fragment),a=this.liveQueries)for(f=this.root,o=a.length;o--;)a[o]._makeDirty();this.node&&(u=this.node._ractive)&&(e(u,"keypath",r,i),void 0!=t&&(u.index[t]=n))}}(cs),ps=function(e){var t,n,r;((t=e.getAttribute("width"))||(n=e.getAttribute("height")))&&e.node.addEventListener("load",r=function(){t&&(e.node.width=t.value),n&&(e.node.height=n.value),e.node.removeEventListener("load",r,!1)},!1)},ds=function(e,t,n,r,i,s,o,u,a){function f(t){var n,r,i;if(r=t.select.getAttribute("value"),void 0!==r)if(n=t.getAttribute("value"),t.select.node.multiple&&e(r)){for(i=r.length;i--;)if(n==r[i]){t.node.selected=!0;break}}else t.node.selected=n==r}function l(e){var t,n,r,i,s;t=e.root;do for(n=t._liveQueries,r=n.length;r--;)i=n[r],s=n["_"+i],s._test(e)&&(e.liveQueries||(e.liveQueries=[])).push(s);while(t=t._parent)}var c,h;return c=function(){var e=this.node,t=this.fragment.toString(!1);if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.hasChildNodes();)e.removeChild
(e.firstChild);e.appendChild(document.createTextNode(t))}},h=function(){this.node.type&&"text/javascript"!==this.node.type||t("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)},function(){var e,t,p=this,d=this.root;return e=this.node=r(this.name,this.namespace),d.constructor.css&&this.parentFragment.getNode()===d.el&&this.node.setAttribute("data-rvcguid",d.constructor._guid),i(this.node,"_ractive",{value:{proxy:this,keypath:u(this.parentFragment),index:this.parentFragment.indexRefs,events:n(null),root:d}}),this.attributes.forEach(function(t){return t.render(e)}),this.fragment&&("script"===this.name?(this.bubble=h,this.node.text=this.fragment.toString(!1),this.fragment.unrender=s):"style"===this.name?(this.bubble=c,this.bubble(),this.fragment.unrender=s):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=s:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(e){return e.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),"img"===this.name&&a(this),this.decorator&&this.decorator.fn&&o.afterViewUpdate(function(){p.decorator.init()}),(t=this.intro)&&(o.registerTransition(t),o.afterViewUpdate(function(){return t.start(!0)})),"option"===this.name&&f(this),this.node.autofocus&&o.afterViewUpdate(function(){return p.node.focus()}),l(this),this.node}}(o,H,U,h,d,Jn,D,k,ps),vs=function(){for(this.fragment&&this.fragment.teardown();this.attributes.length;)this.attributes.pop().teardown()},ms=function(e,t){function n(e){var n,r,i;if(n=e.getAttribute("value"),void 0===n)return!1;if(r=e.select.getAttribute("value"),r==n)return!0;if(e.select.attributes.multiple&&t(r))for(i=r.length;i--;)if(r[i]==n)return!0}function r(e){var t,n,r,i;return t=e.attributes,n=t.type,r=t.value,i=t.name,n&&"radio"===n.value&&r&&i.interpolator&&r.value===i.interpolator.value?!0:void 0}function i(e){var t=e.toString();return t?" "+t:""}return function(){var t,s;return t="<"+(this.template.y?"!doctype":this.template.e),t+=this.attributes.map(i).join(""),"option"===this.name&&n(this)&&(t+=" selected"),"input"===this.name&&r(this)&&(t+=" checked"),t+=">",this.fragment&&(s="script"!==this.name&&"style"!==this.name,t+=this.fragment.toString(s)),e.test(this.template.e)||(t+="</"+this.template.e+">"),t}}(Pt,o),gs=function(e){function t(e){var t,n,r;for(r=e.liveQueries.length;r--;)t=e.liveQueries[r],n=t.selector,t._remove(e.node)}return function(n){var r,i,s;n&&(this.willDetach=!0,e.detachWhenReady(this)),this.fragment&&this.fragment.unrender(!1),(r=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,i=this.root._twowayBindings[r.keypath],i.splice(i.indexOf(r),1)),this.eventHandlers&&this.eventHandlers.forEach(function(e){return e.unrender()}),this.decorator&&this.decorator.teardown(),(s=this.outro)&&(e.registerTransition(s),e.afterViewUpdate(function(){return s.start(!1)})),this.liveQueries&&t(this)}}(D),ys=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=function(e){this.init(e)};return v.prototype={bubble:e,detach:t,find:n,findAll:r,findAllComponents:i,findComponent:s,findNextNode:o,firstNode:u,getAttribute:a,init:f,rebind:l,render:c,teardown:h,toString:p,unrender:d},v}(Rr,Ur,zr,Wr,Xr,Vr,$r,Jr,Kr,fs,hs,ds,vs,ms,gs),bs=function(){function e(e,t){var r=n.exec(t)[0];return null===e||r.length<e.length?r:e}var t=/^\s*$/,n=/^\s*/;return function(n){var r,i,s,o;return r=n.split("\n"),i=r[0],void 0!==i&&t.test(i)&&r.shift(),s=r[r.length-1],void 0!==s&&t.test(s)&&r.pop(),o=r.reduce(e,null),o&&(n=r.map(function(e){return e.replace(o,"")}).join("\n")),n}}(),ws=function(e,t,n,r){function i(e,r){var i=t.registries.partials.findInstance(e,r);if(i){var s=i.partials[r];return n.isParsed(s)||(s=n.parse(s,i.parseOptions),i.partials[r]=s=t.template.processCompound(i,s)),s}}return function(s,o){var u,a;if(u=i(s,o))return u;if(u=n.fromId(o,{noThrow:!0})){u=r(u);var f=n.parse(u,s.parseOptions);return s.partials[o]=t.template.processCompound(s,f)}if(a='Could not find template for partial "'+o+'"',s.debug)throw new Error(a);return e(a),[]}}(H,en,Vt,bs),Es=function(e,t){var n;return t?n=e.split("\n").map(function(e,n){return n?t+e:e}).join("\n"):e},Ss=function(e,t,n,r){var i,s;return r.push(function(){s=r.Fragment}),i=function(n){var r,i=this.parentFragment=n.parentFragment;if(this.type=e.PARTIAL,this.name=n.template.r,this.index=n.index,!n.template.r)throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.");r=t(i.root,n.template.r),this.fragment=new s({template:r,root:i.root,owner:this,pElement:i.pElement})},i.prototype={firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},render:function(){return this.fragment.render()},unrender:function(e){this.fragment.unrender(e)},rebind:function(e,t,n,r){return this.fragment.rebind(e,t,n,r)},teardown:function(){this.fragment.teardown()},toString:function(t){var r,i,s,o;return r=this.fragment.toString(t),i=this.parentFragment.items[this.index-1],i&&i.type===e.TEXT?(s=i.template.split("\n").pop(),(o=/^\s+$/.exec(s))?n(r,o[0]):r):r},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)}},i}(rt,ws,Es,i),xs=function(){return this.instance.fragment.detach()},Ts=function(e){return this.instance.fragment.find(e)},Ns=function(e,t){return this.instance.fragment.findAll(e,t)},Cs=function(e,t){t._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(e,t)},ks=function(e){return e&&e!==this.name?this.instance.fragment?this.instance.fragment.findComponent(e):null:this.instance},Ls=function(){return this.parentFragment.findNextNode(this)},As=function(
){return this.rendered?this.instance.fragment.firstNode():null},Os=function(e,t){var n,r,i;return t.push(function(){n=t.Fragment}),r={parse:!0},i=function(e,t,i){this.parentFragment=e.parentFragment,this.component=e,this.key=t,this.fragment=new n({template:i,root:e.root,owner:this}),this.value=this.fragment.getValue(r)},i.prototype={bubble:function(){var t=this;this.dirty||(this.dirty=!0,e.afterModelUpdate(function(){t.update(),t.dirty=!1}))},update:function(){var e=this.fragment.getValue(r);this.component.instance.set(this.key,e),this.value=e},teardown:function(){this.fragment.teardown()}},i}(D,i),Ms=function(e,t,n,r){function i(i,s,o,u){var a,f,l,c,h,p;return l=i.root,c=i.parentFragment,"string"==typeof o?(f=t(o),f?f.value:o):null===o?!0:1===o.length&&o[0].t===e.INTERPOLATOR&&o[0].r?c.indexRefs&&void 0!==c.indexRefs[p=o[0].r]?(i.indexRefBindings[p]=s,c.indexRefs[p]):(h=n(l,o[0].r,c)||o[0].r,u.push({childKeypath:s,parentKeypath:h}),l.viewmodel.get(h)):(a=new r(i,s,o),i.complexParameters.push(a),a.value)}return function(e,t,n,r){var s,o,u={};e.complexParameters=[];for(s in n)n.hasOwnProperty(s)&&(o=i(e,s,n[s],r),(void 0!==o||void 0===t[s])&&(u[s]=o));return u}}(rt,qt,L,Os),_s=function(e,t,n,r){var i,s,o,u;return s=e.parentFragment,u=e.root,o={content:r||[]},i=new t({append:!0,data:n,partials:o,magic:u.magic||t.defaults.magic,modifyArrays:u.modifyArrays,_parent:u,_component:e,adapt:u.adapt})},Ds=function(e,t,n){var r=function(e,t,n,r,i){this.root=e,this.keypath=t,this.priority=i,this.otherInstance=n,this.otherKeypath=r,e.viewmodel.register(this),this.value=this.root.viewmodel.get(this.keypath)};return r.prototype={setValue:function(r){this.updating||this.counterpart&&this.counterpart.updating||t(r)&&r._ractive&&r._ractive.setting||n(r,this.value)||(this.updating=!0,e.addInstance(this.otherInstance),this.otherInstance.viewmodel.set(this.otherKeypath,r),this.value=r,this.updating=!1)},rebind:function(e){this.root.viewmodel.unregister(this),this.counterpart.root.viewmodel.unregister(this.counterpart),this.keypath=e,this.counterpart.otherKeypath=e,this.root.viewmodel.register(this),this.counterpart.root.viewmodel.register(this.counterpart)},teardown:function(){this.root.viewmodel.unregister(this)}},function(e,t,n,i){var s,o,u,a,f,l;s=n+"="+i,u=e.bindings,u[s]||(u[s]=!0,o=e.instance,a=e.parentFragment.priority,f=new r(t,n,o,i,a),u.push(f),o.twoway&&(l=new r(o,i,t,n,1),u.push(l),f.counterpart=l,l.counterpart=f))}}(D,o,y),Ps=function(e){return function(t,n){n.forEach(function(n){var r,i;e(t,t.root,n.parentKeypath,n.childKeypath),r=t.instance.viewmodel.get(n.childKeypath),i=t.root.viewmodel.get(n.parentKeypath),void 0!==r&&void 0===i&&t.root.viewmodel.set(n.parentKeypath,r)})}}(Ds),Hs=function(e){function t(t,r,i,s){if("string"!=typeof s){if(r.debug)throw new Error(n);return void e(n)}t.on(i,function(){var e=Array.prototype.slice.call(arguments);e.unshift(s),r.fire.apply(r,e)})}var n="Components currently only support simple events - you cannot include arguments. Sorry!";return function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e.instance,e.root,r,n[r])}}(H),Bs=function(e){var t,n;for(t=e.root;t;)(n=t._liveComponentQueries["_"+e.name])&&n.push(e.instance),t=t._parent},js=function(e,t,n,r,i,s,o,u){return function(a){var f,l,c,h,p;if(f=this.parentFragment=a.parentFragment,l=f.root,this.root=l,this.type=e.COMPONENT,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.bindings=[],c=u.registries.components.find(l,this.name),!c)throw new Error('Component "'+this.name+'" not found');p=[],h=n(this,c.defaults.data||{},a.template.a,p),r(this,c,h,a.template.f),i(this,p),s(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&t('The "intro", "outro" and "decorator" directives have no effect on components'),o(this)}}(rt,H,Ms,_s,Ps,Hs,Bs,en),Fs=function(e){return function(t,n,r,i){var s,o,u=this.instance,a=u._parent;this.bindings.forEach(function(s){var o;s.root===a&&(s.keypath===t&&u.set(s.otherKeypath,n),(o=e(s.keypath,r,i))&&s.rebind(o))}),(s=this.indexRefBindings[t])&&u.set(s,n),(o=this.root._liveComponentQueries["_"+this.name])&&o._makeDirty()}}(ir),Is=function(){var e=this.instance;return e.render(this.parentFragment.getNode()).then(function(){var t;(t=e.complete)&&t.call(e)}),this.rendered=!0,e.detach()},qs=function(){function e(e){var t,n;t=e.root;do(n=t._liveComponentQueries["_"+e.name])&&n._remove(e);while(t=t._parent)}return function(){for(;this.complexParameters.length;)this.complexParameters.pop().teardown();for(;this.bindings.length;)this.bindings.pop().teardown();e(this),this.shouldDestroy=!1,this.instance.fragment.teardown()}}(),Rs=function(){return this.instance.fragment.toString()},Us=function(e){this.shouldDestroy=e,this.instance.unrender()},zs=function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(e){this.init(e)};return p.prototype={detach:e,find:t,findAll:n,findAllComponents:r,findComponent:i,findNextNode:s,firstNode:o,init:u,rebind:a,render:f,teardown:l,toString:c,unrender:h},p}(xs,Ts,Ns,Cs,ks,Ls,As,js,Fs,Is,qs,Rs,Us),Ws=function(e,t,n){var r=function(t){this.type=e.COMMENT,this.value=t.template.c};return r.prototype={detach:n,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},teardown:t,toString:function(){return"<!--"+this.value+"-->"},unrender:function(e){e&&this.node.parentNode.removeChild(this.node)}},r}(rt,Jn,Qn),Xs=function(e,t,n,r,i,s,o,u,a,f){return function(l){if("string"==typeof l.template)return new t(l);switch(l.template.t){case e.INTERPOLATOR:return new n(l);case e.SECTION:return new r(l);case e.TRIPLE:return new i(l);case e.ELEMENT:return f.registries.components.find(l.parentFragment.root,l.template.e)?new u(l):new s(l);case e.PARTIAL:return new o(l);case e.COMMENT:return new a(l);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}}(rt,Gn,cr,Lr,qr,ys,Ss,zs,Ws,en),Vs=function(e,t,
n){return function(r){var i,s,o,u=this;if(this.owner=r.owner,i=this.parent=this.owner.parentFragment,this.root=r.root,this.pElement=r.pElement,this.context=r.context,this.owner.type===e.SECTION&&(this.index=r.index),i&&(s=i.indexRefs)){this.indexRefs=t(null);for(o in s)this.indexRefs[o]=s[o]}this.priority=i?i.priority+1:1,r.indexRef&&(this.indexRefs||(this.indexRefs={}),this.indexRefs[r.indexRef]=r.index),"string"==typeof r.template?r.template=[r.template]:r.template||(r.template=[]),this.items=r.template.map(function(e,t){return n({parentFragment:u,pElement:r.pElement,template:e,index:t})}),this.inited=!0}}(rt,U,Xs),$s=function(e){return function(t,n,r,i){e(this,"context",r,i),this.indexRefs&&void 0!==this.indexRefs[t]&&this.indexRefs[t]!==n&&(this.indexRefs[t]=n),this.items.forEach(function(e){e.rebind&&e.rebind(t,n,r,i)})}}(cs),Js=function(){var e;return 1===this.items.length?e=this.items[0].render():(e=document.createDocumentFragment(),this.items.forEach(function(t){e.appendChild(t.render())})),this.rendered=!0,e},Ks=function(){this.items.forEach(function(e){return e.teardown()})},Qs=function(e){return this.items?this.items.map(function(t){return t.toString(e)}).join(""):""},Gs=function(e){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(t){return t.unrender(e)})},Ys=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=function(e){this.init(e)};return g.prototype={bubble:e,detach:t,find:n,findAll:r,findAllComponents:i,findComponent:s,findNextNode:o,firstNode:u,getNode:a,getValue:f,init:l,rebind:c,render:h,teardown:p,toString:d,unrender:v},m.Fragment=g,g}(jn,Fn,In,qn,Rn,Un,zn,Wn,Xn,Vn,Vs,$s,Js,Ks,Qs,Gs,i),Zs=function(e,t,n,r,i){var s=["template","partials","components","decorators","events"];return function(o,u){var a,f,l,c,h,p;if("function"!=typeof o||u?o=o||{}:(u=o,o={}),"object"!=typeof o)throw new Error("The reset method takes either no arguments, or an object containing new data");for((l=this.viewmodel.wrapped[""])&&l.reset?l.reset(o)===!1&&(this.data=o):this.data=o,c=i.reset(this),h=c.length;h--;)if(s.indexOf(c[h]>-1)){p=!0;break}return a=new e(function(e){f=e}),p?(this.viewmodel.clearCache(""),n(this,""),this.unrender(),this.fragment.template!==this.template&&(this.fragment.teardown(),this.fragment=new r({template:this.template,root:this,owner:this})),this.render(this.el,this.anchor).then(f)):(t.start(this,f),this.viewmodel.clearCache(""),n(this,""),t.end()),this.fire("reset",o),u&&a.then(u),a}}(b,D,M,Ys,en),eo=function(e,t){return function(n){var r;e.template.init(null,this,{template:n}),r=this.transitionsEnabled,this.transitionsEnabled=!1,this.unrender(),this.fragment.teardown(),this.fragment=new t({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=r}}(en,Ys),to=function(e,t,n,r,i){var s=/\*/;return function(o,u,a){var f,l,c,h=this;if(l=new r(function(e){c=e}),e.start(this,c),t(o)){f=o,a=u;for(o in f)f.hasOwnProperty(o)&&(u=f[o],o=n(o),this.viewmodel.set(o,u))}else o=n(o),s.test(o)?i(this,o).forEach(function(e){h.viewmodel.set(e,u)}):this.viewmodel.set(o,u);return e.end(),a&&l.then(a.bind(this)),l}}(D,u,w,b,kn),no=function(e){return function(t,n){return e(this,t,void 0===n?-1:-n)}}(m),ro=function(e){return function(t){var n;return this.fire("teardown"),this.fragment.teardown(),this.viewmodel.teardown(),n=this.rendered?this.unrender():e.resolve(),t&&n.then(t.bind(this)),n}}(b),io=function(){return this.fragment.toString(!0)},so=function(e,t){var n;if("string"==typeof e)return n=this.get(e),this.set(e,!n,t);if(this.debug)throw new Error("Bad arguments")},oo=function(e,t,n,r,i){return function(){var s,o,u,a,f,l=this;if(!this.rendered)throw new Error("ractive.unrender() was called on a Ractive instance that was not rendered");if(s=new t(function(e){o=e}),r.start(this,o),u=!this.component||this.component.shouldDestroy,this.constructor.css)if(u)s.then(function(){return i.remove(l.constructor)});else{a=this.component.parentFragment;do a.owner.type===e.ELEMENT&&a.owner.willDetach&&(f=a.owner);while(!f&&(a=a.parent));if(!f)throw new Error("A component is being torn down but doesn't have a nearest detaching element... this shouldn't happen!");f.cssDetachQueue.push(this.constructor)}for(;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(u),this.rendered=!1,n(this.el.__ractive_instances__,this),r.end(),s}}(rt,b,T,D,N),uo=function(e,t,n){return function(r,i){var s,o;return"function"==typeof r?(i=r,r=""):r=r||"",s=new t(function(e){o=e}),e.start(this,o),this.viewmodel.clearCache(r),n(this,r),e.end(),this.fire("update",r),i&&s.then(i.bind(this)),s}}(D,b,M),ao=function(e,t,n){function r(e,i,s,o,u){var a,f,l,c,h,p;if(a=e._twowayBindings[i])for(l=a.length;l--;)c=a[l],(!c.radioName||c.element.node.checked)&&(c.checkboxName?c.changed()&&o[i]!==!0&&(o[i]=!0,o.push(i)):(h=c.attribute.value,p=c.getValue(),t(h,p)||n(h,p)||(s[i]=p)));if(u&&(f=e.viewmodel.depsMap[i]))for(l=f.length;l--;)r(e,f[l],s,o,u)}return function(t,n){var i,s,o;if("string"!=typeof t&&(t="",n=!0),r(this,t,i={},s=[],n),o=s.length)for(;o--;)t=s[o],i[t]=e(this,t);return this.set(i)}}(C,Ai,y),fo=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){return{add:e,animate:t,detach:n,find:r,findAll:i,findAllComponents:s,findComponent:o,fire:u,get:a,insert:f,merge:l,observe:c,off:h,on:p,render:d,reset:v,resetTemplate:m,set:g,subtract:y,teardown:b,toHTML:w,toggle:E,unrender:S,update:x,updateModel:T}}(g,rn,sn,on,mn,gn,yn,bn,wn,Sn,Nn,Mn,Pn,Hn,Bn,Zs,eo,to,no,ro,io,so,oo,uo,ao),lo=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=16*Math.random()|0,n="x"==e?t:3&t|8,n.toString(16)})},co=function(e,t,n){switch(t){case"splice":return n;case"sort":case"reverse":return null;case"pop":return e.length?[-1]:null;case"push":return[e.length,0].concat(n);case"shift":return[0,1];case"unshift":return[0,0].concat(n)}},ho=function(e,t){var n,r,i,s,o,u,a;return t?
(n=+(t[0]<0?e.length+t[0]:t[0]),o=Math.max(0,t.length-2),u=void 0!==t[1]?t[1]:e.length-n,u=Math.min(u,e.length-n),a=o-u,s=e.length+a,a?(r=Math.max(e.length,s),i=Math.max(e.length,s)):r=i=n+o,{rangeStart:n,rangeEnd:r,clearEnd:i,balance:a,added:o,removed:u}):null},po=function(e,t,n){return function(r,i,s,o){var u,a,f,l,c;if(u=r.root,a=r.keypath,u.viewmodel.changes.push(a),"sort"===s||"reverse"===s)return void u.viewmodel.set(a,i);if(o){for(l=o.rangeStart;l<o.clearEnd;l+=1)u.viewmodel.clearCache(a+"."+l);if(u._patternObservers.length)for(l=o.rangeStart;l<o.rangeEnd;l+=1)n(u,a+"."+l,a+"."+l,!1,!0);if(f=function(t){t.keypath===a&&t.type===e.SECTION&&!t.inverted&&t.docFrag?t.splice(o):t.setValue(t.root.viewmodel.get(t.keypath))},u.viewmodel.deps.forEach(function(e){var t=e[a];t&&t.forEach(f)}),o.added&&o.removed)for(l=o.rangeStart;l<o.rangeEnd;l+=1)c=a+"."+l,t(u,c);o.balance&&(u.viewmodel.clearCache(a+".length"),t(u,a+".length",!0))}}}(rt,M,O),vo=function(e,t,n,r,i){var s,o,u,a=[],f=["pop","push","reverse","shift","sort","splice","unshift"];return f.forEach(function(s){var o=function(){var t,o,u,a,f;for(t=n(this,s,Array.prototype.slice.call(arguments)),o=r(this,t),u=Array.prototype[s].apply(this,arguments),this._ractive.setting=!0,f=this._ractive.wrappers.length;f--;)a=this._ractive.wrappers[f],e.start(a.root),i(a,this,s,o),e.end();return this._ractive.setting=!1,u};t(a,s,{value:o})}),s={},s.__proto__?(o=function(e){e.__proto__=a},u=function(e){e.__proto__=Array.prototype}):(o=function(e){var n,r;for(n=f.length;n--;)r=f[n],t(e,r,{value:a[r],configurable:!0})},u=function(e){var t;for(t=f.length;t--;)delete e[f[t]]}),o.unpatch=u,o}(D,d,co,ho,po),mo=function(e,t,n){var r,i,s;return r={filter:function(e){return t(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new i(e,t,n)}},i=function(t,r,i){this.root=t,this.value=r,this.keypath=i,r._ractive||(e(r,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),n(r)),r._ractive.instances[t._guid]||(r._ractive.instances[t._guid]=0,r._ractive.instances.push(t)),r._ractive.instances[t._guid]+=1,r._ractive.wrappers.push(this)},i.prototype={get:function(){return this.value},teardown:function(){var e,t,r,i,o;if(e=this.value,t=e._ractive,r=t.wrappers,i=t.instances,t.setting)return!1;if(o=r.indexOf(this),-1===o)throw new Error(s);if(r.splice(o,1),r.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if(o=i.indexOf(this.root),-1===o)throw new Error(s);i.splice(o,1)}}else delete e._ractive,n.unpatch(this.value)}},s="Something went wrong in a rather interesting way",r}(d,o,vo),go=function(){var e=/^\s*[0-9]+\s*$/;return function(t){return e.test(t)?[]:{}}}(),yo=function(e,t,n,r){function i(t,n,i){function s(t){var i,s;t.value=n,t.updating||(s=t.ractive,i=t.keypath,t.updating=!0,e.start(s),s.viewmodel.changes.push(i),s.viewmodel.clearCache(i),r(s,i),e.end(),t.updating=!1)}var o,u,a,f,l,c;if(o=t.obj,u=t.prop,i&&!i.configurable){if("length"===u)return;throw new Error('Cannot use magic mode with property "'+u+'" - object is not configurable')}i&&(a=i.get,f=i.set),l=a||function(){return n},c=function(e){f&&f(e),n=a?a():e,c._ractiveWrappers.forEach(s)},c._ractiveWrappers=[t],Object.defineProperty(o,u,{get:l,set:c,enumerable:!0,configurable:!0})}var s,o;try{Object.defineProperty({},"test",{value:0}),s={filter:function(e,t,r){var i,s,o,u,a;return t?(i=t.split("."),s=i.pop(),o=i.join("."),(u=r.viewmodel.wrapped[o])&&!u.magic?!1:(a=r.get(o),n(a)&&/^[0-9]+$/.test(s)?!1:a&&("object"==typeof a||"function"==typeof a))):!1},wrap:function(e,t,n){return new o(e,t,n)}},o=function(e,t,n){var r,s,o,u;return this.magic=!0,this.ractive=e,this.keypath=n,this.value=t,r=n.split("."),this.prop=r.pop(),s=r.join("."),this.obj=s?e.get(s):e.data,o=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),o&&o.set&&(u=o.set._ractiveWrappers)?void (-1===u.indexOf(this)&&u.push(this)):void i(this,t,o)},o.prototype={get:function(){return this.value},reset:function(e){this.updating||(this.updating=!0,this.obj[this.prop]=e,this.ractive.viewmodel.clearCache(this.keypath),this.updating=!1)},set:function(e,n){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=t(e),this.updating=!1),this.obj[this.prop][e]=n)},teardown:function(){var e,t,n,r,i;return this.updating?!1:(e=Object.getOwnPropertyDescriptor(this.obj,this.prop),t=e&&e.set,void (t&&(r=t._ractiveWrappers,i=r.indexOf(this),-1!==i&&r.splice(i,1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))))}}}catch(u){s=!1}return s}(D,go,o,M),bo=function(e,t){var n,r;return e&&(n={filter:function(n,r,i){return e.filter(n,r,i)&&t.filter(n)},wrap:function(e,t,n){return new r(e,t,n)}},r=function(n,r,i){this.value=r,this.magic=!0,this.magicWrapper=e.wrap(n,r,i),this.arrayWrapper=t.wrap(n,r,i)},r.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(e){return this.magicWrapper.reset(e)}}),n}(yo,mo),wo=function(e,t,n,r){function i(e,t){var n,r={};if(!t)return e;t+=".";for(n in e)e.hasOwnProperty(n)&&(r[t+n]=e[n]);return r}function s(e){var t;return o[e]||(t=e?e+".":"",o[e]=function(n,r){var s;return"string"==typeof n?(s={},s[t+n]=r,s):"object"==typeof n?t?i(n,e):n:void 0}),o[e]}var o={};return function(i,o,u){var a,f,l,c,h=this.ractive;for(a=h.adapt.length,f=0;a>f;f+=1){if(l=h.adapt[f],"string"==typeof l){var p=e.registries.adaptors.find(h,l);if(!p)throw new Error('Missing adaptor "'+l+'"');l=h.adapt[f]=p}if(l.filter(o,i,h))return c=this.wrapped[i]=l.wrap(h,o,i,s(i)),c.value=o,o}return u||(h.magic?r.filter(o,i,h)?this.wrapped[i]=r.wrap(h,o,i):n.filter(o,i,h)&&(this.wrapped[i]=n.wrap(h,o,i)):h.modifyArrays&&t.filter(o,i,h)&&(this.wrapped[i]=t.wrap(h,o,i))),o}}(en,mo,yo,bo),Eo=function(){this.capturing=!0,this.captured=[]},So=function(e,t){var n,r,i;if(t||(r=this.wrapped[e])&&r.teardown()!==!1&&
(this.wrapped[e]=null),(i=this.computations[e])&&i.compute(),this.cache[e]=void 0,n=this.cacheMap[e])for(;n.length;)this.clearCache(n.pop())},xo=function(){var e=Object.prototype.toString;return function(t){return"boolean"==typeof t||"object"==typeof t&&"[object Boolean]"===e.call(t)}}(),To=function(){var e=Object.prototype.toString;return function(t){return"[object Date]"===e.call(t)}}(),No=function(){var e=Object.prototype.toString;return function(t){return"number"==typeof t||"object"==typeof t&&"[object Number]"===e.call(t)}}(),Co=function(){var e=Object.prototype.toString;return function(t){return"[object RegExp]"===e.call(t)}}(),ko=function(){var e=Object.prototype.toString;return function(t){return"string"==typeof t||"object"==typeof t&&"[object String]"===e.call(t)}}(),Lo=function(e,t,n,r,i,s){return function(o){var u,a;if(!o||"function"==typeof o||t(o)||r(o)||s(o))return o;if(e(o))return o.slice();if(n(o))return new Date(o);if(i(o))return new RegExp(o);u={};for(a in o)o.hasOwnProperty(a)&&(u[a]=o[a]);return u}}(o,xo,To,No,Co,ko),Ao=function(e){function t(t,n,r,i,s){n.viewmodel.set(i,s,!0),e(n.component,t,r,i)}return function(e,n){var r,i,s,o,u;if(r=e._parent,i=e.component.parentFragment,i.indexRefs&&void 0!==(u=i.indexRefs[n]))return e.component.indexRefBindings[n]=n,u;do if(i.context&&(s=i.context+"."+n,o=r.viewmodel.get(s),void 0!==o))return t(r,e,s,n,o),o;while(i=i.parent);return o=r.viewmodel.get(n),void 0!==o?(t(r,e,n,n,o),o):void 0}}(Ds),Oo={FAILED_LOOKUP:!0},Mo=function(e,t,n){var r={},i=function(e,n){this.viewmodel=e,this.root=e.ractive,this.ref=n,this.parentFragment=r,e.unresolvedImplicitDependencies[n]=!0,e.unresolvedImplicitDependencies.push(this),t.addUnresolved(this)};return i.prototype={resolve:function(){n(this.viewmodel.ractive,this.ref),this.viewmodel.unresolvedImplicitDependencies[this.ref]=!1,e(this.viewmodel.unresolvedImplicitDependencies,this)},teardown:function(){t.removeUnresolved(this)}},i}(T,D,M),_o=function(e,t,n,r,i){function s(n,i){var s,o,u,a,f,l,c,h;return s=i.split("."),o=s.pop(),u=s.join("."),a=n.get(u),(c=n.wrapped[u])&&(a=c.get()),null!==a&&void 0!==a?((f=n.cacheMap[u])?-1===f.indexOf(i)&&f.push(i):n.cacheMap[u]=[i],"object"!=typeof a||o in a?(h=!e.call(a,o),l=h?t(a[o]):a[o],l=n.adapt(i,l,!1),n.cache[i]=l,l):n.cache[i]=r):void 0}var o={};return function(e){var t=arguments[1];void 0===t&&(t=o);var u,a,f,l,c,h,p=this.ractive,d=this.cache;return void 0===d[e]?((l=this.computations[e])?u=l.value:(c=this.wrapped[e])?u=c.value:e?u=(h=this.evaluators[e])?h.value:s(this,e):(this.adapt("",p.data),u=p.data),d[e]=u):u=d[e],u===r&&(a=e.split(".")[0],f=a===e||void 0===this.get(a),u=p._parent&&!p.isolated&&f?n(p,e,t):void 0),t.evaluateWrapped&&(c=this.wrapped[e])&&(u=c.get()),this.capturing&&this.captured[e]!==!0&&(this.captured.push(e),this.captured[e]=!0,void 0===u&&this.unresolvedImplicitDependencies[e]!==!0&&new i(this,e)),u}}(s,Lo,Ao,Oo,Mo),Do=function(){function e(e,t){var n,r,i;for(n=t.split(".");n.length;)n.pop(),r=n.join("."),i=e.depsMap[r]||(e.depsMap[r]=[]),void 0===i[t]&&(i[t]=0,i[i.length]=t),i[t]+=1,t=r}return function(t){var n,r,i,s,o;i=t.keypath,s=t.priority,n=this.deps[s]||(this.deps[s]={}),r=n[i]||(n[i]=[]),r.push(t),t.registered=!0,i&&((o=this.evaluators[i])&&(o.dependants||o.wake(),o.dependants+=1),e(this,i))}}(),Po=function(){return this.captured},Ho=function(e,t,n){return function(r,i,s){var o,u,a,f,l,c,h,p;e(this.cache[r],i)||(l=this.computations[r],c=this.wrapped[r],h=this.evaluators[r],l&&!l.setting&&l.set(i),c&&c.reset&&(p=c.reset(i)!==!1,p&&(i=c.get())),h&&(h.value=i),l||h||p||(o=r.split("."),u=o.pop(),a=o.join("."),c=this.wrapped[a],c&&c.set?c.set(u,i):(f=c?c.get():this.get(a),f||(f=t(u),this.set(a,f,!0)),f[u]=i)),this.clearCache(r,p),s||(this.changes.push(r),n(this.ractive,r)))}}(y,go,M),Bo=function(){var e,t=this;for(Object.keys(this.cache).forEach(function(e){return t.clearCache(e)});e=this.unresolvedImplicitDependencies.pop();)e.teardown()},jo=function(){function e(e,t){var n,r,i;for(n=t.split(".");n.length;)n.pop(),r=n.join("."),i=e.depsMap[r],i[t]-=1,i[t]||(i.splice(i.indexOf(t),1),i[t]=void 0),t=r}return function(t){var n,r,i,s,o;if(i=t.keypath,s=t.priority,n=this.deps[s][i],r=n.indexOf(t),-1===r||!t.registered)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");n.splice(r,1),t.registered=!1,i&&((o=this.evaluators[i])&&(o.dependants-=1,o.dependants||o.sleep()),e(this,i))}}(),Fo=function(e,t,n,r,i,s,o,u,a,f){var l=function(t){this.ractive=t,this.cache={},this.cacheMap=e(null),this.deps=[],this.depsMap=e(null),this.wrapped=e(null),this.evaluators=e(null),this.computations=e(null),this.captured=null,this.unresolvedImplicitDependencies=[],this.changes=[]};return l.prototype={adapt:t,capture:n,clearCache:r,get:i,register:s,release:o,set:u,teardown:a,unregister:f},l}(U,wo,Eo,So,_o,Do,Po,Ho,Bo,jo),Io=function(e,t,n,r,i,s,o){function u(e){var t;if(t=r(e.el)){var n=e.transitionsEnabled;e.noIntro&&(e.transitionsEnabled=!1),t&&!e.append&&(t.__ractive_instances__&&t.__ractive_instances__.splice(0).forEach(function(e){return e.teardown()}),t.innerHTML=""),e.render(t,e.append).then(function(){e.complete&&e.complete.call(e)}),e.transitionsEnabled=n}}function a(e,r){n(e,{_guid:{value:i()},_subs:{value:t(null),configurable:!0},_config:{value:{}},_patternObservers:{value:[]},_twowayBindings:{value:t(null)},_checkboxNameBindings:{value:t(null)},_animations:{value:[]},nodes:{value:{}},_liveQueries:{value:[]},_liveComponentQueries:{value:[]},_childInitQueue:{value:[]},parseOptions:{value:{}}}),r._parent&&r._component&&(n(e,{_parent:{value:r._parent},component:{value:r._component}}),r._component.instance=e)}function f(e){for(var t in e._checkboxNameBindings)void 0===e.viewmodel.get(t)&&e.viewmodel.set(t,e._checkboxNameBindings[t].reduce(function(e,t){return t.isChecked&&e.push(
t.element.getAttribute("value")),e},[]))}return function(t){var n=arguments[1];void 0===n&&(n={}),t.viewmodel=new s(t),a(t,n),e.init(t.constructor,t,n),t.fragment=new o({template:t.template,root:t,owner:t}),f(t),u(t)}}(en,U,v,En,lo,Fo,Ys),qo=function(e){return function(t,n,r){t.beforeInit&&t.beforeInit(r),e(t,r)}}(Io),Ro=function(e,t,n,r,i,s,o,u){function a(e,t){for(var n in t)if(!r.keys[n]&&!l[n]&&t.hasOwnProperty(n)){var i=t[n];"function"==typeof i&&(i=u(i,e.prototype[n])),e.prototype[n]=i}}var f,l;return l={_parent:!0,_component:!0},o.push(function(){f=o.Ractive}),function c(o){var u,l=this;return o=o||{},o.prototype instanceof f&&(o=i({},o,o.prototype,o.defaults)),u=function(e){s(this,u,e||{})},u.prototype=e(l.prototype),u.prototype.constructor=u,u.extend=c,t(u,{_guid:{value:n()},defaults:{value:{}}}),r.extend(l,u,o),a(u,o),u}}(U,v,lo,en,j,qo,i,z),Uo=function(e,t,n,r,i,s,o,u,a,f,l){var c=function(e){f(this,e)};for(c.prototype=s,i(c,{defaults:{value:e},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:t},events:{writable:!0,value:{}},interpolators:{writable:!0,value:n},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}},svg:{value:r},VERSION:{value:"0.4.0"}}),c.prototype.constructor=c,c.Promise=o,c.extend=u,c.parse=a,l.Ractive=c;l.length;)l.pop()();var h="function";if(typeof Date.now!==h||typeof String.prototype.trim!==h||typeof Object.keys!==h||typeof Array.prototype.indexOf!==h||typeof Array.prototype.forEach!==h||typeof Array.prototype.map!==h||typeof Array.prototype.filter!==h||"undefined"!=typeof window&&typeof window.addEventListener!==h)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return c}(n,r,f,l,v,fo,b,Ro,Xt,Io,i);"undefined"!=typeof module&&module.exports?module.exports=Uo:"function"==typeof define&&define.amd&&define(function(){return Uo}),e.Ractive=Uo,Uo.noConflict=function(){return e.Ractive=t,Uo}}("undefined"!=typeof window?window:this),e.namespace("Common"),e.extend(n,Ractive),n.prototype.constructor=Ractive,e.Common.Ractive=n,e.Common.RactiveDecorators={},e.Common.RactiveDecorators.imgSource=function(e,t){return e.src=t,{teardown:function(){}}},e.Common.RactiveDecorators.style=function(t,n){var r=e.one(t);return r.setAttribute("style",r.getAttribute("style")+n),{teardown:function(){}}}},"gallery-2014.06.12-21-45",{requires:["yui-base","node","base"]});
