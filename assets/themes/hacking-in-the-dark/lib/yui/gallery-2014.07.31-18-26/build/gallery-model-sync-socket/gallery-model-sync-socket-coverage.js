if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-model-sync-socket/gallery-model-sync-socket.js']) {
   __coverage__['build/gallery-model-sync-socket/gallery-model-sync-socket.js'] = {"path":"build/gallery-model-sync-socket/gallery-model-sync-socket.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":37},"end":{"line":1,"column":56}}},"2":{"name":"SocketSync","line":49,"loc":{"start":{"line":49,"column":0},"end":{"line":49,"column":22}}},"3":{"name":"(anonymous_3)","line":122,"loc":{"start":{"line":122,"column":9},"end":{"line":122,"column":21}}},"4":{"name":"(anonymous_4)","line":139,"loc":{"start":{"line":139,"column":17},"end":{"line":139,"column":35}}},"5":{"name":"(anonymous_5)","line":165,"loc":{"start":{"line":165,"column":14},"end":{"line":165,"column":53}}},"6":{"name":"(anonymous_6)","line":180,"loc":{"start":{"line":180,"column":28},"end":{"line":180,"column":44}}},"7":{"name":"(anonymous_7)","line":206,"loc":{"start":{"line":206,"column":18},"end":{"line":206,"column":48}}},"8":{"name":"(anonymous_8)","line":245,"loc":{"start":{"line":245,"column":22},"end":{"line":245,"column":36}}},"9":{"name":"(anonymous_9)","line":281,"loc":{"start":{"line":281,"column":10},"end":{"line":281,"column":47}}},"10":{"name":"(anonymous_10)","line":299,"loc":{"start":{"line":299,"column":55},"end":{"line":299,"column":76}}},"11":{"name":"(anonymous_11)","line":321,"loc":{"start":{"line":321,"column":13},"end":{"line":321,"column":25}}},"12":{"name":"(anonymous_12)","line":335,"loc":{"start":{"line":335,"column":41},"end":{"line":335,"column":57}}},"13":{"name":"(anonymous_13)","line":371,"loc":{"start":{"line":371,"column":14},"end":{"line":371,"column":29}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":406,"column":3}},"2":{"start":{"line":39,"column":0},"end":{"line":45,"column":33}},"3":{"start":{"line":49,"column":0},"end":{"line":49,"column":24}},"4":{"start":{"line":62,"column":0},"end":{"line":62,"column":44}},"5":{"start":{"line":64,"column":0},"end":{"line":386,"column":2}},"6":{"start":{"line":123,"column":8},"end":{"line":124,"column":16}},"7":{"start":{"line":126,"column":8},"end":{"line":128,"column":9}},"8":{"start":{"line":127,"column":12},"end":{"line":127,"column":24}},"9":{"start":{"line":130,"column":8},"end":{"line":130,"column":34}},"10":{"start":{"line":132,"column":8},"end":{"line":134,"column":9}},"11":{"start":{"line":133,"column":12},"end":{"line":133,"column":23}},"12":{"start":{"line":136,"column":8},"end":{"line":136,"column":34}},"13":{"start":{"line":140,"column":8},"end":{"line":140,"column":32}},"14":{"start":{"line":141,"column":8},"end":{"line":141,"column":55}},"15":{"start":{"line":166,"column":8},"end":{"line":168,"column":24}},"16":{"start":{"line":170,"column":8},"end":{"line":174,"column":9}},"17":{"start":{"line":171,"column":11},"end":{"line":171,"column":30}},"18":{"start":{"line":172,"column":11},"end":{"line":172,"column":25}},"19":{"start":{"line":173,"column":11},"end":{"line":173,"column":45}},"20":{"start":{"line":176,"column":8},"end":{"line":183,"column":10}},"21":{"start":{"line":181,"column":16},"end":{"line":181,"column":38}},"22":{"start":{"line":185,"column":8},"end":{"line":185,"column":68}},"23":{"start":{"line":186,"column":8},"end":{"line":186,"column":50}},"24":{"start":{"line":188,"column":8},"end":{"line":192,"column":9}},"25":{"start":{"line":189,"column":12},"end":{"line":189,"column":43}},"26":{"start":{"line":191,"column":12},"end":{"line":191,"column":45}},"27":{"start":{"line":193,"column":8},"end":{"line":193,"column":20}},"28":{"start":{"line":207,"column":8},"end":{"line":209,"column":24}},"29":{"start":{"line":211,"column":8},"end":{"line":214,"column":9}},"30":{"start":{"line":212,"column":12},"end":{"line":212,"column":26}},"31":{"start":{"line":213,"column":12},"end":{"line":213,"column":58}},"32":{"start":{"line":216,"column":8},"end":{"line":216,"column":36}},"33":{"start":{"line":217,"column":8},"end":{"line":234,"column":9}},"34":{"start":{"line":218,"column":12},"end":{"line":230,"column":13}},"35":{"start":{"line":219,"column":16},"end":{"line":225,"column":17}},"36":{"start":{"line":220,"column":20},"end":{"line":224,"column":21}},"37":{"start":{"line":221,"column":24},"end":{"line":221,"column":77}},"38":{"start":{"line":222,"column":24},"end":{"line":222,"column":86}},"39":{"start":{"line":223,"column":24},"end":{"line":223,"column":42}},"40":{"start":{"line":226,"column":16},"end":{"line":226,"column":48}},"41":{"start":{"line":228,"column":16},"end":{"line":228,"column":34}},"42":{"start":{"line":229,"column":16},"end":{"line":229,"column":50}},"43":{"start":{"line":231,"column":12},"end":{"line":233,"column":13}},"44":{"start":{"line":232,"column":16},"end":{"line":232,"column":38}},"45":{"start":{"line":235,"column":8},"end":{"line":235,"column":20}},"46":{"start":{"line":246,"column":8},"end":{"line":246,"column":63}},"47":{"start":{"line":247,"column":8},"end":{"line":249,"column":9}},"48":{"start":{"line":248,"column":12},"end":{"line":248,"column":58}},"49":{"start":{"line":250,"column":8},"end":{"line":252,"column":9}},"50":{"start":{"line":251,"column":12},"end":{"line":251,"column":42}},"51":{"start":{"line":253,"column":8},"end":{"line":253,"column":20}},"52":{"start":{"line":282,"column":8},"end":{"line":284,"column":58}},"53":{"start":{"line":287,"column":8},"end":{"line":287,"column":62}},"54":{"start":{"line":289,"column":8},"end":{"line":291,"column":11}},"55":{"start":{"line":293,"column":8},"end":{"line":295,"column":9}},"56":{"start":{"line":294,"column":12},"end":{"line":294,"column":46}},"57":{"start":{"line":297,"column":8},"end":{"line":297,"column":43}},"58":{"start":{"line":299,"column":8},"end":{"line":305,"column":11}},"59":{"start":{"line":300,"column":12},"end":{"line":304,"column":13}},"60":{"start":{"line":301,"column":16},"end":{"line":301,"column":30}},"61":{"start":{"line":303,"column":16},"end":{"line":303,"column":37}},"62":{"start":{"line":322,"column":8},"end":{"line":322,"column":27}},"63":{"start":{"line":324,"column":8},"end":{"line":326,"column":9}},"64":{"start":{"line":325,"column":12},"end":{"line":325,"column":30}},"65":{"start":{"line":328,"column":8},"end":{"line":330,"column":9}},"66":{"start":{"line":329,"column":12},"end":{"line":329,"column":35}},"67":{"start":{"line":332,"column":8},"end":{"line":344,"column":9}},"68":{"start":{"line":333,"column":12},"end":{"line":333,"column":22}},"69":{"start":{"line":335,"column":12},"end":{"line":340,"column":15}},"70":{"start":{"line":336,"column":16},"end":{"line":339,"column":17}},"71":{"start":{"line":338,"column":20},"end":{"line":338,"column":52}},"72":{"start":{"line":343,"column":12},"end":{"line":343,"column":33}},"73":{"start":{"line":346,"column":8},"end":{"line":346,"column":32}},"74":{"start":{"line":372,"column":8},"end":{"line":372,"column":29}},"75":{"start":{"line":374,"column":8},"end":{"line":376,"column":9}},"76":{"start":{"line":375,"column":12},"end":{"line":375,"column":35}},"77":{"start":{"line":378,"column":8},"end":{"line":380,"column":9}},"78":{"start":{"line":379,"column":12},"end":{"line":379,"column":37}},"79":{"start":{"line":382,"column":8},"end":{"line":384,"column":33}},"80":{"start":{"line":390,"column":0},"end":{"line":390,"column":45}}},"branchMap":{"1":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":8},"end":{"line":126,"column":8}},{"start":{"line":126,"column":8},"end":{"line":126,"column":8}}]},"2":{"line":126,"type":"binary-expr","locations":[{"start":{"line":126,"column":12},"end":{"line":126,"column":32}},{"start":{"line":126,"column":36},"end":{"line":126,"column":48}}]},"3":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":8},"end":{"line":132,"column":8}},{"start":{"line":132,"column":8},"end":{"line":132,"column":8}}]},"4":{"line":132,"type":"binary-expr","locations":[{"start":{"line":132,"column":12},"end":{"line":132,"column":16}},{"start":{"line":132,"column":20},"end":{"line":132,"column":56}}]},"5":{"line":140,"type":"binary-expr","locations":[{"start":{"line":140,"column":8},"end":{"line":140,"column":14}},{"start":{"line":140,"column":19},"end":{"line":140,"column":30}}]},"6":{"line":141,"type":"binary-expr","locations":[{"start":{"line":141,"column":8},"end":{"line":141,"column":27}},{"start":{"line":141,"column":32},"end":{"line":141,"column":53}}]},"7":{"line":166,"type":"binary-expr","locations":[{"start":{"line":166,"column":23},"end":{"line":166,"column":37}},{"start":{"line":166,"column":42},"end":{"line":166,"column":61}}]},"8":{"line":170,"type":"if","locations":[{"start":{"line":170,"column":8},"end":{"line":170,"column":8}},{"start":{"line":170,"column":8},"end":{"line":170,"column":8}}]},"9":{"line":173,"type":"binary-expr","locations":[{"start":{"line":173,"column":16},"end":{"line":173,"column":29}},{"start":{"line":173,"column":33},"end":{"line":173,"column":44}}]},"10":{"line":185,"type":"binary-expr","locations":[{"start":{"line":185,"column":50},"end":{"line":185,"column":57}},{"start":{"line":185,"column":61},"end":{"line":185,"column":65}}]},"11":{"line":188,"type":"if","locations":[{"start":{"line":188,"column":8},"end":{"line":188,"column":8}},{"start":{"line":188,"column":8},"end":{"line":188,"column":8}}]},"12":{"line":207,"type":"binary-expr","locations":[{"start":{"line":207,"column":23},"end":{"line":207,"column":37}},{"start":{"line":207,"column":42},"end":{"line":207,"column":61}}]},"13":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":8},"end":{"line":211,"column":8}},{"start":{"line":211,"column":8},"end":{"line":211,"column":8}}]},"14":{"line":213,"type":"binary-expr","locations":[{"start":{"line":213,"column":17},"end":{"line":213,"column":28}},{"start":{"line":213,"column":32},"end":{"line":213,"column":45}},{"start":{"line":213,"column":49},"end":{"line":213,"column":57}}]},"15":{"line":217,"type":"if","locations":[{"start":{"line":217,"column":8},"end":{"line":217,"column":8}},{"start":{"line":217,"column":8},"end":{"line":217,"column":8}}]},"16":{"line":218,"type":"if","locations":[{"start":{"line":218,"column":12},"end":{"line":218,"column":12}},{"start":{"line":218,"column":12},"end":{"line":218,"column":12}}]},"17":{"line":218,"type":"binary-expr","locations":[{"start":{"line":218,"column":16},"end":{"line":218,"column":24}},{"start":{"line":218,"column":28},"end":{"line":218,"column":48}}]},"18":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":20},"end":{"line":220,"column":20}},{"start":{"line":220,"column":20},"end":{"line":220,"column":20}}]},"19":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":12},"end":{"line":231,"column":12}},{"start":{"line":231,"column":12},"end":{"line":231,"column":12}}]},"20":{"line":246,"type":"binary-expr","locations":[{"start":{"line":246,"column":23},"end":{"line":246,"column":37}},{"start":{"line":246,"column":42},"end":{"line":246,"column":61}}]},"21":{"line":247,"type":"if","locations":[{"start":{"line":247,"column":8},"end":{"line":247,"column":8}},{"start":{"line":247,"column":8},"end":{"line":247,"column":8}}]},"22":{"line":248,"type":"binary-expr","locations":[{"start":{"line":248,"column":17},"end":{"line":248,"column":28}},{"start":{"line":248,"column":32},"end":{"line":248,"column":45}},{"start":{"line":248,"column":49},"end":{"line":248,"column":57}}]},"23":{"line":284,"type":"cond-expr","locations":[{"start":{"line":284,"column":42},"end":{"line":284,"column":48}},{"start":{"line":284,"column":51},"end":{"line":284,"column":57}}]},"24":{"line":287,"type":"cond-expr","locations":[{"start":{"line":287,"column":41},"end":{"line":287,"column":52}},{"start":{"line":287,"column":55},"end":{"line":287,"column":61}}]},"25":{"line":293,"type":"if","locations":[{"start":{"line":293,"column":8},"end":{"line":293,"column":8}},{"start":{"line":293,"column":8},"end":{"line":293,"column":8}}]},"26":{"line":294,"type":"binary-expr","locations":[{"start":{"line":294,"column":26},"end":{"line":294,"column":39}},{"start":{"line":294,"column":43},"end":{"line":294,"column":45}}]},"27":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":17},"end":{"line":297,"column":30}},{"start":{"line":297,"column":34},"end":{"line":297,"column":42}}]},"28":{"line":300,"type":"if","locations":[{"start":{"line":300,"column":12},"end":{"line":300,"column":12}},{"start":{"line":300,"column":12},"end":{"line":300,"column":12}}]},"29":{"line":324,"type":"if","locations":[{"start":{"line":324,"column":8},"end":{"line":324,"column":8}},{"start":{"line":324,"column":8},"end":{"line":324,"column":8}}]},"30":{"line":328,"type":"if","locations":[{"start":{"line":328,"column":8},"end":{"line":328,"column":8}},{"start":{"line":328,"column":8},"end":{"line":328,"column":8}}]},"31":{"line":332,"type":"if","locations":[{"start":{"line":332,"column":8},"end":{"line":332,"column":8}},{"start":{"line":332,"column":8},"end":{"line":332,"column":8}}]},"32":{"line":336,"type":"if","locations":[{"start":{"line":336,"column":16},"end":{"line":336,"column":16}},{"start":{"line":336,"column":16},"end":{"line":336,"column":16}}]},"33":{"line":336,"type":"binary-expr","locations":[{"start":{"line":336,"column":20},"end":{"line":336,"column":31}},{"start":{"line":336,"column":35},"end":{"line":336,"column":46}}]},"34":{"line":346,"type":"binary-expr","locations":[{"start":{"line":346,"column":15},"end":{"line":346,"column":18}},{"start":{"line":346,"column":22},"end":{"line":346,"column":31}}]},"35":{"line":374,"type":"if","locations":[{"start":{"line":374,"column":8},"end":{"line":374,"column":8}},{"start":{"line":374,"column":8},"end":{"line":374,"column":8}}]},"36":{"line":378,"type":"if","locations":[{"start":{"line":378,"column":8},"end":{"line":378,"column":8}},{"start":{"line":378,"column":8},"end":{"line":378,"column":8}}]},"37":{"line":382,"type":"cond-expr","locations":[{"start":{"line":383,"column":16},"end":{"line":383,"column":26}},{"start":{"line":384,"column":16},"end":{"line":384,"column":32}}]},"38":{"line":382,"type":"binary-expr","locations":[{"start":{"line":382,"column":15},"end":{"line":382,"column":19}},{"start":{"line":382,"column":23},"end":{"line":382,"column":59}}]}},"code":["(function () { YUI.add('gallery-model-sync-socket', function (Y, NAME) {","","/**","An extension which provides a sync implementation using Socket.IO as the","transport method, which can be mixed into a Model or ModelList subclass.","","@module gallery-model-sync-socket","**/","","/**","An extension which provides a sync implementation using Socket.IO as the","transport method, which can be mixed into a Model or ModelList subclass.","","This makes it trivial for your Model or ModelList subclasses to communicate","and transmit JSON data via WebSockets, falling back to Flash sockets, long","polling, or other available real-time transport methods if not supported.","","Currently based on Jake Luer's (@logicalparadox/jakeluer) backbone.iobind though","this will likely change in the future to take better advantage of YUI's custom","event system.","","In most cases, you'll only need to provide a value for 'root' when sub-classing","Model, and only provide a value for 'url' when sub-classing ModelList.","","    var User = Y.Base.create('user', Y.Model, [Y.ModelSync.Socket], {","        root: '/users'","    });","","    var Users = Y.Base.create('users', Y.ModelList, [Y.ModelSync.Socket], {","        model: User,","        url  : '/users'","    });","","@class ModelSync.Socket","@extensionfor Model","@extensionfor ModelList","**/","","var Lang = Y.Lang,","","    sub        = Lang.sub,","    isValue    = Lang.isValue,","    isString   = Lang.isString,","    isNumber   = Lang.isNumber,","    isFunction = Lang.isFunction;","","// -- SocketSync --------------------------------------------------------------","","function SocketSync() {}","","/**","Properties that shouldn't be turned into ad-hoc attributes when passed to a","Model or ModelList constructor.","","@property _NON_ATTRS_CFG","@type Array","@default ['root', 'url']","@static","@protected","**/","","SocketSync._NON_ATTRS_CFG = ['root', 'url'];","","SocketSync.prototype = {","","    // -- Public Properties ----------------------------------------------------","    ","    /**","    A String which represents the root or collection part of the Socket.IO ","    event which relates to a Model or ModelList. Usually this value should","    be the same for all instances of a specific Model/ModelList type.","","    When sub-classing Y.Model, most of the time you'll want to override","    this property, and the let the namespaces for the events be generated by","    convention. To make it simpler for transition between ModelSync.REST and","    ModelSync.Socket, these properties for ModelSync.Socket can have beginning ","    or ending slashes in them, which will be taken care of by the parser.","","    When sub-classing Y.ModelList, usually you'll want to ignore configuring the","    `root` and instead just set the `url` to a String; but if you just specify a","    value for `root`, things will work correctly.","","    @property root","    @type String","    @default \"\"","    **/","","    root: '',","","    /**","    A Function or String which is used to generate or specify the global events","    that are listened to by Socket.IO. While this property can be defined for","    each Model/ModelList instance, usually you'll want to use a Function or a","    String-pattern instead.","","    If the `url` property is a Function, it should return the String that should","    be used as the URL. The Function will be called before each request and will","    be passed the sync `action` which is currently being performed.","","    If the `url` property is a String, it will be processed by `Y.Lang.sub()`;","    This is useful when the Socket.IO events for a Model type match a specific","    pattern and can use simple replacement tokens:","","    @example","        'users/{id}'","","    By default, our ModelSync.Socket implementation will cause our `user` Models","    to listen for the following Socket.IO events on the client:","","    @example","        'users/{id}:construct',","        'users/{id}:read',","        'users/{id}:update',","        'users/{id}:delete'","","    And our ModelLists will be listening for the following Socket.IO event:","","    @example","        'users:read',","    **/","        ","    url: function () {","        var root = this.root,","            url;","","        if (this._isYUIModelList || this.isNew()) {","            return root;","        }","","        url = this.getAsURL('id');","","        if (root && root.charAt(root.length - 1) === '/') {","            url += '/';","        }","","        return this._joinURL(url);","    },","","    initializer: function (config) {","        config || (config = {});","        isValue(config.url) && (this.url = config.url);","    },","","    /**","    Binds Socket.IO messages to handlers in your Models and Model Lists","","    @method onSocket","    @param {String} [type] Sync operation type","    @param {Object} [io] (optional) Socket.IO connection","    @param {Function} [callback] Callback to be executed on response","    @param {Object} [context] (optional) `this` context","","    @example","      ","    // Client-side handling","        model.onSocket('update', function (e) {","            this.setAttrs(e.data);","        });","","    // Server-side handling","        socket.on('model:update', function (data, callback) {","            socket.emit('model/' + data.id + ':update', {data, data});","        });","    **/","    onSocket: function (type, io, callback, context) {","        var ioEvents = this._ioEvents || (this._ioEvents = {}),","            globalType = this._getURL() + ':' + type,","            self = this;","","        if (isFunction(io)) {","           context = callback;","           callback = io;","           io = window.socket || this.socket;","        }","","        var event = {","            type: type,","            global: globalType,","            localCallback: callback,","            globalCallback: function (data) {","                self.fire(type, data);","            }","        };","","        this.on(event.type, event.localCallback, (context || self));","        io.on(event.global, event.globalCallback);","        ","        if (!ioEvents[event.name]) {","            ioEvents[event.name] = [event];","        } else {","            ioEvents[event.name].push(event);","        }","        return this;","    },","","    /**","    Removes handlers that are bound to the specified Socket.IO event,","    or a specific callback for that event.","","    @method detachSocket","    @param {String} [type] Sync operation type","    @param {Object} [io] (optional) Socket.IO connection","    @param {Function} [callback] Specific callback handler to remove","    **/","","    detachSocket: function (type, io, callback) {","        var ioEvents = this._ioEvents || (this._ioEvents = {}),","            globalType = this._getURL() + ':' + type,","            self = this;","","        if (isFunction(io)) {","            callback = io;","            io = this.socket || window.socket || Y.socket;","        }","","        var events = ioEvents[type];","        if (Y.isEmpty(events)) {","            if (callback && isFunction(callback)) {","                for (var i = 0, len = events.length; i < len; i++) {","                    if (callback == events[i].localCallback) {","                        this.detach(events[i].type, events[i].localCallback);","                        io.removeListener(events[i].global, events[i].globalCallback);","                        events[i] = false;","                    }","                }","                events = Y.Array.filter(events);","            } else {","                this.detach(type);","                io.removeAllListeners(globalType);","            }","            if (events.length === 0) {","                delete ioEvents[type];","            }","        }","        return this;","    },","","    /**","    Detaches all handlers that are bound to a specific Socket.IO connection.","","    @method detachAllSockets","    @param {Object} [io] The Socket.IO connection to be detached","    **/","","    detachAllSockets: function (io) {","        var ioEvents = this._ioEvents || (this._ioEvents = {});","        if (!io) {","            io = this.socket || window.socket || Y.socket;","        }","        for (var socket in ioEvents) {","            this.detachSocket(socket, io);","        }","        return this;","    },","","    /**","    Communicates with an external Socket.IO server that sends and receives","    data through JSON-based messages.","","    This method is called internally by load(), save(), and destroy().","","    @method sync","    @param {String} [action] Sync action to perform; is one of the following:","","      * **create**: Store a newly-created model for the first time.","      * **read**  : Load an existing model.","      * **update**: Update an existing model.","      * **delete**: Delete an existing model."," ","    @options {Object} [options] Optional data to be mixed in with params ","      serialized and set through Socket.IO","    @param {callback} [callback] Called when the sync operation finishes.","      @param {Error|null} callback.err If an error occurred, this parameter will","        contain the error. If the sync operation succeeded, _err_ will be","        falsy.","      @param {Any} [callback.response] The server's response. This value will","        be passed to the parse() method, which is expected to parse it and","        return an attribute hash.","    **/ ","    ","    sync: function (action, options, callback) {","        var cmd = this._getURL().split('/'),","            // ignore leading slash","            namespace = (cmd[0] !== '') ? cmd[0] : cmd[1];","","        // get past ModelList's own 'create' event","        action = (action === 'create') ? 'construct' : action;","","        var params = Y.mix(options, {","            req: namespace + ':' + action","        });","","        if (!params.data) {","            params.data = this.toJSON() || {};","        }","","        var io = window.socket || Y.Socket;","","        io.emit(namespace + ':' + action, params.data, function (err, data) {","            if (err) {","                callback(err);","            } else {","                callback(null, data);","            }","        });","    },","","    // -- Protected Methods ---------------------------------------------------","","    /**","    Helper method to return the used URL when making the request to the server.","","    This method correctly handles variations of the `url` property/method.","","    @method _getURL","    @param {String} action Sync action to perform.","    @return {String} the URL for the XHR.","    @protected","    **/","","    _getURL: function () {","        var url = this.url;","","        if (isFunction(url)) {","            return this.url();","        }","","        if (url.charAt(0) === '/') {","            url = url.substring(1);","        }","","        if (this._isYUIModel) {","            data = {};","","            Y.Object.each(this.toJSON(), function (v, k) {","                if (isString(v) || isNumber(v)) {","                    // URL-encode any String or Number values.","                    data[k] = encodeURIComponent(v);","                }","            });","","            // Substitute placeholders with the URL-encoded data values.","            url = sub(url, data);","        } ","","        return url || this.root;","    },","","    /**","    Joins the `root` URL to the specified _url_, normalizing leading/trailing","    `/` characters.","","    Modified from YUI 3's `Y.Router` Class: by Ryan Grove (Yahoo! Inc.)","    http://yuilibrary.com/yui/docs/api/classes/Router.html#method__joinURL","","    @example","        model.root = '/foo'","        model._joinURL('bar');  // => 'foo/bar'","        model._joinURL('/bar'); // => 'foo/bar'","","        model.root = '/foo/'","        model._joinURL('bar');  // => 'foo/bar'","        model._joinURL('/bar'); // => 'foo/bar'","","    @method _joinURL","    @param {String} [url] URL to append to the `root` URL.","    @return {String} Joined URL.","    @protected","    **/","","    _joinURL: function (url) {","        var root = this.root;","","        if (url.charAt(0) === '/') {","            url = url.substring(1);","        }","","        if (root.charAt(0) === '/') {","            root = root.substring(1);","        }","","        return root && root.charAt(root.length - 1) === '/' ?","                root + url :","                root + '/' + url;","    }","};","","// -- Namespace ---------------------------------------------------------------","","Y.namespace('ModelSync').Socket = SocketSync;","","","}, 'gallery-2013.09.25-18-27', {","    \"supersedes\": [","        \"\"","    ],","    \"skinnable\": \"false\",","    \"requires\": [","        \"model\",","        \"model-list\",","        \"json-stringify\"","    ],","    \"optional\": [","        \"\"","    ]","});","","}());"]};
}
var __cov_h13AZFi8dJlASKu1B7EgPQ = __coverage__['build/gallery-model-sync-socket/gallery-model-sync-socket.js'];
__cov_h13AZFi8dJlASKu1B7EgPQ.s['1']++;YUI.add('gallery-model-sync-socket',function(Y,NAME){__cov_h13AZFi8dJlASKu1B7EgPQ.f['1']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['2']++;var Lang=Y.Lang,sub=Lang.sub,isValue=Lang.isValue,isString=Lang.isString,isNumber=Lang.isNumber,isFunction=Lang.isFunction;__cov_h13AZFi8dJlASKu1B7EgPQ.s['3']++;function SocketSync(){__cov_h13AZFi8dJlASKu1B7EgPQ.f['2']++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['4']++;SocketSync._NON_ATTRS_CFG=['root','url'];__cov_h13AZFi8dJlASKu1B7EgPQ.s['5']++;SocketSync.prototype={root:'',url:function(){__cov_h13AZFi8dJlASKu1B7EgPQ.f['3']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['6']++;var root=this.root,url;__cov_h13AZFi8dJlASKu1B7EgPQ.s['7']++;if((__cov_h13AZFi8dJlASKu1B7EgPQ.b['2'][0]++,this._isYUIModelList)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['2'][1]++,this.isNew())){__cov_h13AZFi8dJlASKu1B7EgPQ.b['1'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['8']++;return root;}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['1'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['9']++;url=this.getAsURL('id');__cov_h13AZFi8dJlASKu1B7EgPQ.s['10']++;if((__cov_h13AZFi8dJlASKu1B7EgPQ.b['4'][0]++,root)&&(__cov_h13AZFi8dJlASKu1B7EgPQ.b['4'][1]++,root.charAt(root.length-1)==='/')){__cov_h13AZFi8dJlASKu1B7EgPQ.b['3'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['11']++;url+='/';}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['3'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['12']++;return this._joinURL(url);},initializer:function(config){__cov_h13AZFi8dJlASKu1B7EgPQ.f['4']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['13']++;(__cov_h13AZFi8dJlASKu1B7EgPQ.b['5'][0]++,config)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['5'][1]++,config={});__cov_h13AZFi8dJlASKu1B7EgPQ.s['14']++;(__cov_h13AZFi8dJlASKu1B7EgPQ.b['6'][0]++,isValue(config.url))&&(__cov_h13AZFi8dJlASKu1B7EgPQ.b['6'][1]++,this.url=config.url);},onSocket:function(type,io,callback,context){__cov_h13AZFi8dJlASKu1B7EgPQ.f['5']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['15']++;var ioEvents=(__cov_h13AZFi8dJlASKu1B7EgPQ.b['7'][0]++,this._ioEvents)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['7'][1]++,this._ioEvents={}),globalType=this._getURL()+':'+type,self=this;__cov_h13AZFi8dJlASKu1B7EgPQ.s['16']++;if(isFunction(io)){__cov_h13AZFi8dJlASKu1B7EgPQ.b['8'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['17']++;context=callback;__cov_h13AZFi8dJlASKu1B7EgPQ.s['18']++;callback=io;__cov_h13AZFi8dJlASKu1B7EgPQ.s['19']++;io=(__cov_h13AZFi8dJlASKu1B7EgPQ.b['9'][0]++,window.socket)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['9'][1]++,this.socket);}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['8'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['20']++;var event={type:type,global:globalType,localCallback:callback,globalCallback:function(data){__cov_h13AZFi8dJlASKu1B7EgPQ.f['6']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['21']++;self.fire(type,data);}};__cov_h13AZFi8dJlASKu1B7EgPQ.s['22']++;this.on(event.type,event.localCallback,(__cov_h13AZFi8dJlASKu1B7EgPQ.b['10'][0]++,context)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['10'][1]++,self));__cov_h13AZFi8dJlASKu1B7EgPQ.s['23']++;io.on(event.global,event.globalCallback);__cov_h13AZFi8dJlASKu1B7EgPQ.s['24']++;if(!ioEvents[event.name]){__cov_h13AZFi8dJlASKu1B7EgPQ.b['11'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['25']++;ioEvents[event.name]=[event];}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['11'][1]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['26']++;ioEvents[event.name].push(event);}__cov_h13AZFi8dJlASKu1B7EgPQ.s['27']++;return this;},detachSocket:function(type,io,callback){__cov_h13AZFi8dJlASKu1B7EgPQ.f['7']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['28']++;var ioEvents=(__cov_h13AZFi8dJlASKu1B7EgPQ.b['12'][0]++,this._ioEvents)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['12'][1]++,this._ioEvents={}),globalType=this._getURL()+':'+type,self=this;__cov_h13AZFi8dJlASKu1B7EgPQ.s['29']++;if(isFunction(io)){__cov_h13AZFi8dJlASKu1B7EgPQ.b['13'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['30']++;callback=io;__cov_h13AZFi8dJlASKu1B7EgPQ.s['31']++;io=(__cov_h13AZFi8dJlASKu1B7EgPQ.b['14'][0]++,this.socket)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['14'][1]++,window.socket)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['14'][2]++,Y.socket);}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['13'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['32']++;var events=ioEvents[type];__cov_h13AZFi8dJlASKu1B7EgPQ.s['33']++;if(Y.isEmpty(events)){__cov_h13AZFi8dJlASKu1B7EgPQ.b['15'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['34']++;if((__cov_h13AZFi8dJlASKu1B7EgPQ.b['17'][0]++,callback)&&(__cov_h13AZFi8dJlASKu1B7EgPQ.b['17'][1]++,isFunction(callback))){__cov_h13AZFi8dJlASKu1B7EgPQ.b['16'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['35']++;for(var i=0,len=events.length;i<len;i++){__cov_h13AZFi8dJlASKu1B7EgPQ.s['36']++;if(callback==events[i].localCallback){__cov_h13AZFi8dJlASKu1B7EgPQ.b['18'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['37']++;this.detach(events[i].type,events[i].localCallback);__cov_h13AZFi8dJlASKu1B7EgPQ.s['38']++;io.removeListener(events[i].global,events[i].globalCallback);__cov_h13AZFi8dJlASKu1B7EgPQ.s['39']++;events[i]=false;}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['18'][1]++;}}__cov_h13AZFi8dJlASKu1B7EgPQ.s['40']++;events=Y.Array.filter(events);}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['16'][1]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['41']++;this.detach(type);__cov_h13AZFi8dJlASKu1B7EgPQ.s['42']++;io.removeAllListeners(globalType);}__cov_h13AZFi8dJlASKu1B7EgPQ.s['43']++;if(events.length===0){__cov_h13AZFi8dJlASKu1B7EgPQ.b['19'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['44']++;delete ioEvents[type];}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['19'][1]++;}}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['15'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['45']++;return this;},detachAllSockets:function(io){__cov_h13AZFi8dJlASKu1B7EgPQ.f['8']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['46']++;var ioEvents=(__cov_h13AZFi8dJlASKu1B7EgPQ.b['20'][0]++,this._ioEvents)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['20'][1]++,this._ioEvents={});__cov_h13AZFi8dJlASKu1B7EgPQ.s['47']++;if(!io){__cov_h13AZFi8dJlASKu1B7EgPQ.b['21'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['48']++;io=(__cov_h13AZFi8dJlASKu1B7EgPQ.b['22'][0]++,this.socket)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['22'][1]++,window.socket)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['22'][2]++,Y.socket);}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['21'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['49']++;for(var socket in ioEvents){__cov_h13AZFi8dJlASKu1B7EgPQ.s['50']++;this.detachSocket(socket,io);}__cov_h13AZFi8dJlASKu1B7EgPQ.s['51']++;return this;},sync:function(action,options,callback){__cov_h13AZFi8dJlASKu1B7EgPQ.f['9']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['52']++;var cmd=this._getURL().split('/'),namespace=cmd[0]!==''?(__cov_h13AZFi8dJlASKu1B7EgPQ.b['23'][0]++,cmd[0]):(__cov_h13AZFi8dJlASKu1B7EgPQ.b['23'][1]++,cmd[1]);__cov_h13AZFi8dJlASKu1B7EgPQ.s['53']++;action=action==='create'?(__cov_h13AZFi8dJlASKu1B7EgPQ.b['24'][0]++,'construct'):(__cov_h13AZFi8dJlASKu1B7EgPQ.b['24'][1]++,action);__cov_h13AZFi8dJlASKu1B7EgPQ.s['54']++;var params=Y.mix(options,{req:namespace+':'+action});__cov_h13AZFi8dJlASKu1B7EgPQ.s['55']++;if(!params.data){__cov_h13AZFi8dJlASKu1B7EgPQ.b['25'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['56']++;params.data=(__cov_h13AZFi8dJlASKu1B7EgPQ.b['26'][0]++,this.toJSON())||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['26'][1]++,{});}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['25'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['57']++;var io=(__cov_h13AZFi8dJlASKu1B7EgPQ.b['27'][0]++,window.socket)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['27'][1]++,Y.Socket);__cov_h13AZFi8dJlASKu1B7EgPQ.s['58']++;io.emit(namespace+':'+action,params.data,function(err,data){__cov_h13AZFi8dJlASKu1B7EgPQ.f['10']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['59']++;if(err){__cov_h13AZFi8dJlASKu1B7EgPQ.b['28'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['60']++;callback(err);}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['28'][1]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['61']++;callback(null,data);}});},_getURL:function(){__cov_h13AZFi8dJlASKu1B7EgPQ.f['11']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['62']++;var url=this.url;__cov_h13AZFi8dJlASKu1B7EgPQ.s['63']++;if(isFunction(url)){__cov_h13AZFi8dJlASKu1B7EgPQ.b['29'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['64']++;return this.url();}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['29'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['65']++;if(url.charAt(0)==='/'){__cov_h13AZFi8dJlASKu1B7EgPQ.b['30'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['66']++;url=url.substring(1);}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['30'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['67']++;if(this._isYUIModel){__cov_h13AZFi8dJlASKu1B7EgPQ.b['31'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['68']++;data={};__cov_h13AZFi8dJlASKu1B7EgPQ.s['69']++;Y.Object.each(this.toJSON(),function(v,k){__cov_h13AZFi8dJlASKu1B7EgPQ.f['12']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['70']++;if((__cov_h13AZFi8dJlASKu1B7EgPQ.b['33'][0]++,isString(v))||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['33'][1]++,isNumber(v))){__cov_h13AZFi8dJlASKu1B7EgPQ.b['32'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['71']++;data[k]=encodeURIComponent(v);}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['32'][1]++;}});__cov_h13AZFi8dJlASKu1B7EgPQ.s['72']++;url=sub(url,data);}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['31'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['73']++;return(__cov_h13AZFi8dJlASKu1B7EgPQ.b['34'][0]++,url)||(__cov_h13AZFi8dJlASKu1B7EgPQ.b['34'][1]++,this.root);},_joinURL:function(url){__cov_h13AZFi8dJlASKu1B7EgPQ.f['13']++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['74']++;var root=this.root;__cov_h13AZFi8dJlASKu1B7EgPQ.s['75']++;if(url.charAt(0)==='/'){__cov_h13AZFi8dJlASKu1B7EgPQ.b['35'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['76']++;url=url.substring(1);}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['35'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['77']++;if(root.charAt(0)==='/'){__cov_h13AZFi8dJlASKu1B7EgPQ.b['36'][0]++;__cov_h13AZFi8dJlASKu1B7EgPQ.s['78']++;root=root.substring(1);}else{__cov_h13AZFi8dJlASKu1B7EgPQ.b['36'][1]++;}__cov_h13AZFi8dJlASKu1B7EgPQ.s['79']++;return(__cov_h13AZFi8dJlASKu1B7EgPQ.b['38'][0]++,root)&&(__cov_h13AZFi8dJlASKu1B7EgPQ.b['38'][1]++,root.charAt(root.length-1)==='/')?(__cov_h13AZFi8dJlASKu1B7EgPQ.b['37'][0]++,root+url):(__cov_h13AZFi8dJlASKu1B7EgPQ.b['37'][1]++,root+'/'+url);}};__cov_h13AZFi8dJlASKu1B7EgPQ.s['80']++;Y.namespace('ModelSync').Socket=SocketSync;},'gallery-2013.09.25-18-27',{'supersedes':[''],'skinnable':'false','requires':['model','model-list','json-stringify'],'optional':['']});
